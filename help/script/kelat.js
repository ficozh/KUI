/*!
 * kelat JavaScript Library v1.2.2-beta1
 * http://git.oschina.net/ficozhe/K-UI
 *
 * Date: 2016-07-20
 */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("kelat requires window & document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function l(a){return a.getAttribute&&a.getAttribute("class")||""}function q(a,b,c){"function"==typeof b&&(c=arguments[1],b=void 0);var d=a?'<div class="BlankTipsTitle">'+a+"</div>":"",e=b?'<div class="BlankTipsContent">'+b+"</div>":"",f='<div class="BlankTips">'+e+d+"</div></div>",g=n(f);return g.on(k.support.onClick,function(a){c&&c(g,a)}),n("html,body").addClass("OH"),n(document.getElementById(k.WrapperArea)).append(g),this}var c="1.2.2",d={},e=d.toString,f=d.hasOwnProperty,h=(/ktest=true/.test(a.location.hash),++[[]][+[]]+[]+[]>>>0?!0:!1),i={type:function(a){return null===a?a+"":"object"==typeof a||"function"==typeof a?d[e.call(a)]||"object":typeof a},isString:function(a){return"string"==typeof a},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isArray:function(a){return"[object Array]"===Object.prototype.toString.apply(a)?!0:!1},isWindow:function(a){return null!=a&&a===a.window}};i.isPlainObject=function(a){return"object"!==i.type(a)||a.nodeType||i.isWindow(a)?!1:a.constructor&&!f.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},i.isFunction=function(a){return"function"===i.type(a)},i.Extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,j=arguments.length,k=!1;for("boolean"==typeof g&&(k=g,g=arguments[h]||{},h++),"object"!=typeof g&&(g={}),h===j&&(g=this,h--);j>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(k&&d&&(i.isPlainObject(d)||(e=i.isArray(d)))?(e?(e=!1,f=c&&i.isArray(c)?c:[]):f=c&&i.isPlainObject(c)?c:{},g[b]=i.Extend(k,f,d)):void 0!==d&&(g[b]=d));return g};var j={SYSTEM_LANGUAGE:{MODAL:{TIPS:"\u63d0\u793a",OK:"\u786e\u5b9a",CANCEL:"\u53d6\u6d88"},IMG:{IMGTIPS:"\u56fe\u7247\u683c\u5f0f\u4e0d\u6b63\u786e\u6216\u8005\u8de8\u57df\u8bf7\u6c42\uff01",IMGPlaceholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},LOADING:["\u6b63\u5728\u52a0\u8f7d..."]},WrapperArea:"WrapperArea",id:"zh-cn"};a.kelatlocale?a.kelatlocale=i.Extend(!0,j,a.kelatlocale):a.kelatlocale=j;var k={message:"\u60a8\u4f7f\u7528\u671f\u5df2\u5230\uff01",ImgPlaceholder:kelatlocale.SYSTEM_LANGUAGE.IMG.IMGPlaceholder,ImgLazyLoadThreshold:0,ImgLazyLoadSequential:!0,ImgTips:kelatlocale.SYSTEM_LANGUAGE.IMG.IMGTIPS,WrapperArea:kelatlocale.WrapperArea,LayerIndex:"2000",LoadingTitle:kelatlocale.SYSTEM_LANGUAGE.LOADING,LoadingHtml:'<span class="Loading"></span>',ModalTitle:kelatlocale.SYSTEM_LANGUAGE.MODAL.TIPS,ModalButtonOk:kelatlocale.SYSTEM_LANGUAGE.MODAL.OK,ModalButtonCancel:kelatlocale.SYSTEM_LANGUAGE.MODAL.CANCEL,isModalPopover:!1,swipeout:!0,swipeoutActionsNoFold:!1,swipeoutNoFollow:!1,RegExpr:{rnotwhite:/\S+/g,rclass:/[\t\r\n\f]/g,trim:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,device:{android:/(Android);?[\s\/]+([\d.]+)?/,ipad:/(iPad).*OS\s([\d_]+)/,ipod:/(iPod)(.*OS\s([\d_]+))?/,iphone:/(iPhone\sOS)\s([\d_]+)/},validate:{email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,phone:/^((\(\d{3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}$/,mobile:/^1[34578]\d{9}$/,number:/^\d+$/,integer:/^[-\+]?\d+$/,english:/^[A-Za-z]+$/,chinese:/^[\u0391-\uFFE5]+$/,date:/^(\d{4})\u5e74(0\d{1}|1[0-2])\u6708(0\d{1}|[12]\d{1}|3[01])\u65e5$/}},support:function(){var b=["mousedown","mousemove","mouseup"];a.navigator.pointerEnabled?b=["pointerdown","pointermove","pointerup"]:a.navigator.msPointerEnabled&&(b=["MSPointerDown","MSPointerMove","MSPointerUp"]);var c={};return c.touch=!!("ontouchstart"in a||a.DocumentTouch&&document instanceof DocumentTouch),c.desktopEvents=b,c.onClick=c.touch?"tap":"click",c.GetPageScroll=function(){var b="",c="";return a.pageYOffset?(c=a.pageYOffset,b=a.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(c=document.documentElement.scrollTop,b=document.documentElement.scrollLeft):document.body&&(c=document.body.scrollTop,b=document.body.scrollLeft),{X:b,Y:c}},c.GetPageSize=function(){var b="",c="";a.innerHeight&&a.scrollMaxY?(b=a.innerWidth+a.scrollMaxX,c=a.innerHeight+a.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(b=document.body.scrollWidth,c=document.body.scrollHeight):document.body&&(b=document.body.offsetWidth,c=document.body.offsetHeight);var d="",e="";a.innerHeight?(d=a.innerWidth,e=a.innerHeight):document.documentElement&&document.documentElement.clientHeight?(d=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(d=document.body.clientWidth,e=document.body.clientHeight);var f=d>b?d:b,g=e>c?e:c;return{PageW:f,PageH:g,WinW:d,WinH:e}},c}()};if(!a.kelat){a.kelat=function(b,c){return new a.kelat.kelatDom(b,c)},a.kelat.version=c;var m=function(){var b=function(a){var b=this,c=0;for(c=0;c<a.length;c++)b[c]=a[c];return b.length=a.length,this},c=function(c,d){var e=[],f=0;if(c&&!d&&c instanceof b)return c;if(c)if("string"==typeof c){var g,h,i;if(c=i=c.replace(k.RegExpr.trim,""),i.indexOf("<")>=0&&i.indexOf(">")>=0){var j="div";for(0===i.indexOf("<li")&&(j="ul"),0===i.indexOf("<tr")&&(j="tbody"),(0===i.indexOf("<td")||0===i.indexOf("<th"))&&(j="tr"),0===i.indexOf("<tbody")&&(j="table"),0===i.indexOf("<option")&&(j="select"),h=document.createElement(j),h.innerHTML=i,f=0;f<h.childNodes.length;f++)e.push(h.childNodes[f])}else for(g=d||"#"!==c[0]||c.match(/[ .<>:~]/)?(d||document).querySelectorAll(c):[document.getElementById(c.split("#")[1])],f=0;f<g.length;f++)g[f]&&e.push(g[f])}else if(c.nodeType||c===a||c===document)e.push(c);else if(c.length>0&&c[0].nodeType)for(f=0;f<c.length;f++)e.push(c[f]);return new b(e)};b.prototype={addClass:function(a){var b,c,d,e,f,g,h,i=0;if("function"==typeof a)return this.each(function(b){n(this).addClass(a.call(this,b,l(this)))});if("string"==typeof a&&a)for(b=a.match(k.RegExpr.rnotwhite)||[];c=this[i++];)if(e=l(c),d=1===c.nodeType&&(" "+e+" ").replace(k.RegExpr.rclass," ")){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=d.replace(k.RegExpr.trim,""),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){for(var b=a.split(" "),c=0;c<b.length;c++)for(var d=0;d<this.length;d++)"undefined"!=typeof this[d].classList&&this[d].classList.remove(b[c]);return this},hasClass:function(a){return this[0]?this[0].classList.contains(a):!1},toggleClass:function(a){for(var b=a.split(" "),c=0;c<b.length;c++)for(var d=0;d<this.length;d++)"undefined"!=typeof this[d].classList&&this[d].classList.toggle(b[c]);return this},attr:function(a,b){if(1===arguments.length&&"string"==typeof a)return this[0]?this[0].getAttribute(a):void 0;for(var c=0;c<this.length;c++)if(2===arguments.length)this[c].setAttribute(a,b);else for(var d in a)this[c][d]=a[d],this[c].setAttribute(d,a[d]);return this},removeAttr:function(a){for(var b=0;b<this.length;b++)this[b].removeAttribute(a);return this},prop:function(a,b){if(1===arguments.length&&"string"==typeof a)return this[0]?this[0][a]:void 0;for(var c=0;c<this.length;c++)if(2===arguments.length)this[c][a]=b;else for(var d in a)this[c][d]=a[d];return this},data:function(a,b){if("undefined"==typeof b){if(this[0]){if(this[0].kelatDomElementDataStorage&&a in this[0].kelatDomElementDataStorage)return this[0].kelatDomElementDataStorage[a];var c=this[0].getAttribute("data-"+a);return c?c:void 0}return void 0}for(var d=0;d<this.length;d++){var e=this[d];e.kelatDomElementDataStorage||(e.kelatDomElementDataStorage={}),e.kelatDomElementDataStorage[a]=b}return this},removeData:function(a){for(var b=0;b<this.length;b++){var c=this[b];c.kelatDomElementDataStorage&&c.kelatDomElementDataStorage[a]&&(c.kelatDomElementDataStorage[a]=null,delete c.kelatDomElementDataStorage[a])}},dataset:function(){var a=this[0];if(a){var b={};if(a.dataset)for(var d in a.dataset)b[d]=a.dataset[d];else for(var e=0;e<a.attributes.length;e++){var f=a.attributes[e];f.name.indexOf("data-")>=0&&(b[c.toCamelCase(f.name.split("data-")[1])]=f.value)}for(var g in b)"false"===b[g]?b[g]=!1:"true"===b[g]?b[g]=!0:parseFloat(b[g])===1*b[g]&&(b[g]=1*b[g]);return b}return void 0},val:function(a){if("undefined"==typeof a)return this[0]?this[0].value:void 0;for(var b=0;b<this.length;b++)this[b].value=a;return this},transform:function(a){for(var b=0;b<this.length;b++){var c=this[b].style;c.webkitTransform=c.MsTransform=c.msTransform=c.MozTransform=c.OTransform=c.transform=a}return this},transition:function(a){"string"!=typeof a&&(a+="ms");for(var b=0;b<this.length;b++){var c=this[b].style;c.webkitTransitionDuration=c.MsTransitionDuration=c.msTransitionDuration=c.MozTransitionDuration=c.OTransitionDuration=c.transitionDuration=a}return this},on:function(a,b,d,e){function f(a){var e=a.target;if(c(e).is(b))d.call(e,a);else for(var f=c(e).parents(),g=0;g<f.length;g++)c(f[g]).is(b)&&d.call(f[g],a)}var h,i,g=a.split(" ");for(h=0;h<this.length;h++)if("function"==typeof b||b===!1)for("function"==typeof b&&(d=arguments[1],e=arguments[2]||!1),i=0;i<g.length;i++)this[h].addEventListener(g[i],d,e);else for(i=0;i<g.length;i++)this[h].kelatDomLiveListeners||(this[h].kelatDomLiveListeners=[]),this[h].kelatDomLiveListeners.push({listener:d,liveListener:f}),this[h].addEventListener(g[i],f,e);return this},off:function(a,b,c,d){for(var e=a.split(" "),f=0;f<e.length;f++)for(var g=0;g<this.length;g++)if("function"==typeof b||b===!1)"function"==typeof b&&(c=arguments[1],d=arguments[2]||!1),this[g].removeEventListener(e[f],c,d);else if(this[g].kelatDomLiveListeners)for(var h=0;h<this[g].kelatDomLiveListeners.length;h++)this[g].kelatDomLiveListeners[h].listener===c&&this[g].removeEventListener(e[f],this[g].kelatDomLiveListeners[h].liveListener,d);return this},once:function(a,b,c,d){function f(g){c.call(g.target,g),e.off(a,b,f,d)}var e=this;return"function"==typeof b&&(c=arguments[1],d=arguments[2],b=!1),e.on(a,b,f,d)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},trigger:function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)for(var e=0;e<this.length;e++){var f;try{f=new CustomEvent(c[d],{detail:b,bubbles:!0,cancelable:!0})}catch(g){f=document.createEvent("Event"),f.initEvent(c[d],!0,!0),f.detail=b}this[e].dispatchEvent(f)}return this},transitionEnd:function(a){function f(d){if(d.target===this)for(a.call(this,d),c=0;c<b.length;c++)e.off(b[c],f)}var c,b=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],e=this;if(a)for(c=0;c<b.length;c++)e.on(b[c],f);return this},animationEnd:function(a){function f(d){for(a(d),c=0;c<b.length;c++)e.off(b[c],f)}var c,b=["webkitAnimationEnd","OAnimationEnd","MSAnimationEnd","animationend"],e=this;if(a)for(c=0;c<b.length;c++)e.on(b[c],f);return this},width:function(){return this[0]===a?a.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(a){if(this.length>0){if(a){var b=this.styles();return this[0].offsetWidth+parseFloat(b.getPropertyValue("margin-right"))+parseFloat(b.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},height:function(){return this[0]===a?a.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(a){if(this.length>0){if(a){var b=this.styles();return this[0].offsetHeight+parseFloat(b.getPropertyValue("margin-top"))+parseFloat(b.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(this.length>0){var b=this[0],c=b.getBoundingClientRect(),d=document.body,e=b.clientTop||d.clientTop||0,f=b.clientLeft||d.clientLeft||0,g=a.pageYOffset||b.scrollTop,h=a.pageXOffset||b.scrollLeft;return{top:c.top+g-e,left:c.left+h-f}}return null},hide:function(){for(var a=0;a<this.length;a++)this[a].style.display="none";return this},show:function(){for(var a=0;a<this.length;a++)this[a].style.display="block";return this},styles:function(){return this[0]?a.getComputedStyle(this[0],null):void 0},css:function(b,c){var d;if(1===arguments.length){if("string"!=typeof b){for(d=0;d<this.length;d++)for(var e in b)this[d].style[e]=b[e];return this}if(this[0])return a.getComputedStyle(this[0],null).getPropertyValue(b)}if(2===arguments.length&&"string"==typeof b){for(d=0;d<this.length;d++)this[d].style[b]=c;return this}return this},each:function(a){for(var b=0;b<this.length;b++)a.call(this[b],b,this[b]);return this},filter:function(a){for(var c=[],d=this,e=0;e<d.length;e++)a.call(d[e],e,d[e])&&c.push(d[e]);return new b(c)},html:function(a){if("undefined"==typeof a)return this[0]?this[0].innerHTML:void 0;for(var b=0;b<this.length;b++)this[b].innerHTML=a;return this},text:function(a){if("undefined"==typeof a)return this[0]?this[0].textContent.trim():null;for(var b=0;b<this.length;b++)this[b].textContent=a;return this},is:function(d){if(!this[0]||"undefined"==typeof d)return!1;var e,f;if("string"==typeof d){var g=this[0];if(g===document)return d===document;if(g===a)return d===a;if(g.matches)return g.matches(d);if(g.webkitMatchesSelector)return g.webkitMatchesSelector(d);if(g.mozMatchesSelector)return g.mozMatchesSelector(d);if(g.msMatchesSelector)return g.msMatchesSelector(d);for(e=c(d),f=0;f<e.length;f++)if(e[f]===this[0])return!0;return!1}if(d===document)return this[0]===document;if(d===a)return this[0]===a;if(d.nodeType||d instanceof b){for(e=d.nodeType?[d]:d,f=0;f<e.length;f++)if(e[f]===this[0])return!0;return!1}return!1},indexOf:function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b},index:function(){if(this[0]){for(var a=this[0],b=0;null!==(a=a.previousSibling);)1===a.nodeType&&b++;return b}return void 0},eq:function(a){if("undefined"==typeof a)return this;var d,c=this.length;return a>c-1?new b([]):0>a?(d=c+a,new b(0>d?[]:[this[d]])):new b([this[a]])},append:function(a){var c,d;for(c=0;c<this.length;c++)if("string"==typeof a){var e=document.createElement("div");for(e.innerHTML=a;e.firstChild;)this[c].appendChild(e.firstChild)}else if(a instanceof b)for(d=0;d<a.length;d++)this[c].appendChild(a[d]);else this[c].appendChild(a);return this},appendTo:function(a){return c(a).append(this),this},prepend:function(a){var c,d;for(c=0;c<this.length;c++)if("string"==typeof a){var e=document.createElement("div");for(e.innerHTML=a,d=e.childNodes.length-1;d>=0;d--)this[c].insertBefore(e.childNodes[d],this[c].childNodes[0])}else if(a instanceof b)for(d=0;d<a.length;d++)this[c].insertBefore(a[d],this[c].childNodes[0]);else this[c].insertBefore(a,this[c].childNodes[0]);return this},prependTo:function(a){return c(a).prepend(this),this},insertBefore:function(a){for(var b=c(a),d=0;d<this.length;d++)if(1===b.length)b[0].parentNode.insertBefore(this[d],b[0]);else if(b.length>1)for(var e=0;e<b.length;e++)b[e].parentNode.insertBefore(this[d].cloneNode(!0),b[e])},insertAfter:function(a){for(var b=c(a),d=0;d<this.length;d++)if(1===b.length)b[0].parentNode.insertBefore(this[d],b[0].nextSibling);else if(b.length>1)for(var e=0;e<b.length;e++)b[e].parentNode.insertBefore(this[d].cloneNode(!0),b[e].nextSibling)},next:function(a){return new b(this.length>0?a?this[0].nextElementSibling&&c(this[0].nextElementSibling).is(a)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(a){var d=[],e=this[0];if(!e)return new b([]);for(;e.nextElementSibling;){var f=e.nextElementSibling;a?c(f).is(a)&&d.push(f):d.push(f),e=f}return new b(d)},prev:function(a){return new b(this.length>0?a?this[0].previousElementSibling&&c(this[0].previousElementSibling).is(a)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(a){var d=[],e=this[0];if(!e)return new b([]);for(;e.previousElementSibling;){var f=e.previousElementSibling;a?c(f).is(a)&&d.push(f):d.push(f),e=f}return new b(d)},parent:function(a){for(var b=[],d=0;d<this.length;d++)null!==this[d].parentNode&&(a?c(this[d].parentNode).is(a)&&b.push(this[d].parentNode):b.push(this[d].parentNode));return c(c.unique(b))},parents:function(a){for(var b=[],d=0;d<this.length;d++)for(var e=this[d].parentNode;e;)a?c(e).is(a)&&b.push(e):b.push(e),e=e.parentNode;return c(c.unique(b))},closest:function(a){var c=this;return"undefined"==typeof a?new b([]):(c.is(a)||(c=c.parents(a).eq(0)),c)},find:function(a){for(var c=[],d=0;d<this.length;d++)for(var e=this[d].querySelectorAll(a),f=0;f<e.length;f++)c.push(e[f]);return new b(c)},children:function(a){for(var d=[],e=0;e<this.length;e++)for(var f=this[e].childNodes,g=0;g<f.length;g++)a?1===f[g].nodeType&&c(f[g]).is(a)&&d.push(f[g]):1===f[g].nodeType&&d.push(f[g]);return new b(c.unique(d))},remove:function(){for(var a=0;a<this.length;a++)this[a].parentNode&&this[a].parentNode.removeChild(this[a]);return this},detach:function(){return this.remove()},add:function(){var b,d,a=this;for(b=0;b<arguments.length;b++){var e=c(arguments[b]);for(d=0;d<e.length;d++)a[a.length]=e[d],a.length++}return a},ready:function(b){function d(){document.removeEventListener("DOMContentLoaded",d),a.removeEventListener("load",d),c||(c=!0,b&&b())}var c=!1;"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?a.setTimeout(d):(document.addEventListener("DOMContentLoaded",d),a.addEventListener("load",d))},trim:function(a){return"string"==typeof a&&h?a.replace(k.RegExpr.trim,""):""}},function(){function e(a){b.prototype[a]=function(b,e,f){var g;if("undefined"==typeof b){for(g=0;g<this.length;g++)d.indexOf(a)<0&&(a in this[g]?this[g][a]():c(this[g]).trigger(a));return this}return this.on(a,b,e,f)}}for(var a="click blur focus focusin focusout keyup keydown keypress submit change mousedown mousemove mouseup mouseenter mouseleave mouseout mouseover touchstart touchend touchmove resize scroll".split(" "),d="resize scroll".split(" "),f=0;f<a.length;f++)e(a[f])}();var d={};c.ajaxSetup=function(a){a.type&&(a.method=a.type),c.each(a,function(a,b){d[a]=b})};var e=0;return c.ajax=function(b){function h(a,e,f){var g=arguments;a&&c(document).trigger(a,e),f&&(f in d&&d[f](g[3],g[4],g[5],g[6]),b[f]&&b[f](g[3],g[4],g[5],g[6]))}var f={method:"GET",data:!1,async:!0,cache:!0,processData:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},g=["beforeSend","error","complete","success","statusCode"];b.type&&(b.method=b.type),c.each(d,function(a,b){g.indexOf(a)<0&&(f[a]=b)}),c.each(f,function(a,c){a in b||(b[a]=c)}),b.url||(b.url=a.location.toString());var i=b.url.indexOf("?")>=0?"&":"?",j=b.method.toUpperCase();if(("GET"===j||"HEAD"===j||"OPTIONS"===j||"DELETE"===j)&&b.data){var k;k="string"==typeof b.data?b.data.indexOf("?")>=0?b.data.split("?")[1]:b.data:c.serializeObject(b.data),k.length&&(b.url+=i+k,"?"===i&&(i="&"))}if("json"===b.dataType&&b.url.indexOf("callback=")>=0){var m,l="kelat_jsonp_"+Date.now()+e++,n=b.url.split("callback="),o=n[0]+"callback="+l;if(n[1].indexOf("&")>=0){var p=n[1].split("&").filter(function(a){return a.indexOf("=")>0}).join("&");p.length>0&&(o+="&"+p)}var q=document.createElement("script");return q.type="text/javascript",q.onerror=function(){clearTimeout(m),h(void 0,void 0,"error",null,"scripterror")},q.src=o,a[l]=function(b){clearTimeout(m),h(void 0,void 0,"success",b),q.parentNode.removeChild(q),q=null,delete a[l]},document.querySelector("head").appendChild(q),void(b.timeout>0&&(m=setTimeout(function(){q.parentNode.removeChild(q),q=null,h(void 0,void 0,"error",null,"timeout")},b.timeout)))}("GET"===j||"HEAD"===j||"OPTIONS"===j||"DELETE"===j)&&b.cache===!1&&(b.url+=i+"_nocache="+Date.now());var r=new XMLHttpRequest;r.requestUrl=b.url,r.requestParameters=b,r.open(j,b.url,b.async,b.user,b.password);var s=null;if(("POST"===j||"PUT"===j||"PATCH"===j)&&b.data)if(b.processData){var t=[ArrayBuffer,Blob,Document,FormData];if(t.indexOf(b.data.constructor)>=0)s=b.data;else{var u="---------------------------"+Date.now().toString(16);"multipart/form-data"===b.contentType?r.setRequestHeader("Content-Type","multipart/form-data; boundary="+u):r.setRequestHeader("Content-Type",b.contentType),s="";var v=c.serializeObject(b.data);if("multipart/form-data"===b.contentType){u="---------------------------"+Date.now().toString(16),v=v.split("&");for(var w=[],x=0;x<v.length;x++)w.push('Content-Disposition: form-data; name="'+v[x].split("=")[0]+'"\r\n\r\n'+v[x].split("=")[1]+"\r\n");s="--"+u+"\r\n"+w.join("--"+u+"\r\n")+"--"+u+"--\r\n"}else s="application/x-www-form-urlencoded"===b.contentType?v:v.replace(/&/g,"\r\n")}}else s=b.data;b.headers&&c.each(b.headers,function(a,b){r.setRequestHeader(a,b)}),"undefined"==typeof b.crossDomain&&(b.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(b.url)&&RegExp.$2!==a.location.host),b.crossDomain||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),b.xhrFields&&c.each(b.xhrFields,function(a,b){r[a]=b});var y;return r.onload=function(a){if(y&&clearTimeout(y),r.status>=200&&r.status<300||0===r.status){var c;if("json"===b.dataType)try{c=JSON.parse(r.responseText),h("ajaxSuccess",{xhr:r},"success",c,r.status,r)}catch(e){h("ajaxError",{xhr:r,parseerror:!0},"error",r,"parseerror")}else c="text"===r.responseType||""===r.responseType?r.responseText:r.response,h("ajaxSuccess",{xhr:r},"success",c,r.status,r)}else h("ajaxError",{xhr:r},"error",r,r.status);b.statusCode&&(d.statusCode&&d.statusCode[r.status]&&d.statusCode[r.status](r),b.statusCode[r.status]&&b.statusCode[r.status](r)),h("ajaxComplete",{xhr:r},"complete",r,r.status)},r.onerror=function(a){y&&clearTimeout(y),h("ajaxError",{xhr:r},"error",r,r.status)},h("ajaxStart",{xhr:r},"start",r),h(void 0,void 0,"beforeSend",r),r.send(s),b.timeout>0&&(r.onabort=function(){y&&clearTimeout(y)},y=setTimeout(function(){r.abort(),h("ajaxError",{xhr:r,timeout:!0},"error",r,"timeout"),h("ajaxComplete",{xhr:r,timeout:!0},"complete",r,"timeout")},b.timeout)),r},function(){function b(a){c[a]=function(b,d,e){return c.ajax({url:b,method:"post"===a?"POST":"GET",data:"function"==typeof d?void 0:d,success:"function"==typeof d?d:e,dataType:"getJSON"===a?"json":void 0})}}for(var a="get post getJSON".split(" "),d=0;d<a.length;d++)b(a[d])}(),c.each=function(a,c){if("object"==typeof a&&c){var d,e;if(i.isArray(a)||a instanceof b)for(d=0;d<a.length;d++)c(d,a[d]);else for(e in a)a.hasOwnProperty(e)&&c(e,a[e])}},c.unique=function(a){for(var b=[],c=0;c<a.length;c++)-1===b.indexOf(a[c])&&b.push(a[c]);return b},c.serializeObject=c.param=function(a,b){function g(a){if(b.length>0){for(var c="",d=0;d<b.length;d++)c+=0===d?b[d]:"["+encodeURIComponent(b[d])+"]";return c+"["+encodeURIComponent(a)+"]"}return encodeURIComponent(a)}function h(a){return encodeURIComponent(a)}if("string"==typeof a)return a;var d=[],e="&";b=b||[];var f;for(var j in a)if(a.hasOwnProperty(j)){var k;if(i.isArray(a[j])){k=[];for(var l=0;l<a[j].length;l++)i.isArray(a[j][l])||"object"!=typeof a[j][l]?k.push(g(j)+"[]="+h(a[j][l])):(f=b.slice(),f.push(j),f.push(l+""),k.push(c.serializeObject(a[j][l],f)));k.length>0&&d.push(k.join(e))}else"object"==typeof a[j]?(f=b.slice(),f.push(j),k=c.serializeObject(a[j],f),""!==k&&d.push(k)):"undefined"!=typeof a[j]&&""!==a[j]&&d.push(g(j)+"="+h(a[j]))}return d.join(e)},c.toCamelCase=function(a){return a.toLowerCase().replace(/-(.)/g,function(a,b){return b.toUpperCase()})},c.dataset=function(a){return c(a).dataset()},c.getTranslate=function(b,c){var d,e,f,g;return"undefined"==typeof c&&(c="x"),f=a.getComputedStyle(b,null),a.WebKitCSSMatrix?(e=f.transform||f.webkitTransform,e.split(",").length>6&&(e=e.split(", ").map(function(a){return a.replace(",",".")}).join(", ")),g=new WebKitCSSMatrix("none"===e?"":e)):(g=f.MozTransform||f.OTransform||f.MsTransform||f.msTransform||f.transform||f.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),d=g.toString().split(",")),"x"===c&&(e=a.WebKitCSSMatrix?g.m41:16===d.length?parseFloat(d[12]):parseFloat(d[4])),"y"===c&&(e=a.WebKitCSSMatrix?g.m42:16===d.length?parseFloat(d[13]):parseFloat(d[5])),e||0},c.requestAnimationFrame=function(b){return a.requestAnimationFrame?a.requestAnimationFrame(b):a.webkitRequestAnimationFrame?a.webkitRequestAnimationFrame(b):a.mozRequestAnimationFrame?a.mozRequestAnimationFrame(b):a.setTimeout(b,1e3/60)},c.cancelAnimationFrame=function(b){return a.cancelAnimationFrame?a.cancelAnimationFrame(b):a.webkitCancelAnimationFrame?a.webkitCancelAnimationFrame(b):a.mozCancelAnimationFrame?a.mozCancelAnimationFrame(b):a.clearTimeout(b)},c.fn=b.prototype,c.fn.scrollTo=function(a,b,d,e,f){return 4===arguments.length&&"function"==typeof e&&(f=e,e=void 0),this.each(function(){function s(a){void 0===a&&(a=+new Date),null===r&&(r=a);var k,t=Math.max(Math.min((a-r)/d,1),0),u="linear"===e?t:.5-Math.cos(t*Math.PI)/2;return p&&(n=h+u*(l-h)),q&&(o=i+u*(m-i)),p&&l>h&&n>=l&&(g.scrollTop=l,k=!0),p&&h>l&&l>=n&&(g.scrollTop=l,k=!0),q&&m>i&&o>=m&&(g.scrollLeft=m,k=!0),q&&i>m&&m>=o&&(g.scrollLeft=m,k=!0),k?void(f&&f()):(p&&(g.scrollTop=n),q&&(g.scrollLeft=o),void c.requestAnimationFrame(s))}var h,i,j,k,l,m,n,o,g=this,p=b>0||0===b,q=a>0||0===a;if("undefined"==typeof e&&(e="swing"),p&&(h=g.scrollTop,d||(g.scrollTop=b)),q&&(i=g.scrollLeft,d||(g.scrollLeft=a)),d){p&&(j=g.scrollHeight-g.offsetHeight,l=Math.max(Math.min(b,j),0)),q&&(k=g.scrollWidth-g.offsetWidth,m=Math.max(Math.min(a,k),0));var r=null;p&&l===h&&(p=!1),q&&m===i&&(q=!1),c.requestAnimationFrame(s)}})},c.fn.scrollTop=function(a,b,c,d){3===arguments.length&&"function"==typeof c&&(d=c,c=void 0);var e=this;return"undefined"==typeof a?e.length>0?e[0].scrollTop:null:e.scrollTo(void 0,a,b,c,d)},c.fn.scrollLeft=function(a,b,c,d){3===arguments.length&&"function"==typeof c&&(d=c,c=void 0);var e=this;return"undefined"==typeof a?e.length>0?e[0].scrollLeft:null:e.scrollTo(a,void 0,b,c,d)},c}();a.kelat.kelatDom=m;var n=m;a.kelat.fn=a.kelat.prototype={rtl:"rtl"===n("body").css("direction"),support:k.support,trim:function(a){return"string"==typeof a&&h?a.replace(k.RegExpr.trim,""):""},layerBorder:function(){return[].forEach.call(document.querySelectorAll("*"),function(a){a.style.outline="1px solid #"+(~~(Math.random()*(1<<24))).toString(16)})},jsonArray:function(a){return h?JSON.stringify(a):""},escapeHTML:function(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})},throttle:function(a,b,c){var e,d=null;return function(){var f=this,g=arguments,h=+new Date;clearTimeout(d),e||(e=h),h-e>=c?(a.apply(f,g),e=h):d=setTimeout(function(){a.apply(f,g)},b)}},log:function(a,b){return h?console.log(b||"warning",": ",a):""},range:function(a,b){return Math.floor(Math.random()*(a-b+1))+b},ls:a.localStorage,device:function(){var b={},c=navigator.userAgent,d=c.match(k.RegExpr.device.android),e=c.match(k.RegExpr.device.ipad),f=c.match(k.RegExpr.device.ipod),g=!e&&c.match(k.RegExpr.device.iphone);if(b.browse=b.ios=b.android=b.iphone=b.ipad=b.androidChrome=!1,d&&(b.os="android",b.osVersion=d[2],b.android=!0,b.androidChrome=c.toLowerCase().indexOf("chrome")>=0),(e||g||f)&&(b.os="ios",b.ios=!0),g&&!f&&(b.osVersion=g[2].replace(/_/g,"."),b.iphone=!0),e&&(b.osVersion=e[2].replace(/_/g,"."),b.ipad=!0),f&&(b.osVersion=f[3]?f[3].replace(/_/g,"."):null,b.iphone=!0),b.ios&&b.osVersion&&c.indexOf("Version/")>=0&&"10"===b.osVersion.split(".")[0]&&(b.osVersion=c.toLowerCase().split("version/")[1].split(" ")[0]),b.webView=(g||e||f)&&c.match(/.*AppleWebKit(?!.*Safari)/i),b.os&&"ios"===b.os){var i=b.osVersion.split(".");b.minimalUi=!b.webView&&(f||g)&&(1*i[0]===7?1*i[1]>=1:1*i[0]>7)&&n('meta[name="viewport"]').length>0&&n('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}n(document).ready(function(){var a=k.support.GetPageSize();b.statusBar=!1,b.webView&&a.WinW*a.WinH===screen.width*screen.height?b.statusBar=!0:b.statusBar=!1});var j=[];if(b.pixelRatio=a.devicePixelRatio||1,j.push("PixelRatio"+Math.floor(b.pixelRatio)),b.pixelRatio>=2&&j.push("Retina"),b.os&&(j.push(b.os,b.os+"-"+b.osVersion.split(".")[0],b.os+"-"+b.osVersion.replace(/\./g,"-")),"ios"===b.os))for(var l=parseInt(b.osVersion.split(".")[0],10),m=l-1;m>=6;m--)j.push("iosGt"+m);return b.statusBar?j.push("StatusbarOverlay"):n("html").removeClass("StatusbarOverlay"),j.length>0&&n("html").addClass(j.join(" ")),b.browse=c.indexOf("MSIE")>=0?"ie":c.indexOf("Firefox")>=0?"Firefox":c.indexOf("Chrome")>=0?"Chrome":c.indexOf("Edge")>=0?"Edge":c.indexOf("Opera")>=0?"Opera":c.indexOf("Safari")>=0?"Safari":c.indexOf("Netscape")>=0&&"Netscape",h?b:""}(),touchEvents:{start:k.support.touch?"touchstart":k.support.desktopEvents[0],move:k.support.touch?"touchmove":k.support.desktopEvents[1],end:k.support.touch?"touchend":k.support.desktopEvents[2]},touches:function(b,c,d,e){function n(b){var b=b||a.event||arguments.callee.caller.arguments[0];switch(b.preventDefault(),k.support.touch&&(j.touchLength=b.targetTouches.length||0),b.type){case o.touchEvents.start:i=!0,j.startX=Number("touchstart"===b.type?b.targetTouches[0].pageX:b.pageX),j.startY=Number("touchstart"===b.type?b.targetTouches[0].pageY:b.pageY),c(j,l);break;case o.touchEvents.end:i=!1,j.diffX=Number(j.currentX-j.startX),j.diffY=Number(j.currentY-j.startY),e(j,l);break;case o.touchEvents.move:if(!i)return;j.currentX=Number("touchmove"===b.type?b.targetTouches[0].pageX:b.pageX),j.currentY=Number("touchmove"===b.type?b.targetTouches[0].pageY:b.pageY),Number(j.currentX-j.startX)>0?(j.elsX=Number(j.currentX-j.startX-j.diffX),j.elsY=Number(j.currentY-j.startY-j.diffY)):(j.elsX=Number(j.currentX-j.startX+j.diffX),j.elsY=Number(j.currentY-j.startY+j.diffY)),d(j,l)}}var f=!1,i=!1,j={startX:0,startY:0,currentX:0,currentY:0,diffX:0,diffY:0,elsX:0,elsY:0},l=b,m=f?"off":"on";return l[m](o.touchEvents.start,n),l[m](o.touchEvents.move,n),l[m](o.touchEvents.end,n),h?j:""}};var o=a.kelat.fn;a.kelat.extend=n.extend=n.fn.extend=o.extend=i.Extend,a.kelat.extend({expando:"kelat"+(c+Math.random()).replace(/\D/g,""),noop:function(){},ajax:n.ajax,ajaxSetup:n.ajaxSetup,get:n.get,post:n.post,getJSON:n.getJSON,isString:i.isString,isFunction:i.isFunction,isNumber:i.isNumber,isArray:i.isArray,isWindow:i.isWindow,isPlainObject:i.isPlainObject,type:i.type,each:n.each}),function(a){var b={},c=function(){return!0},d=function(){return!1},e={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};b.click=b.mousedown=b.mouseup=b.mousemove="MouseEvents";var f=function(b,f){return(f||!b.isDefaultPrevented)&&(f||(f=b),a.each(e,function(a,e){var g=f[a];b[a]=function(){return this[e]=c,g&&g.apply(f,arguments)},b[e]=d}),(void 0!==f.defaultPrevented?f.defaultPrevented:"returnValue"in f?f.returnValue===!1:f.getPreventDefault&&f.getPreventDefault())&&(b.isDefaultPrevented=c)),b};a.fn.trigger=function(b,c){return b=kelat.isString(b)||kelat.isPlainObject(b)?a.Event(b):f(b),b._args=c,this.each(function(){b.type in focus&&"function"==typeof this[b.type]?this[b.type]():"dispatchEvent"in this?this.dispatchEvent(b):a(this).triggerHandler(b,c)})},a.fn.triggerHandler=function(b,c){var d,e;return this.each(function(f,g){d=createProxy(isString(b)?a.Event(b):b),d._args=c,d.target=g,a.each(findHandlers(g,b.type||b),function(a,b){return e=b.proxy(d),d.isImmediatePropagationStopped()?!1:void 0})}),e},a.Event=function(a,c){kelat.isString(a)||(c=a,a=c.type);var d=document.createEvent(b[a]||"Events"),e=!0;if(c)for(var g in c)"bubbles"===g?e=!!c[g]:d[g]=c[g];return d.initEvent(a,e,!0),f(d)}}(n),function(b){function j(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function l(){g=null,c.last&&(c.el.trigger("longTap"),c={})}function m(){g&&clearTimeout(g),g=null}function n(){d&&clearTimeout(d),e&&clearTimeout(e),f&&clearTimeout(f),g&&clearTimeout(g),d=e=f=g=null,c={}}function o(a){return("touch"===a.pointerType||a.pointerType===a.MSPOINTER_TYPE_TOUCH)&&a.isPrimary}function p(a,b){return a.type==="pointer"+b||a.type==="mouse"+b||a.type.toLowerCase()==="mspointer"+b}var d,e,f,g,i,c={},h=750;b(document).ready(function(){var q,r,u,v,w,s=0,t=0;"MSGesture"in a&&(i=new MSGesture,i.target=document.body),b(document).bind("MSGestureEnd",function(a){
var b=a.velocityX>1?"Right":a.velocityX<-1?"Left":a.velocityY>1?"Down":a.velocityY<-1?"Up":null;b&&(c.el.trigger("swipe"),c.el.trigger("swipe"+b))}).on("touchstart MSPointerDown pointerdown",function(a){(!(v=p(a,"down"))||o(a))&&(u=v?a:a.touches[0],a.touches&&1===a.touches.length&&c.x2&&(c.x2=void 0,c.y2=void 0),w=a.targetTouches,q=Date.now(),r=q-(c.last||q),c.el=b("tagName"in u.target?u.target:u.target.parentNode),d&&clearTimeout(d),c.x1=u.pageX,c.y1=u.pageY,r>0&&250>=r&&(c.isDoubleTap=!0),c.last=q,g=setTimeout(l,h),i&&v&&i.addPointer(a.pointerId))}).on("touchmove MSPointerMove pointermove",function(a){(!(v=p(a,"move"))||o(a))&&(u=v?a:a.touches[0],m(),c.x2=u.pageX,c.y2=u.pageY,s+=Math.abs(c.x1-c.x2),t+=Math.abs(c.y1-c.y2))}).on("touchend MSPointerUp pointerup mouseup",function(a){if((v=p(a,"up"))&&!o(a)){var g=b(a.target);return void(g&&!k.support.touch&&g.trigger("tap"))}m(),c.x2&&Math.abs(c.x1-c.x2)>30||c.y2&&Math.abs(c.y1-c.y2)>30?f=setTimeout(function(){c.el.trigger("swipe"),c.el.trigger("swipe"+j(c.x1,c.x2,c.y1,c.y2)),c={}},0):"last"in c&&(30>s&&30>t?e=setTimeout(function(){try{var a=b.Event("tap");a.cancelTouch=n,a.targetTouches=w,c.el.trigger(a),c.isDoubleTap?(c.el&&c.el.trigger("doubleTap"),c={}):d=setTimeout(function(){d=null,c.el&&c.el.trigger("singleTap"),c={}},250)}catch(e){return}},0):c={},s=t=0)}).on("touchcancel MSPointerCancel pointercancel",n),b(a).on("scroll",n)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(a){b.fn[a]=function(b){return b?this.on(a,b):this.trigger(a)}})}(n),kelat.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){d["[object "+b+"]"]=b.toLowerCase()}),i.Bubbles=function(b,c,d){var b=a.event||arguments.callee.caller.arguments[0],e=b.target||b.srcElement,f=[];return kelat.each(c.toUpperCase().split(" "),function(a,b){f.push(e.tagName!==b&&h?0:1)}),-1===f.indexOf(1)&&h?d():null},a.kelat.bubbles=i.Bubbles,i.Validate=function(a,b){var c="";return"regexp"===kelat.type(b)?(c=b,b=void 0):c=k.RegExpr.validate[b],c.test(a)&&h?!0:!1},a.kelat.validate=i.Validate,i.GetUrlParams=function(b){b=b||{};var c={},d=b.url?b.url:a.location.href,e=d.indexOf("#/")+1,f=d.substring(e),g=f.indexOf("?")+1,i=f.substring(g);if(0!==g)if(b.type){var j=i.indexOf(b.type[0])+b.type[0].length;c[b.type[1]]=i.substring(j)}else for(var k=i.split("&"),l=0;l<k.length;l++){var m=k[l].split("=");c[m[0]]=m[1]}return h?c:null},a.kelat.getUrlParams=i.GetUrlParams,i.LoadJC=function(a,b,c){if("undefined"!=typeof a&&h){var d=document.getElementsByTagName("head")[0];if("js"===b){var e=document.createElement("script");e.src=a,e.type="text/javascript",d.appendChild(e),c&&(e.onload=e.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||c()})}else if("css"===b){var f=document.createElement("link");f.href=a,f.rel="stylesheet",f.type="text/css",d.appendChild(f)}}return this},a.kelat.loadJC=i.LoadJC,i.Glint=function(a){var b=n(a),c=["#DD7886","#FBC7BB","#F4E4C9","#DD7886","#FBC7BB","#F4E4C9","#FFF"],d=0,e=c.length;!function f(){e>++d?(b.css("background",c[d]),setTimeout(f,80)):d=0}()},a.kelat.glint=i.Glint,i.InitPullToRefresh=function(a){function A(a){if(d){if(!o.device.android)return;if("targetTouches"in a&&a.targetTouches.length>1)return}l=n(this),l.hasClass("Refresh")||(e=!1,x=!1,d=!0,f=void 0,t=void 0,"touchstart"===a.type&&(c=a.targetTouches[0].identifier),g.x="touchstart"===a.type?a.targetTouches[0].pageX:a.pageX,g.y="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY,k=+new Date)}function B(a){if(d){var b,h,i;if("touchmove"===a.type){if(c&&a.touches)for(var k=0;k<a.touches.length;k++)a.touches[k].identifier===c&&(i=a.touches[k]);i||(i=a.targetTouches[0]),b=i.pageX,h=i.pageY}else b=a.pageX,h=a.pageY;if(b&&h){if("undefined"==typeof f&&(f=!!(f||Math.abs(h-g.y)>Math.abs(b-g.x))),!f)return void(d=!1);if(s=n("body").scrollTop(),"undefined"==typeof t&&0!==s&&(t=!0),!e){if(l.removeClass("transitioning"),s>l[0].offsetHeight)return void(d=!1);w&&(v=l.attr("data-distance"),v.indexOf("%")>=0&&(v=l[0].offsetHeight*parseInt(v,10)/100)),q=l.hasClass("Refresh")?v:0,p=l[0].scrollHeight!==l[0].offsetHeight&&o.device.ios?!1:!0}return e=!0,j=h-g.y,j>0&&0>=s||0>s?(o.device.ios&&parseInt(o.device.osVersion.split(".")[0],10)>7&&0===s&&!t&&(p=!0),p&&(a.preventDefault(),r=Math.pow(j,.85)+q,l.transform("translate3d(0,"+r+"px,0)")),p&&Math.pow(j,.85)>v||!p&&j>=2*v?(m=!0,l.addClass("PullUp").removeClass("PullDown")):(m=!1,l.removeClass("PullUp").addClass("PullDown")),x||(l.trigger("pullstart"),x=!0),l.trigger("pullmove",{event:a,scrollTop:s,translate:r,touchesDiff:j}),void 0):(x=!1,l.removeClass("PullUp PullDown"),void(m=!1))}}}function C(a){if(!("touchend"===a.type&&a.changedTouches&&a.changedTouches.length>0&&c&&a.changedTouches[0].identifier!==c)){if(!d||!e)return d=!1,void(e=!1);r&&(l.addClass("transitioning"),r=0),l.transform(""),m?(l.addClass("Refresh"),l.trigger("refresh",{done:function(){i.PullToRefreshDone(l)}})):l.removeClass("PullDown"),d=!1,e=!1,x&&l.trigger("pullend")}}function D(){b.off(o.touchEvents.start,A),b.off(o.touchEvents.move,B),b.off(o.touchEvents.end,C)}var b=n(a);if(b.hasClass("PullToRefreshContent")||(b=b.find(".PullToRefreshContent")),b&&0!==b.length&&h){var c,d,e,f,j,k,l,r,s,t,v,w,x,g={},m=!1,p=!1,q=0,y=b.hasClass("Wrapper")?b:b.parents(".Wrapper"),z=!1;y.find(".NavBar").length>0&&(z=!0),z||b.addClass("PullToRefreshNoNavbar"),l=b,l.attr("data-distance")?w=!0:v=44,b.on(o.touchEvents.start,A),b.on(o.touchEvents.move,B),b.on(o.touchEvents.end,C),b[0].KLTDestroyPullToRefresh=D}},i.PullToRefreshDone=function(a){a=n(a),0===a.length&&(a=n(".PullToRefreshContent.Refresh")),a.removeClass("Refresh").addClass("transitioning"),a.transitionEnd(function(){a.removeClass("transitioning PullUp PullDown"),a.trigger("refreshdone")})},i.PullToRefreshTrigger=function(a){a=$(a),0===a.length&&(container=$(".PullToRefreshContent")),a.hasClass("Refresh")||(a.addClass("transitioning Refresh"),a.trigger("refresh",{done:function(){i.PullToRefreshDone(a)}}))},i.DestroyPullToRefresh=function(a){a=$(a);var b=a.hasClass("PullToRefreshContent")?a:a.find(".PullToRefreshContent");0!==b.length&&b[0].KLTDestroyPullToRefresh&&b[0].KLTDestroyPullToRefresh()},a.kelat.pullToRefreshDone=i.PullToRefreshDone,a.kelat.initPullToRefresh=i.InitPullToRefresh,a.kelat.pullToRefreshTrigger=i.PullToRefreshTrigger,a.kelat.destroyPullToRefresh=i.DestroyPullToRefresh,i.isInfiniteScroll=!0,i.scrollCurrent=0,i.HandleInfiniteScroll=function(){var a=n(".InfiniteScroll");if(i.isInfiniteScroll&&a.length>0){var b=a[0].offsetHeight,c=parseInt(a.attr("data-distance")),d=a.hasClass("InfiniteScrollTop");c||(c=50),"string"==typeof c&&c.indexOf("%")>=0&&(c=parseInt(c,10)/100*b),c>b&&(c=b);var e=k.support.GetPageScroll().Y,f=a.offset().top,g=k.support.GetPageSize().WinH;if(i.scrollCurrent>e)return;d?c>e&&a.trigger("infinite"):e+c+g-f>b&&(i.scrollCurrent=e,a.trigger("infinite"))}else i.isInfiniteScroll=!1,i.DetachInfiniteScroll()},i.AttachInfiniteScroll=function(){i.isInfiniteScroll=!0,n(a).on("scroll",i.HandleInfiniteScroll)},i.DetachInfiniteScroll=function(b){i.scrollCurrent=0,n(a).off("scroll",i.HandleInfiniteScroll)},i.InitInfiniteScroll=function(a,b){a&&(i.scrollCurrent=0,b(),i.AttachInfiniteScroll())},a.kelat.infiniteScroll=i.InitInfiniteScroll,a.kelat.detachInfiniteScroll=i.DetachInfiniteScroll,a.kelat.attachInfiniteScroll=i.AttachInfiniteScroll,i.Picker=function(b){function h(){var b=!1;return c.params.convertToPopover||c.params.onlyInPopover?(!c.inline&&c.params.input&&(c.params.onlyInPopover?b=!0:o.device.ios?b=o.device.ipad?!0:!1:n(a).width()>=768&&(b=!0)),b):b}function j(){return c.opened&&c.container&&c.container.length>0&&c.container.parents(".ModalPopover").length>0?!0:!1}function l(){if(c.opened)for(var a=0;a<c.cols.length;a++)c.cols[a].divider||(c.cols[a].calcSize(),c.cols[a].setValue(c.cols[a].value,0,!1))}function m(a){if(a.preventDefault(),c.isCreate||i.ShowModal(c.container),!c.opened&&(c.open(),c.params.scrollToInput&&!h()&&c.params.calculateHeight)){var b=c.input.parents("body");if(0===b.length)return;var l,d=parseInt(f.css("padding-top"),10),e=parseInt(f.css("padding-bottom"),10),g=b[0].offsetHeight-d-c.container.height(),j=b[0].scrollHeight-d-c.container.height(),m=c.input.offset().top-d+c.input[0].offsetHeight;if(m>g){var n=b.scrollTop()+m-g-k.support.GetPageScroll().Y;n+g>j&&(l=n+g-j+e,g===j&&(l=c.container.height()),f.css({"padding-bottom":l+"px"})),b.scrollTop(n,300)}}}function q(a){j()||(c.input&&c.input.length>0?a.target!==c.input[0]&&0===n(a.target).parents(".PickerModal").length&&c.close():0===n(a.target).parents(".PickerModal").length&&c.close())}function r(){c.opened=!1,c.input&&c.input.length>0&&f.css({"padding-bottom":""}),c.params.onClose&&c.params.onClose(c),c.container.find(".PickerItemsCol").each(function(){c.destroyPickerCol(this)})}var c=this,d={calculateHeight:!0,updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,rotateEffect:!1,isEfficient:!1,autoUpdate:!0,momentumRatio:7,freeMode:!1,closeByOutsideClick:!0,scrollToInput:!0,inputReadOnly:!0,convertToPopover:!0,onlyInPopover:!1,toolbar:!0,toolbarOkText:k.ModalButtonOk,toolbarCloseText:k.ModalButtonCancel,toolbarTemplate:'<div class="ToolBar RippleBox"><div class="ToolBarInner"><div class="Left"><a href="javascript:;" class="Link InkRipple ClosePicker">{{closeText}}</a></div><div class="Right"><a href="javascript:;" class="Link InkRipple OkPicker">{{okText}}</a></div></div></div>'};b=b||{};for(var e in d)"undefined"==typeof b[e]&&(b[e]=d[e]);c.params=b,c.cols=[],c.initialized=!1,c.isCreate=!0;var f=n(".WrapContent");c.inline=c.params.container?!0:!1;var g=o.device.ios||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!o.device.android;c.setValue=function(a,b){var d=0;if(0===c.cols.length)return c.value=a,void c.updateValue(a);for(var e=0;e<c.cols.length;e++)c.cols[e]&&!c.cols[e].divider&&(c.cols[e].setValue(a[d],b),d++)},c.updateValue=function(a){for(var b=a||[],d=[],e=0;e<c.cols.length;e++)c.cols[e].divider||(b.push(c.cols[e].value),d.push(c.cols[e].displayValue));if(!(b.indexOf(void 0)>=0)&&(c.value=b,c.displayValue=d,c.params.onChange&&c.params.onChange(c,c.value,c.displayValue),c.input&&c.input.length>0)){var f="INPUT"===c.input[0].tagName?["val","change"]:["text",k.support.onClick],g=c.params.formatValue?c.params.formatValue(c,c.value,c.displayValue):c.value.join(" ");n(c.input)[f[0]](g),n(c.input).trigger(f[1])}},c.initPickerCol=function(a,b){function r(a,b){c.params.rotateEffect?f.wrapper.transform("translate3d(0,"+a+"px,0)"):f.wrapper.transform("translate3d(0,"+a+"px,0)"),b&&f.wrapper.transition(0)}function u(){t=n.requestAnimationFrame(function(){f.updateItems(void 0,void 0,0),u()})}function I(a){x||w||(a.preventDefault(),w=!0,y=z="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY,A=+new Date,v=!0,C=E=n.getTranslate(f.wrapper[0],"y"))}function J(a){if(w){a.preventDefault(),v=!1,z="touchmove"===a.type?a.targetTouches[0].pageY:a.pageY,x||(n.cancelAnimationFrame(t),x=!0,C=E=n.getTranslate(f.wrapper[0],"y"),f.wrapper.transition(0)),a.preventDefault();var b=z-y;E=C+b,D=void 0,p>E&&(E=p-Math.pow(p-E,.8),D="min"),E>q&&(E=q+Math.pow(E-q,.8),D="max"),r(E),f.updateItems(void 0,E,0,c.params.updateValuesOnTouchmove),G=E-F||E,H=+new Date,F=E}}function K(a){if(!w||!x)return void(w=x=!1);w=x=!1,f.wrapper.transition(""),D&&r("min"===D?p:q),B=+new Date;var b,d;B-A>300?d=E:(b=Math.abs(G/(B-H)),d=E+G*c.params.momentumRatio),d=Math.max(Math.min(d,q),p);var e=-Math.floor((d-q)/l);c.params.freeMode||(d=-e*l+q),r(parseInt(d,10)),f.updateItems(e,d,"",!0),c.params.updateValuesOnMomentum&&(u(),f.wrapper.transitionEnd(function(){n.cancelAnimationFrame(t)})),setTimeout(function(){v=!0},100)}function L(a){if(v){n.cancelAnimationFrame(t);var b=n(this).attr("data-picker-value");f.setValue(b)}}var d=n(a),e=d.index(),f=c.cols[e];if(!f.divider){f.container=d,f.wrapper=f.container.find(".PickerItemsColWrapper"),f.items=f.wrapper.find(".PickerItem");var j,l,m,p,q;f.replaceValues=function(a,b){f.destroyEvents(),f.values=a,f.displayValues=b;var d=c.columnHTML(f,!0);f.wrapper.html(d),f.items=f.wrapper.find(".PickerItem"),f.calcSize(),f.setValue(f.values[0],0,!0),f.initEvents()},f.calcSize=function(){c.params.rotateEffect&&(f.container.removeClass("PickerItemsColAbsolute"),f.width||f.container.css({width:""}));var a,b;a=0,b=f.container[0].offsetHeight,j=f.wrapper[0].offsetHeight,l=f.items[0].offsetHeight,m=l*f.items.length,p=b/2-m+l/2,q=b/2-l/2,f.width&&(a=f.width,parseInt(a,10)===a&&(a+="px"),f.container.css({width:a})),c.params.rotateEffect&&(f.width||(f.items.each(function(){var b=n(this);b.css({width:"auto"}),a=Math.max(a,b[0].offsetWidth),b.css({width:""})}),f.container.css({width:a+2+"px"})),f.container.addClass("PickerItemsColAbsolute"))},f.calcSize(),r(q,!0);var t;f.setValue=function(a,b,d){"undefined"==typeof b&&(b="");var e=f.wrapper.find('.PickerItem[data-picker-value="'+a+'"]').index();if("undefined"!=typeof e&&-1!==e){var g=-e*l+q;f.wrapper.transition(b),r(g),c.params.updateValuesOnMomentum&&f.activeIndex&&f.activeIndex!==e&&(n.cancelAnimationFrame(t),f.wrapper.transitionEnd(function(){n.cancelAnimationFrame(t)}),u()),f.updateItems(e,g,b,d)}},f.updateItems=function(a,b,d,e){"undefined"==typeof b&&(b=n.getTranslate(f.wrapper[0],"y")),"undefined"==typeof a&&(a=-Math.round((b-q)/l)),0>a&&(a=0),a>=f.items.length&&(a=f.items.length-1);var h=f.activeIndex;f.activeIndex=a,f.items.removeClass("PickerSelected");var i=f.items.eq(a).addClass("PickerSelected");if(c.params.rotateEffect){f.items.transition(d);(b-(Math.floor((b-q)/l)*l+q))/l;f.items.each(function(a){var c=n(this),d=(a*l-(q-b))/l,e=Math.ceil(f.height/l/2)+1,h=-18*d;h>180&&(h=180),-180>h&&(h=-180),Math.abs(d)>e?c.addClass("PickerItemFar"):c.removeClass("PickerItemFar"),c.transform("translate3d(0, "+(-b+q)+"px, "+(g?-110:0)+"px) rotateX("+h+"deg)")})}else f.items.transition(d);(e||"undefined"==typeof e)&&(f.value=i.attr("data-picker-value"),f.displayValue=f.displayValues?f.displayValues[a]:f.value,h!==a&&(f.onChange&&f.onChange(c,f.value,f.displayValue),c.params.autoUpdate&&c.updateValue()))},b&&f.updateItems(0,q,0);var w,x,y,z,A,B,C,D,E,F,G,H,v=!0;f.initEvents=function(a){var b=a?"off":"on";f.container[b](o.touchEvents.start,I),f.container[b](o.touchEvents.move,J),f.container[b](o.touchEvents.end,K),f.items[b](k.support.onClick,L)},f.destroyEvents=function(){f.initEvents(!0)},f.container[0].KLTDestroyPickerCol=function(){f.destroyEvents()},f.initEvents()}},c.destroyPickerCol=function(a){a=n(a),"KLTDestroyPickerCol"in a[0]&&a[0].KLTDestroyPickerCol()},n(a).on("resize",l),c.columnHTML=function(a,b){var c="",d="";if(a.divider)d+='<div class="PickerItemsCol PickerItemsColDivider '+(a.textAlign?"PickerItemsCol_"+a.textAlign:"")+" "+(a.cssClass||"")+'">'+a.content+"</div>";else{for(var e=0;e<a.values.length;e++)c+='<div class="PickerItem" data-picker-value="'+a.values[e]+'">'+(a.displayValues?a.displayValues[e]:a.values[e])+"</div>";d+='<div class="PickerItemsCol '+(a.textAlign?"PickerItemsCol_"+a.textAlign:"")+" "+(a.cssClass||"")+'"><div class="PickerItemsColWrapper">'+c+"</div></div>"}return b?c:d},c.layout=function(){var d,a="",b="";c.cols=[];var e="";for(d=0;d<c.params.cols.length;d++){var f=c.params.cols[d];e+=c.columnHTML(c.params.cols[d]),c.cols.push(f)}b="PickerModal PickerColumns "+(c.params.cssClass||"")+(c.params.rotateEffect?" Picker3d":""),a='<div class="'+b+'">'+(c.params.toolbar?c.params.toolbarTemplate.replace(/{{closeText}}/,c.params.toolbarCloseText).replace(/{{okText}}/,c.params.toolbarOkText):"")+'<div class="PickerModalInner PickerItems">'+e+'<div class="PickerCenterHighlight"></div></div></div>',c.pickerHTML=a};return c.params.input&&(c.input=n(c.params.input),c.input.length>0&&(c.params.inputReadOnly&&c.input.prop("readOnly",!0),c.inline||c.input.on("click",m),c.params.inputReadOnly&&c.input.on("focus mousedown",function(a){a.preventDefault()}))),!c.inline&&c.params.closeByOutsideClick&&n("html").on("click",q),c.opened=!1,c.open=function(){var a=h();c.opened||(c.isCreate&&(c.layout(),a?(c.pickerHTML='<div class="ModalPopover ModalPopoverPickerColumns"><div class="ModalPopoverInner">'+c.pickerHTML+"</div></div>",c.popover=i.Popover(c.pickerHTML,c.params.input,!0),c.container=n(c.popover).find(".PickerModal"),n(c.popover).on("close",function(){r()})):c.inline?(c.container=n(c.pickerHTML),c.container.addClass("PickerModalInline"),n(c.params.container).append(c.container)):(c.container=n(i.PickerModal(c.pickerHTML,!c.params.isEfficient)),n(c.container).on("close",function(){r()})),c.params.isEfficient&&(c.isCreate=!1)),c.container.find(".OkPicker,.ClosePicker").on("click",function(){n(this).hasClass("OkPicker")&&!c.params.autoUpdate&&c.updateValue(),c.close()}),c.container[0].KLTPicker=c,c.container.find(".PickerItemsCol").each(function(){var a=!0;(!c.initialized&&c.params.value||c.initialized&&c.value)&&(a=!1),c.initPickerCol(this,a)}),c.initialized?c.value&&c.setValue(c.value,0):c.value?c.setValue(c.value,0):c.params.value&&c.setValue(c.params.value,0)),c.opened=!0,c.initialized=!0,c.params.onOpen&&c.params.onOpen(c)},c.close=function(){return c.opened&&!c.inline?j()?void(c.isCreate?i.CloseModal(c.popover):(i.HideModal(c.popover),c.opened=!1)):void(c.isCreate?i.CloseModal(c.container):(i.HideModal(c.container),c.opened=!1)):void 0},c.destroy=function(){c.close(),c.params.input&&c.input.length>0&&c.input.off("click focus",m),n("html").off("click",q),n(a).off("resize",l)},c.inline?c.open():!c.initialized&&c.params.value&&c.setValue(c.params.value),c},a.kelat.picker=function(a){return new i.Picker(a)},i.BackToTop=function(){var b='<div class="BackToTop"><i class="I IGoTop"></i></div>',c=n(document.getElementById(k.WrapperArea)),d=n(b);n(a).on("scroll",function(){if(c.find(".isBackToTop").length>0){var a=k.support.GetPageScroll().Y;a>=200?(c.append(d),d.once(k.support.onClick,function(){n("html,body").scrollTop(0,100),setTimeout(function(){d.remove()},100)})):100>a&&d.remove()}})},i.AddNotify=function(b){if(b){var c=b.title?'<div class="ItemTitle">'+b.title+"</div>":"",d=b.subtitle?'<div class="ItemSubtitle">'+b.subtitle+"</div>":"",e=b.message?'<div class="ItemText">'+b.message+"</div>":"",f=b.media?'<div class="ItemMedia">'+b.media+"</div>":"",g='<div class="ItemAfter"><a href="javascript:;" class="CloseNotify"><span></span></a></div>',h=n(".NotifyBox");0===h.length&&(n(document.getElementById(k.WrapperArea)).append('<ul class="NotifyBox ListBlock MediaList" style="z-index:'+k.LayerIndex+'"></ul>'),h=n(".NotifyBox")),h.show();var j='<li class="ListItem"><div class="ItemCon InkRipple">'+f+'<div class="ItemInner"><div class="ItemTitleRow">'+c+g+"</div>"+d+e+"</div></div></li>",l=n(j);l.on(k.support.onClick,function(a){var c=!1,d=n(a.target);d.is(".CloseNotify")||n(a.target).parents(".CloseNotify").length>0?(c=!0,b.onClose&&b.onClose(l[0],a)):b.closeOnClick&&(c=!0),c&&i.CloseNotify(l[0])}),h.prepend(l[0]);var m=l.outerHeight();l.css("margin-top",-m+"px"),a.setTimeout(function(){l.addClass("ListItemInOut "+b.additionalClass).css("margin-top","0px")},5)}return this},i.CloseNotify=function(b){if(b=n(b),0!==b.length){var c=n(".NotifyBox"),d=b.outerHeight();b.css("height",d+"px"),a.setTimeout(function(){b.addClass("ListItemInOut").css("height","0px")},20),b.addClass("NotifyBoxHidden").transitionEnd(function(){b.remove(),0===c.find(".ListItem").length&&c.hide()})}},a.kelat.addNotify=i.AddNotify,a.kelat.closeNotify=i.CloseNotify,i.Indicator=function(){return h?n(document.getElementById(k.WrapperArea)).append('<div class="LoadingIndicatorBlank"></div><div class="LoadingIndicatorBox"><span class="Loading LoadingWhite"></span></div>'):null},i.unIndicator=function(){return n(".LoadingIndicatorBlank, .LoadingIndicatorBox").remove()},a.kelat.indicator=i.Indicator,a.kelat.unIndicator=i.unIndicator,i.Loading=function(a){return h?i.Modal({title:a||k.LoadingTitle,content:'<div class="TC">'+k.LoadingHtml+"</div>",className:"ModalLoading"}):null},i.unLoading=function(){return i.CloseModal(".ModalBox.ModalLoading")},a.kelat.loading=i.Loading,a.kelat.unLoading=i.unLoading,i.SizeNavbars=function(a){var b=a?n(a).find(".NavBar .NavBarInner"):n(".NavBar .NavBarInner");b.each(function(){var l,m,a=n(this),b=o.rtl?a.find(".Right"):a.find(".Left"),c=o.rtl?a.find(".Left"):a.find(".Right"),d=a.find(".Center"),e=0===b.length,f=0===c.length,g=e?0:b.outerWidth(!0),h=f?0:c.outerWidth(!0),i=d.outerWidth(!0),j=a.styles(),k=a[0].offsetWidth-parseInt(j.paddingLeft,10)-parseInt(j.paddingRight,10);f&&(l=k-i),e&&(l=0),e||f||(l=(k-h-i+g)/2);var p=(k-i)/2;k-g-h>i?(g>p&&(p=g),p+i>k-h&&(p=k-h-i),m=p-l):m=0;var q=m;o.rtl&&e&&f&&d.length>0&&(q=-q),d.css({left:q+"px"})})},i.ShowModal=function(a){return a.prev(".ModalBlank").css("z-index",k.LayerIndex).removeClass("ModalBlankVisibleOut").addClass("ModalBlankVisibleIn"),a.removeClass("ModalOut").css({"z-index":++k.LayerIndex}).addClass("ModalIn"),a},i.HideModal=function(a){a.removeClass("ModalIn").addClass("ModalOut").transitionEnd(function(b){a.removeClass("ModalOut")}),a.prev(".ModalBlank").removeClass("ModalBlankVisibleIn").addClass("ModalBlankVisibleOut").transitionEnd(function(){n(this).removeClass("ModalBlankVisibleOut").removeAttr("style")})},i.OpenModal=function(b,c,d,e){var f=+new Date,g=b.hasClass("ModalPopover"),j=b.hasClass("PickerModal"),l=b.hasClass("PopupBox");b.hasClass("RemoveOnClose");n(document.getElementById(k.WrapperArea)).append('<div class="ModalBlank ModalBlank'+f+'" style="z-index:'+k.LayerIndex+'"/>'),n(document.getElementById(k.WrapperArea)).append(b[0]),i.SizeNavbars(b);var o=n(".ModalBlank"+f);"ModalPromptBox"===(c?c:"")?(b.addClass(c),a.setTimeout(function(){i.CloseModal(b)},e)):(k.isModalPopover?b.addClass(c):g||j||l||b.css({marginTop:-Math.round(b.outerHeight()/2)+"px"}),k.isModalPopover=!1),a.setTimeout(function(){b&&h&&i.ShowModal(b),(g||j||l)&&o.on(k.support.onClick,function(){i.CloseModal(b,d)})},5)},i.CloseModal=function(a,b){if(a=n(a||".ModalBox.ModalBoxIn"),"undefined"==typeof a||0!==a.length){var d=(a.hasClass("Modal"),a.hasClass("ModalPopover")),e=a.hasClass("PopupBox"),f=a.hasClass("PickerModal"),g=a.hasClass("RemoveOnClose"),h=a.hasClass("HideOnClose");return a.trigger("close"),a.removeClass("ModalIn").addClass("ModalOut").transitionEnd(function(c){!!b&&b[0].append(b[1]),f||d||e?(h?a.removeClass("ModalOut"):a.removeClass("ModalOut").hide(),g&&a.length>0&&a.remove()):a.remove()}).prev().removeClass("ModalBlankVisibleIn").addClass("ModalBlankVisibleOut").transitionEnd(function(){h&&a.length>0?n(this).removeClass("ModalBlankVisibleOut").removeAttr("style"):n(this).remove()}),!0}},i.Modal=function(a){a=a||{};var e,b="",c="",d="",f=typeof a.content;if(a.buttons&&a.buttons.length>0)for(var g=0;g<a.buttons.length;g++)0===g?c="First":g===a.buttons.length-1&&(c="Last"),b+='<a href="javascript:;" class="ModalButton '+c+'">'+a.buttons[g].text+"</a>";var h=a.title?'<div class="ModalHeader">'+a.title+"</div>":"",j=a.content?"object"===f?'<div class="ModalContent"></div>':'<div class="ModalContent">'+a.content+"</div>":"",l=a.afterText?a.afterText:"",m=a.buttons&&0!==a.buttons.length?"":"ModalNoButtons",o=a.buttons&&a.buttons.length>0?'<div class="ModalFooter ModalFooter'+a.buttons.length+'">'+b+"</div>":"";d='<div class="ModalBox '+m+" "+(a.className?a.className:"")+'"><div class="ModalInner">'+(h+j+l)+"</div>"+o+"</div>";var p=n(d);return"object"===f&&(e=[a.content.parent(),a.content],p.find(".ModalContent").append(e[1])),p.find(".ModalButton").each(function(b,c){n(c).on(k.support.onClick,function(c){a.buttons[b].close!==!1&&i.CloseModal(p),a.buttons[b].onClick&&a.buttons[b].onClick(p,c),a.onClick&&a.onClick(p,b)})}),i.OpenModal(p,a.className?a.className:"",e,a.displayTime),p[0]},i.Alert=function(a,b,c,d){return"function"==typeof b&&(d=arguments[2],c=arguments[1],b=void 0),h?i.Modal({content:a||"",title:"undefined"==typeof b?k.ModalTitle:b,buttons:[{text:d&&d[0]?d[0]:k.ModalButtonOk,onClick:c}]}):null},i.Confirm=function(a,b,c,d,e,f){return"function"==typeof b&&("object"==typeof c?e=arguments[2]:(e=arguments[3],d=arguments[2]),c=arguments[1],b=void 0),h?i.Modal({content:a||"",title:"undefined"==typeof b?k.ModalTitle:b,className:f?f:"",buttons:[{text:e&&e[1]?e[1]:k.ModalButtonCancel,onClick:d},{text:e&&e[0]?e[0]:k.ModalButtonOk,onClick:c}]}):null},i.Prompt=function(a,b){return h?i.Modal({content:a||"",displayTime:b?b:2e3,className:"ModalPromptBox"}):null},i.Popup=function(a,b){return"undefined"==typeof b&&(b=!0),"string"==typeof a&&a.indexOf("<")>=0&&i.ModalString(a,b,function(b){a=b}),a=n(a),0===a.length?!1:(a.show(),a.find(".OkPicker,.ClosePicker,.ClosePopup").on("click",function(){i.CloseModal(a)}),i.OpenModal(a),a[0])},i.ConfirmModal=function(a,b,c,d,e){return new i.Confirm(a,b,c,d,e,"ModalPickerBox")},i.PickerModal=function(a,b){if("undefined"==typeof b&&(b=!0),"string"==typeof a&&a.indexOf("<")>=0){if(a=n(a),a.dd="1",!(a.length>0))return!1;b?a.addClass("RemoveOnClose"):a.addClass("HideOnClose"),n(document.getElementById(k.WrapperArea)).append(a[0])}return a=n(a),0===a.length?!1:(n(".PickerModal.ModalIn:not(.ModalOut)").length>0&&!a.hasClass("ModalIn")&&i.CloseModal(".PickerModal.ModalIn:not(.ModalOut)"),i.OpenModal(a),a[0])},i.ModalString=function(a,b,c){var d=document.createElement("div");return d.innerHTML=a.trim(),d.childNodes.length>0?(a=d.childNodes[0],b&&a.classList.add("RemoveOnClose"),n(document.getElementById(k.WrapperArea)).append(a),c(a)):!1},i.Popover=function(b,c,d){function e(){b.css({left:"",top:""});var e,g,h,a=b.width(),d=b.height(),f=0;e=b.find(".ModalPopoverAngle"),f=e.width()/2,e.removeClass("onLeft onRight onTop onBottom").css({left:"",top:""});var i=c.outerWidth(),j=c.outerHeight(),l=c.offset(),m=c.parents("body");m.length>0&&(l.top=l.top-m[0].scrollTop);var n=k.support.GetPageScroll(),o=k.support.GetPageSize(),p=o.WinH,q=o.WinW,r=0,s=0,t=0,u="top";d+f<l.top?r=l.top-d-f+n.Y:d+f<p-l.top-j?(u="bottom",r=l.top+j+f+n.Y):(u="middle",r=j/2+l.top-d/2,t=r,0>=r?r=5:r+d>=p&&(r=p-d-5),t-=r),"top"===u||"bottom"===u?(s=i/2+l.left-a/2,t=s,5>s&&(s=5),s+a>q&&(s=q-a-5),"top"===u&&e.addClass("onBottom"),"bottom"===u&&e.addClass("onTop"),t-=s,g=a/2-f+t,g=Math.max(Math.min(g,a-2*f-13),13),e.css({left:g+"px"})):"middle"===u&&(s=l.left-a-f,e.addClass("onRight"),(5>s||s+a>q)&&(5>s&&(s=l.left+i+f),s+a>q&&(s=q-a-5),e.removeClass("onRight").addClass("onLeft")),h=d/2-f+t,h=Math.max(Math.min(h,d-2*f-13),13),e.css({top:h+"px"})),b.css({top:r+"px",left:s+"px"})}return"undefined"==typeof d&&(d=!0),"string"==typeof b&&b.indexOf("<")>=0&&i.ModalString(b,d,function(a){b=a}),k.isModalPopover=!0,b=n(b),c=n(c),0===b.length||0===c.length?!1:(0===b.find(".ModalPopoverAngle").length&&b.append('<div class="ModalPopoverAngle"></div>'),b.show(),e(),n(a).on("resize",e),b.on("close",function(){n(a).off("resize",e)}),i.OpenModal(b),h?b[0]:null)},a.kelat.alert=i.Alert,a.kelat.confirm=i.Confirm,a.kelat.prompt=i.Prompt,a.kelat.pickerModal=i.PickerModal,a.kelat.popup=i.Popup,a.kelat.popover=i.Popover,a.kelat.confirmModal=i.ConfirmModal,a.kelat.blankTips=q,i.OpenActions=function(b){var c=+new Date;n(document.getElementById(k.WrapperArea)).append(n('<div class="ModalBlank ActionsBlank'+c+'" style="z-index:'+k.LayerIndex+'"/>')),n(document.getElementById(k.WrapperArea)).append(n(b[0])),a.setTimeout(function(){b&&h&&b.css({"z-index":++k.LayerIndex}).removeClass("ModalOut").addClass("ModalIn"),n(".ActionsBlank"+c).addClass("ModalBlankVisibleIn").transitionEnd(function(){n(this).on(k.support.onClick,function(){i.CloseModal(b)})})},5)},i.Actions=function(a){for(var a=a||[],b="",c="",d=0;d<a.length;d++)for(var e=0;e<a[d].length;e++){0===e&&(b+='<div class="ActionsModalGroup">');var f=a[d][e],g=f.label?"ActionsLabel":"ActionsButton",j=f.text?f.text:k.ModalButtonCancel;f.bold&&(g+=" ActionsButtonBold"),f.color&&(g+=" "+f.color),f.bg&&(g+=" "+f.bg),f.disabled&&(g+=" disabled"),b+='<div class="'+g+'">'+j+"</div>",e===a[d].length-1&&(b+="</div>")}c='<div class="ModalBox ActionsModal">'+b+"</div>";var l=".ActionsModalGroup",m=".ActionsButton",o=n(c),p=o.find(l);return p.each(function(b,c){var d=b;n(c).children().each(function(b,c){var g,e=b,f=a[d][e];n(c).is(m)&&(g=n(c)),n(c).find(m).length>0&&(g=n(c).find(m)),g&&g.on(k.support.onClick,function(a){f.close!==!1&&i.CloseModal(o),f.onClick&&f.onClick(o,a)})})}),h?i.OpenActions(o):""},a.kelat.actions=i.Actions,i.swipeoutOpenedEl=void 0,i.allowSwipeout=!0,i.initSwipeout=function(a){function D(a){i.allowSwipeout&&(c=!1,b=!0,d=void 0,e.x="touchstart"===a.type?a.targetTouches[0].pageX:a.pageX,e.y="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY,f=(new Date).getTime())}function E(a){if(b){var f="touchmove"===a.type?a.targetTouches[0].pageX:a.pageX,o="touchmove"===a.type?a.targetTouches[0].pageY:a.pageY;if("undefined"==typeof d&&(d=!!(d||Math.abs(o-e.y)>Math.abs(f-e.x))),d)return void(b=!1);if(!c){if(n(".ListBlock.SortableOpened").length>0)return;h=n(this),j=h.find(".SwipeoutCon"),l=h.find(".SwipeoutActionsRight"),m=h.find(".SwipeoutActionsLeft"),p=q=u=v=y=x=null,B=m.hasClass("swipeout-actions-no-fold")||k.swipeoutActionsNoFold,C=l.hasClass("swipeout-actions-no-fold")||k.swipeoutActionsNoFold,m.length>0&&(p=m.outerWidth(),u=m.children(".SwipeoutItem"),x=m.find(".SwipeoutOverswipe")),l.length>0&&(q=l.outerWidth(),v=l.children(".SwipeoutItem"),y=l.find(".SwipeoutOverswipe")),s=h.hasClass("SwipeoutOpened"),s&&(t=h.find(".SwipeoutActionsLeft.SwipeoutActionsOpened").length>0?"left":"right"),h.removeClass("transitioning"),k.swipeoutNoFollow||(h.find(".SwipeoutActionsOpened").removeClass("SwipeoutActionsOpened"),h.removeClass("SwipeoutOpened"))}if(c=!0,a.preventDefault(),g=f-e.x,r=g,s&&("right"===t?r-=q:r+=p),r>0&&0===m.length||0>r&&0===l.length){if(!s)return b=c=!1,j.transform(""),v&&v.length>0&&v.transform(""),void(u&&u.length>0&&u.transform(""));r=0}w=0>r?"toLeft":r>0?"toRight":w?w:"toLeft";var D,E,F;if(k.swipeoutNoFollow)return s?("right"===t&&g>0&&i.swipeoutClose(h),"left"===t&&0>g&&i.swipeoutClose(h)):(0>g&&l.length>0&&i.swipeoutOpen(h,"right"),g>0&&m.length>0&&i.swipeoutOpen(h,"left")),b=!1,void(c=!1);z=!1,A=!1;var G;if(l.length>0)for(F=r/q,-q>r&&(r=-q-Math.pow(-r-q,.8),y.length>0&&(A=!0)),D=0;D<v.length;D++)"undefined"==typeof v[D]._buttonOffset&&(v[D]._buttonOffset=v[D].offsetLeft),E=v[D]._buttonOffset,G=n(v[D]),y.length>0&&G.hasClass("SwipeoutOverswipe")&&(G.css({left:(A?-E:0)+"px"}),A?G.addClass("swipeout-overswipe-active"):G.removeClass("swipeout-overswipe-active")),G.transform("translate3d("+(r-E*(1+Math.max(F,-1)))+"px,0,0)");if(m.length>0)for(F=r/p,r>p&&(r=p+Math.pow(r-p,.8),x.length>0&&(z=!0)),D=0;D<u.length;D++)"undefined"==typeof u[D]._buttonOffset&&(u[D]._buttonOffset=p-u[D].offsetLeft-u[D].offsetWidth),E=u[D]._buttonOffset,G=n(u[D]),x.length>0&&G.hasClass("SwipeoutOverswipe")&&(G.css({left:(z?E:0)+"px"}),z?G.addClass("swipeout-overswipe-active"):G.removeClass("swipeout-overswipe-active")),u.length>1&&G.css("z-index",u.length-D),G.transform("translate3d("+(r+E*(1-Math.min(F,1)))+"px,0,0)");j.transform("translate3d("+r+"px,0,0)")}}function F(a){if(!b||!c)return b=!1,void(c=!1);b=!1,c=!1;var e,k,o,t,x,y,d=(new Date).getTime()-f;if(y="toLeft"===w?C:B,o="toLeft"===w?l:m,k="toLeft"===w?q:p,e=300>d&&(-10>g&&"toLeft"===w||g>10&&"toRight"===w)||d>=300&&Math.abs(r)>k/2?"open":"close",300>d&&(0===Math.abs(r)&&(e="close"),Math.abs(r)===k&&(e="open")),"open"===e){i.swipeoutOpenedEl=h,h.trigger("open"),h.addClass("SwipeoutOpened transitioning");var D="toLeft"===w?-k:k;if(j.transform("translate3d("+D+"px,0,0)"),o.addClass("SwipeoutActionsOpened"),t="toLeft"===w?v:u)for(x=0;x<t.length;x++)n(t[x]).transform("translate3d("+D+"px,0,0)");A&&l.find(".SwipeoutOverswipe")[0].click(),z&&m.find(".SwipeoutOverswipe")[0].click()}else h.trigger("close"),i.swipeoutOpenedEl=void 0,h.addClass("transitioning").removeClass("SwipeoutOpened"),j.transform(""),o.removeClass("SwipeoutActionsOpened");
var E;if(u&&u.length>0&&u!==t)for(x=0;x<u.length;x++)E=u[x]._buttonOffset,"undefined"==typeof E&&(u[x]._buttonOffset=p-u[x].offsetLeft-u[x].offsetWidth),n(u[x]).transform("translate3d("+E+"px,0,0)");if(v&&v.length>0&&v!==t)for(x=0;x<v.length;x++)E=v[x]._buttonOffset,"undefined"==typeof E&&(v[x]._buttonOffset=v[x].offsetLeft),n(v[x]).transform("translate3d("+-E+"px,0,0)");j.transitionEnd(function(a){s&&"open"===e||closed&&"close"===e||(h.trigger("open"===e?"opened":"closed"),s&&"close"===e&&(l.length>0&&v.transform(""),m.length>0&&u.transform("")))})}var b,c,d,f,g,h,j,l,m,p,q,r,s,t,u,v,w,x,y,z,A,B,C,e={};n(document).on("click",".SwipeoutClose",function(){i.swipeoutClose(n(this).parents(".SwipeoutOpened"))}),n(document).on("click",".SwipeoutDelete",function(){var a=n(this),b=a.dataset();if(b.confirm){var c=b.confirm,d=b.confirmtitle;d?kelat.confirm(c,d,function(){i.swipeoutDelete(a.parents(".Swipeout"))},function(){b.closeOnCancel&&i.swipeoutClose(a.parents(".Swipeout"))}):kelat.confirm(c,function(){i.swipeoutDelete(a.parents(".Swipeout"))},function(){b.closeOnCancel&&i.swipeoutClose(a.parents(".Swipeout"))})}else i.swipeoutDelete(a.parents(".Swipeout"))}),n(document).on(o.touchEvents.start,function(a){if(i.swipeoutOpenedEl){var b=n(a.target);i.swipeoutOpenedEl.is(b[0])||b.parents(".Swipeout").is(i.swipeoutOpenedEl)||b.hasClass("ModalIn")||b.hasClass("ModalBlank")||b.hasClass("ActionsModal")||b.parents(".ActionsModal.ModalIn, .ModalBox.ModalIn").length>0||i.swipeoutClose(i.swipeoutOpenedEl)}}),a?(n(a).on(o.touchEvents.start,D),n(a).on(o.touchEvents.move,E),n(a).on(o.touchEvents.end,F)):(n(document).on(o.touchEvents.start,".ListBlock li.Swipeout",D),n(document).on(o.touchEvents.move,".ListBlock li.Swipeout",E),n(document).on(o.touchEvents.end,".ListBlock li.Swipeout",F))},i.swipeoutOpen=function(a,b,c){if(a=n(a),2===arguments.length&&"function"==typeof arguments[1]&&(c=b),0!==a.length&&(a.length>1&&(a=n(a[0])),a.hasClass("Swipeout")&&!a.hasClass("SwipeoutOpened"))){b||(b=a.find(".SwipeoutActionsRight").length>0?"right":"left");var d=a.find(".swipeout-actions-"+b);if(0!==d.length){d.hasClass("swipeout-actions-no-fold")||k.swipeoutActionsNoFold;a.trigger("open").addClass("SwipeoutOpened").removeClass("transitioning"),d.addClass("SwipeoutActionsOpened");var j,f=d.children(".SwipeoutItem"),g=d.outerWidth(),h="right"===b?-g:g;if(f.length>1){for(j=0;j<f.length;j++)"right"===b?n(f[j]).transform("translate3d("+-f[j].offsetLeft+"px,0,0)"):n(f[j]).css("z-index",f.length-j).transform("translate3d("+(g-f[j].offsetWidth-f[j].offsetLeft)+"px,0,0)");f[1].clientLeft}for(a.addClass("transitioning"),j=0;j<f.length;j++)n(f[j]).transform("translate3d("+h+"px,0,0)");a.find(".SwipeoutCon").transform("translate3d("+h+"px,0,0)").transitionEnd(function(){a.trigger("opened"),c&&c.call(a[0])}),i.swipeoutOpenedEl=a}}},i.swipeoutClose=function(a,b){function j(){i.allowSwipeout=!0,a.hasClass("SwipeoutOpened")||(a.removeClass("transitioning"),f.transform(""),a.trigger("closed"),b&&b.call(a[0]),h&&clearTimeout(h))}if(a=n(a),0!==a.length&&a.hasClass("SwipeoutOpened")){var c=a.find(".SwipeoutActionsOpened").hasClass("SwipeoutActionsRight")?"right":"left",d=a.find(".SwipeoutActionsOpened").removeClass("SwipeoutActionsOpened"),f=(d.hasClass("swipeout-actions-no-fold")||k.swipeoutActionsNoFold,d.children(".SwipeoutItem")),g=d.outerWidth();i.allowSwipeout=!1,a.trigger("close"),a.removeClass("SwipeoutOpened").addClass("transitioning");var h;a.find(".SwipeoutCon").transform("").transitionEnd(j),h=setTimeout(j,500);for(var l=0;l<f.length;l++)"right"===c?n(f[l]).transform("translate3d("+-f[l].offsetLeft+"px,0,0)"):n(f[l]).transform("translate3d("+(g-f[l].offsetWidth-f[l].offsetLeft)+"px,0,0)"),n(f[l]).css({left:"0px"}).removeClass("swipeout-overswipe-active");i.swipeoutOpenedEl&&i.swipeoutOpenedEl[0]===a[0]&&(i.swipeoutOpenedEl=void 0)}},i.swipeoutDelete=function(a,b){if(a=n(a),0!==a.length){a.length>1&&(a=n(a[0])),i.swipeoutOpenedEl=void 0,a.trigger("delete"),a.css({height:a.outerHeight()+"px"});a[0].clientLeft;a.css({height:"0px"}).addClass("Deleting transitioning").transitionEnd(function(){a.trigger("deleted"),b&&b.call(a[0]),a.remove()});var d="-100%";a.find(".SwipeoutCon").transform("translate3d("+d+",0,0)")}},a.kelat.initSwipeout=i.initSwipeout,a.kelat.swipeoutOpen=i.swipeoutOpen,a.kelat.swipeoutClose=i.swipeoutClose,i.sortableToggle=function(a){return a=n(a),0===a.length&&(a=n(".ListBlock.Sortable")),a.toggleClass("SortableOpened"),a.hasClass("SortableOpened")?a.trigger("open"):a.trigger("close"),a},i.sortableOpen=function(a){return a=n(a),0===a.length&&(a=n(".ListBlock.Sortable")),a.addClass("SortableOpened"),a.trigger("open"),a},i.sortableClose=function(a){return a=n(a),0===a.length&&(a=n(".ListBlock.Sortable")),a.removeClass("SortableOpened"),a.trigger("close"),a},i.initSortable=function(){function q(d){b=!1,a=!0,c="touchstart"===d.type?d.targetTouches[0].pageY:d.pageY,e=n(this).parent(),g=e.parent().find("li"),p=e.parents(".sortable"),d.preventDefault(),i.allowSwipeout=!1}function r(i){if(a&&e){var o=("touchmove"===i.type?i.targetTouches[0].pageX:i.pageX,"touchmove"===i.type?i.targetTouches[0].pageY:i.pageY);b||(e.addClass("sorting"),p.addClass("sortable-sorting"),h=e[0].offsetTop,j=e.parent().height()-e[0].offsetTop-e.height(),f=e[0].offsetHeight),b=!0,i.preventDefault(),d=o-c;var q=d;-h>q&&(q=-h),q>j&&(q=j),e.transform("translate3d(0,"+q+"px,0)"),m=l=void 0,g.each(function(){var a=n(this);if(a[0]!==e[0]){var b=a[0].offsetTop,c=a.height(),d=e[0].offsetTop+q;d>=b-c/2&&e.index()<a.index()?(a.transform("translate3d(0, "+-f+"px,0)"),l=a,m=void 0):b+c/2>=d&&e.index()>a.index()?(a.transform("translate3d(0, "+f+"px,0)"),l=void 0,m||(m=a)):n(this).transform("translate3d(0, 0%,0)")}})}}function s(c){if(i.allowSwipeout=!0,!a||!b)return a=!1,void(b=!1);c.preventDefault(),g.transform(""),e.removeClass("sorting"),p.removeClass("sortable-sorting");l&&(e.insertAfter(l),e.trigger("sort")),m&&(e.insertBefore(m),e.trigger("sort")),l=m=void 0,a=!1,b=!1}var a,b,c,d,e,f,g,h,j,l,m,p;n(document).on("click",".ToggleSortable,.CloseSortable,.OpenSortable",function(){var a=n(this),b=a.dataset();a.hasClass("ToggleSortable")&&i.sortableToggle(b.sortable),a.hasClass("OpenSortable")&&i.sortableOpen(b.sortable),a.hasClass("CloseSortable")&&i.sortableClose(b.sortable)}),n(document).on(o.touchEvents.start,".ListBlock.Sortable .SortableHandler",q),k.support.touch?(n(document).on(o.touchEvents.move,".ListBlock.Sortable .SortableHandler",r),n(document).on(o.touchEvents.end,".ListBlock.Sortable .SortableHandler",s)):(n(document).on(o.touchEvents.move,r),n(document).on(o.touchEvents.end,s))},a.kelat.initSortable=i.initSortable,a.kelat.sortableOpen=i.sortableOpen,a.kelat.sortableClose=i.sortableClose,i.isAccordion=!0,i.accordionToggle=function(a){a=n(a),0!==a.length&&(a.hasClass("AccordionItemExpanded")?i.accordionClose(a):i.accordionOpen(a))},i.accordionOpen=function(a){a=n(a);var b=a.parents(".AccordionList").eq(0),c=a.children(".AccordionItemCon");0===c.length&&(c=a.find(".AccordionItemCon"));var d=b.length>0&&a.parent().children(".AccordionItemExpanded");d.length>0&&i.accordionClose(d),c.css("height",c[0].scrollHeight+"px").transitionEnd(function(){if(a.hasClass("AccordionItemExpanded")){c.transition(0),c.css("height","auto");c[0].clientLeft;c.transition(""),a.trigger("opened")}else c.css("height",""),a.trigger("closed");i.isAccordion=!0}),a.trigger("open"),a.addClass("AccordionItemExpanded")},i.accordionClose=function(a){a=n(a);var b=a.children(".AccordionItemCon");0===b.length&&(b=a.find(".AccordionItemCon")),a.removeClass("AccordionItemExpanded"),b.transition(0),b.css("height",b[0].scrollHeight+"px");b[0].clientLeft;b.transition(""),b.css("height","").transitionEnd(function(){if(a.hasClass("AccordionItemExpanded")){b.transition(0),b.css("height","auto");b[0].clientLeft;b.transition(""),a.trigger("opened")}else b.css("height",""),a.trigger("closed");i.isAccordion=!0}),a.trigger("close")},i.initAccordion=function(){n(document).on("click",".AccordionItemToggle,.ItemLink,.AccordionItem",function(){if(i.isAccordion){var a=n(this),b=a.parent(".AccordionItem");0===b.length&&(b=a.parents(".AccordionItem")),0===b.length&&(b=a.parents("li")),a.hasClass("ItemLink")&&a.parent().hasClass("AccordionItem")&&(i.accordionToggle(b),i.isAccordion=!1)}})},a.kelat.initAccordion=i.initAccordion,a.kelat.accordionOpen=i.accordionOpen,a.kelat.accordionClose=i.accordionClose,a.kelat.accordionToggle=i.accordionToggle,i.materialTabbarSetHighlight=function(a,b){a=n(a),b=b||a.find(".TabLink.active");var c,d;a.hasClass("TabBarScrollable")?(c=b[0].offsetWidth+"px",d=(o.rtl?-b[0].offsetLeft:b[0].offsetLeft)+"px"):(c=1/a.find(".TabLink").length*100+"%",d=100*(o.rtl?-b.index():b.index())+"%"),a.find(".TabLinkHighlight").css({width:c}).transform("translate3d("+d+",0,0)")},i.initPageMaterialTabbar=function(b){function d(){i.materialTabbarSetHighlight(c)}b=n(b);var c=n(b).find(".TabBar");c.length>0&&(0===c.find(".TabLinkHighlight").length&&c.find(".ToolBarInner").append('<span class="TabLinkHighlight"></span>'),d(),n(a).on("resize",d),b.once("pageBeforeRemove",function(){$(a).off("resize",d)}))},i.showTab=function(a,b,c){var d=n(a);if(2===arguments.length&&"boolean"==typeof b&&(c=b),0===d.length)return!1;if(d.hasClass("active"))return c&&d.trigger("show"),!1;var e=d.parent(".Tabs");if(0===e.length)return!1;i.allowSwipeout=!0;var f=e.parent().hasClass("TabsAnimatedWrap");if(f){var g=100*(o.rtl?d.index():-d.index());e.transform("translate3d("+g+"%,0,0)")}var h=e.children(".Tab.active").removeClass("active");if(d.addClass("active"),d.trigger("show"),!f&&d.find(".NavBar").length>0){var j;j=d.hasClass(app.params.viewClass)?d[0]:d.parents("."+app.params.viewClass)[0],i.SizeNavbars(j)}if(b?b=n(b):(b=n("string"==typeof a?'.tab-link[href="'+a+'"]':'.tab-link[href="#'+d.attr("id")+'"]'),(!b||b&&0===b.length)&&n("[data-tab]").each(function(){d.is(n(this).attr("data-tab"))&&(b=n(this))})),0!==b.length){var k;if(h&&h.length>0){var l=h.attr("id");l&&(k=n('.TabLink[href="#'+l+'"]')),(!k||k&&0===k.length)&&n("[data-tab]").each(function(){h.is(n(this).attr("data-tab"))&&(k=n(this))})}if(b&&b.length>0){b.addClass("active");var m=b.parents(".TabBar");m.length>0&&(0===m.find(".TabLinkHighlight").length&&m.find(".ToolBarInner").append('<span class="TabLinkHighlight"></span>'),i.materialTabbarSetHighlight(m,b))}return k&&k.length>0&&k.removeClass("active"),!0}},i.initTab=function(a,b,c){n(document).on("click",".TabLink",function(){var a=n(this),b=a.dataset();i.showTab(b.tab||a.attr("href"),a)}),i.initPageMaterialTabbar(n(document.getElementById(k.WrapperArea)))},a.kelat.tabs=i.initTab,a.kelat.showTab=i.showTab,i.NumberBox=function(){var a=".NumBoxPlus",b=".NumBoxMinus",c="disabled",d=function(d){null===d.value||""===d.value||isNaN(d.value)?d.input.val(d.min||0):(null!=d.max&&!isNaN(d.max)&&d.value>=parseInt(d.max)?(d.value=d.max,d.parent.find(a).addClass(c)):d.parent.find(a).removeClass(c),null!=d.min&&!isNaN(d.min)&&d.value<=parseInt(d.min)?(d.value=d.min,d.parent.find(b).addClass(c)):d.parent.find(b).removeClass(c),d.input.val(d.value))};return n(document).on(k.support.onClick,a+","+b,function(){var k,c=n(this),e=c.parent(".NumBox"),f=e.find(".NumBoxInput"),g=parseInt(e[0].getAttribute("data-step")||1),i=e[0].getAttribute("data-min")?parseInt(e[0].getAttribute("data-min")):"",j=e[0].getAttribute("data-max")?parseInt(e[0].getAttribute("data-max")):"";c.is(a)?k=parseInt(f.val())+g:c.is(b)&&(k=parseInt(f.val())-g),h?d({value:k,min:i,max:j,parent:e,input:f}):""}),this},a.kelat.numberBox=i.NumberBox,i.Progressbar=function(b,c){if(b=n(b||"body"),0!==b.length&&h){var d;return b.hasClass("ProgressBar")?d=b:(d=b.children(".ProgressBar:not(.ProgressBarOut)"),0===d.length&&(d=n('<span class="ProgressBar ProgressBarIn"></span>'),b.append(d))),a.setTimeout(function(){d.remove()},c?c:2e3),d[0]}},a.kelat.progressbar=i.Progressbar,i.Ripple=function(){return n(document).on(k.support.onClick,".InkRipple",function(a){if(h){var b=n(this),c=+new Date,d=Math.max(b.outerWidth(),b.outerHeight()),e=(k.support.touch?a.targetTouches[0].pageX:a.pageX)-b.offset().left-d/2,f=(k.support.touch?a.targetTouches[0].pageY:a.pageY)-b.offset().top-d/2;b.prepend('<span class="ink" id="ink'+c+'" style="top:'+f+"px;left:"+e+"px;height:"+d+"px;width:"+d+'px"></span>');var g=n("#ink"+c);g.addClass("RippleAnimate").animationEnd(function(){g.remove()})}})},i.FloatButton=function(a){var b=n(a);return b.hasClass("FloatingButton")&&b.parent().hasClass("SpeedDial")&&b.on(k.support.onClick,function(a){a.preventDefault(),n(this).parent(".SpeedDial").toggleClass("SpeedDialOpened")}),this},a.kelat.floatButton=i.FloatButton,a.kelat.extend({imgReady:function(){var a=[],b=null,c=function(){for(var b=0;b<a.length;b++)a[b].end?a.splice(b--,1):a[b]();!a.length&&d()},d=function(){clearInterval(b),b=null};return function(d,e,f,g){var h,i,j,k,l,m=new Image;return m.src=d,m.complete?(e.call(m),void(f&&f.call(m))):(i=m.width,j=m.height,m.onerror=function(){g&&g.call(m),h.end=!0,m=m.onload=m.onerror=null},h=function(){k=m.width,l=m.height,(k!==i||l!==j||k*l>1024)&&(e.call(m),h.end=!0)},h(),m.onload=function(){!h.end&&h(),f&&f.call(m),m=m.onload=m.onerror=null},void(h.end||(a.push(h),null===b&&(b=setInterval(c,40)))))}}(),imgRender:function(a,b){var c=new Image;c.src=a.path,kelat.imgReady(a.path,function(){},function(){var c=this,d=c.width,e=c.height,f=d/e;d=a.width||100,e=d/f;var g=document.createElement("canvas"),h=g.getContext("2d");g.style.width=d,g.style.height=e,h.drawImage(c,0,0,d,e),b(g.toDataURL())},function(){kelat.alert(k.ImgTips)})}});var r=!0;return i.initImagesLazyLoad=function(b){function h(a){function d(){a.removeClass("Lazy").addClass("LazyLoaded"),b?a.css("background-image","url("+c+")"):a.attr("src",c),k.ImgLazyLoadSequential&&(g=!1,f.length>0&&h(f.shift()))}a=n(a);var b=a.attr("data-background"),c=b?b:a.attr("data-src");if(c){if(k.ImgLazyLoadSequential&&g)return void(f.indexOf(a[0])<0&&f.push(a[0]));g=!0;var e=new Image;e.onload=d,e.onerror=d,e.src=c}}function i(){d=c.find(".Lazy"),0===d?(r=!1,m()):(r=!0,l(),d.each(function(a,b){b=n(b),j(b[0])&&h(b)}))}function j(b){var c=b.getBoundingClientRect(),d=k.ImgLazyLoadThreshold||0;return c.top>=0-d&&c.left>=0-d&&c.top<=a.innerHeight+d&&c.left<=a.innerWidth+d}function l(b){var e=b?"off":"on";d[e]("lazy",i),c[e]("lazy",i),n(a)[e]("scroll",i),n(a)[e]("resize",i)}function m(){l(!0)}var d,c=n("#"+k.WrapperArea);if(c.hasClass("Lazy")?(d=c,c=d.parents("#"+k.WrapperArea)):d=c.find(".Lazy"),0!==d.length){var e=k.ImgPlaceholder;"string"==typeof b&&(e=b),b!==!1&&d.each(function(){n(this).attr("data-src")&&n(this).attr("src",e)});var f=[],g=!1;l(),i()}},a.kelat.imagesLazyLoad=i.initImagesLazyLoad,a.kelat.init=function(){i.Ripple&&i.Ripple(),i.BackToTop&&i.BackToTop()}(),"function"==typeof define&&define.amd&&define("kelat",function(){return a.kelat}),b||(a.kelat=a.$$=kelat),h||kelat.addNotify({title:k.ModalTitle,message:k.message}),a.kelat}});