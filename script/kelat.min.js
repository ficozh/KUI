!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("kelat requires window & document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e){return e.getAttribute&&e.getAttribute("class")||""}function o(e){var t="";if(0!==e)switch(e){case 1:t="zoomInDown";break;case 2:t="fadeInUpBig";break;case 3:t="zoomInLeft";break;case 4:t="rollIn";break;case 5:t="shake"}return t}var i="1.2.4",a={},r=a.toString,s=a.hasOwnProperty,l=!!(++[[]][+[]]+[]+[]>>>0),u={type:function(e){return null===e?e+"":"object"==typeof e||"function"==typeof e?a[r.call(e)]||"object":typeof e},isString:function(e){return"string"==typeof e},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},isWindow:function(e){return null!=e&&e===e.window}};u.isPlainObject=function(e){return"object"===u.type(e)&&!e.nodeType&&!u.isWindow(e)&&!(e.constructor&&!s.call(e.constructor.prototype,"isPrototypeOf"))},u.isFunction=function(e){return"function"===u.type(e)},u.Extend=function(){var e,t,n,o,i,a,r=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[s]||{},s++),"object"!=typeof r&&"function"!=typeof r&&(r={}),s===l&&(r=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=r[t],o=e[t],r!==o&&(c&&o&&(u.isPlainObject(o)||(i=u.isArray(o)))?(i?(i=!1,a=n&&u.isArray(n)?n:[]):a=n&&u.isPlainObject(n)?n:{},r[t]=u.Extend(c,a,o)):void 0!==o&&(r[t]=o));return r};var c={SYSTEM_LANGUAGE:{MODAL:{TIPS:"提示",OK:"确定",CANCEL:"取消"},IMG:{IMGTIPS:"图片格式不正确或者跨域请求！",IMGPlaceholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},LOADING:["正在加载..."]},WrapperArea:"WrapperArea",id:"zh-cn"};e.kelatlocale?e.kelatlocale=u.Extend(!0,c,e.kelatlocale):e.kelatlocale=c;var d={website:"http://git.oschina.net/ficozhe/K-UI",message:"您使用期已到！",ImgPlaceholder:kelatlocale.SYSTEM_LANGUAGE.IMG.IMGPlaceholder,ImgLazyLoadThreshold:0,ImgLazyLoadSequential:!0,ImgTips:kelatlocale.SYSTEM_LANGUAGE.IMG.IMGTIPS,WrapperArea:kelatlocale.WrapperArea,LayerIndex:"2000",LoadingTitle:kelatlocale.SYSTEM_LANGUAGE.LOADING,LoadingHtml:'<span class="Loading LoadingWhite"></span>',ModalTitle:kelatlocale.SYSTEM_LANGUAGE.MODAL.TIPS,ModalButtonOk:kelatlocale.SYSTEM_LANGUAGE.MODAL.OK,ModalButtonCancel:kelatlocale.SYSTEM_LANGUAGE.MODAL.CANCEL,isModalPopover:!1,swipeout:!0,swipeoutActionsNoFold:!1,swipeoutNoFollow:!1,screenSizes:{xs:480,sm:768,md:992,lg:1200},RegExpr:{rnotwhite:/\S+/g,rclass:/[\t\r\n\f]/g,trim:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,device:{android:/(Android);?[\s\/]+([\d.]+)?/,ipad:/(iPad).*OS\s([\d_]+)/,ipod:/(iPod)(.*OS\s([\d_]+))?/,iphone:/(iPhone\sOS)\s([\d_]+)/},validate:{email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,phone:/^((\(\d{3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}$/,mobile:/^1[34578]\d{9}$/,number:/^\d+$/,integer:/^[-\+]?\d+$/,english:/^[A-Za-z]+$/,chinese:/^[\u0391-\uFFE5]+$/,date:/^(\d{4})年(0\d{1}|1[0-2])月(0\d{1}|[12]\d{1}|3[01])日$/}},support:function(){var t=["mousedown","mousemove","mouseup"];e.navigator.pointerEnabled?t=["pointerdown","pointermove","pointerup"]:e.navigator.msPointerEnabled&&(t=["MSPointerDown","MSPointerMove","MSPointerUp"]);var n={};return n.touch=!!("ontouchstart"in e||e.DocumentTouch&&document instanceof DocumentTouch),n.rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,n.desktopEvents=t,n.onClick=n.touch?"tap":"click",n.GetPageScroll=function(){var t="",n="";return e.pageYOffset?(n=e.pageYOffset,t=e.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(n=document.documentElement.scrollTop,t=document.documentElement.scrollLeft):document.body&&(n=document.body.scrollTop,t=document.body.scrollLeft),{X:t,Y:n}},n.GetPageSize=function(){var t="",n="";e.innerHeight&&e.scrollMaxY?(t=e.innerWidth+e.scrollMaxX,n=e.innerHeight+e.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(t=document.body.scrollWidth,n=document.body.scrollHeight):document.body&&(t=document.body.offsetWidth,n=document.body.offsetHeight);var o="",i="";e.innerHeight?(o=e.innerWidth,i=e.innerHeight):document.documentElement&&document.documentElement.clientHeight?(o=document.documentElement.clientWidth,i=document.documentElement.clientHeight):document.body&&(o=document.body.clientWidth,i=document.body.clientHeight);var a=t<o?o:t,r=n<i?i:n;return{PageW:a,PageH:r,WinW:o,WinH:i}},n}()};if(function(){if(!e.isHello){var t="kelat.js "+i+" - ✰ KUI ✰ ",n="\n\n如有任何意见和建议可发送邮件至 ficozh@163.com\n\n",o="padding:5px 0",a="background:#0CF;"+o,r="background:#111;color:#FFF;"+o,s="background:#CFF;"+o,l="color:#000";if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var u=["%c %c "+t+" %c %c "+d.website+" %c %c "+n,a,r,a,s,a,l];e.console.log.apply(console,u)}else e.console&&e.console.log(t+d.website+n);e.isHello=!0}}(),!e.kelat){e.kelat=function(t,n){return new e.kelat.kelatDom(t,n)},e.kelat.version=i;var p=function(){var t=function(e){var t=this,n=0;for(n=0;n<e.length;n++)t[n]=e[n];return t.length=e.length,this},o=function(n,o){var i=[],a=0;if(n&&!o&&n instanceof t)return n;if(n)if("string"==typeof n){var r,s,l;if(n=l=n.replace(d.RegExpr.trim,""),l.indexOf("<")>=0&&l.indexOf(">")>=0){var u="div";for(0===l.indexOf("<li")&&(u="ul"),0===l.indexOf("<tr")&&(u="tbody"),0!==l.indexOf("<td")&&0!==l.indexOf("<th")||(u="tr"),0===l.indexOf("<tbody")&&(u="table"),0===l.indexOf("<option")&&(u="select"),s=document.createElement(u),s.innerHTML=l,a=0;a<s.childNodes.length;a++)i.push(s.childNodes[a])}else for(r=o||"#"!==n[0]||n.match(/[ .<>:~]/)?(o||document).querySelectorAll(n):[document.getElementById(n.split("#")[1])],a=0;a<r.length;a++)r[a]&&i.push(r[a])}else if(n.nodeType||n===e||n===document)i.push(n);else if(n.length>0&&n[0].nodeType)for(a=0;a<n.length;a++)i.push(n[a]);return new t(i)};t.prototype={addClass:function(e){var t,o,i,a,r,s,l,u=0;if("function"==typeof e)return this.each(function(t){f(this).addClass(e.call(this,t,n(this)))});if("string"==typeof e&&e)for(t=e.match(d.RegExpr.rnotwhite)||[];o=this[u++];)if(a=n(o),i=1===o.nodeType&&(" "+a+" ").replace(d.RegExpr.rclass," ")){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");l=i.replace(d.RegExpr.trim,""),a!==l&&o.setAttribute("class",l)}return this},removeClass:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)for(var o=0;o<this.length;o++)"undefined"!=typeof this[o].classList&&this[o].classList.remove(t[n]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)for(var o=0;o<this.length;o++)"undefined"!=typeof this[o].classList&&this[o].classList.toggle(t[n]);return this},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n++)if(2===arguments.length)this[n].setAttribute(e,t);else for(var o in e)this[n][o]=e[o],this[n].setAttribute(o,e[o]);return this},removeAttr:function(e){for(var t=0;t<this.length;t++)this[t].removeAttribute(e);return this},prop:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0][e]:void 0;for(var n=0;n<this.length;n++)if(2===arguments.length)this[n][e]=t;else for(var o in e)this[n][o]=e[o];return this},data:function(e,t){if("undefined"!=typeof t){for(var n=0;n<this.length;n++){var o=this[n];o.kelatDomElementDataStorage||(o.kelatDomElementDataStorage={}),o.kelatDomElementDataStorage[e]=t}return this}if(this[0]){if(this[0].kelatDomElementDataStorage&&e in this[0].kelatDomElementDataStorage)return this[0].kelatDomElementDataStorage[e];var i=this[0].getAttribute("data-"+e);return i?i:void 0}},removeData:function(e){for(var t=0;t<this.length;t++){var n=this[t];n.kelatDomElementDataStorage&&n.kelatDomElementDataStorage[e]&&(n.kelatDomElementDataStorage[e]=null,delete n.kelatDomElementDataStorage[e])}},dataset:function(){var e=this[0];if(e){var t={};if(e.dataset)for(var n in e.dataset)t[n]=e.dataset[n];else for(var i=0;i<e.attributes.length;i++){var a=e.attributes[i];a.name.indexOf("data-")>=0&&(t[o.toCamelCase(a.name.split("data-")[1])]=a.value)}for(var r in t)"false"===t[r]?t[r]=!1:"true"===t[r]?t[r]=!0:parseFloat(t[r])===1*t[r]&&(t[r]=1*t[r]);return t}},val:function(e){if("undefined"==typeof e)return this[0]?this[0].value:void 0;for(var t=0;t<this.length;t++)this[t].value=e;return this},transform:function(e){for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=e}return this},on:function(e,t,n,i){function a(e){var i=e.target;if(o(i).is(t))n.call(i,e);else for(var a=o(i).parents(),r=0;r<a.length;r++)o(a[r]).is(t)&&n.call(a[r],e)}var r,s,l=e.split(" ");for(r=0;r<this.length;r++)if("function"==typeof t||t===!1)for("function"==typeof t&&(n=arguments[1],i=arguments[2]||!1),s=0;s<l.length;s++)this[r].addEventListener(l[s],n,i);else for(s=0;s<l.length;s++)this[r].kelatDomLiveListeners||(this[r].kelatDomLiveListeners=[]),this[r].kelatDomLiveListeners.push({listener:n,liveListener:a}),this[r].addEventListener(l[s],a,i);return this},off:function(e,t,n,o){for(var i=e.split(" "),a=0;a<i.length;a++)for(var r=0;r<this.length;r++)if("function"==typeof t||t===!1)"function"==typeof t&&(n=arguments[1],o=arguments[2]||!1),this[r].removeEventListener(i[a],n,o);else if(this[r].kelatDomLiveListeners)for(var s=0;s<this[r].kelatDomLiveListeners.length;s++)this[r].kelatDomLiveListeners[s].listener===n&&this[r].removeEventListener(i[a],this[r].kelatDomLiveListeners[s].liveListener,o);return this},once:function(e,t,n,o){function i(r){n.call(r.target,r),a.off(e,t,i,o)}var a=this;return"function"==typeof t&&(n=arguments[1],o=arguments[2],t=!1),a.on(e,t,i,o)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},trigger:function(e,t){for(var n=e.split(" "),o=0;o<n.length;o++)for(var i=0;i<this.length;i++){var a;try{a=new CustomEvent(n[o],{detail:t,bubbles:!0,cancelable:!0})}catch(e){a=document.createEvent("Event"),a.initEvent(n[o],!0,!0),a.detail=t}this[i].dispatchEvent(a)}return this},transitionEnd:function(e){function t(a){if(a.target===this)for(e.call(this,a),n=0;n<o.length;n++)i.off(o[n],t)}var n,o=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i=this;if(e)for(n=0;n<o.length;n++)i.on(o[n],t);return this},animationEnd:function(e){function t(a){for(e(a),n=0;n<o.length;n++)i.off(o[n],t)}var n,o=["webkitAnimationEnd","OAnimationEnd","MSAnimationEnd","animationend"],i=this;if(e)for(n=0;n<o.length;n++)i.on(o[n],t);return this},width:function(){return this[0]===e?e.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},height:function(){return this[0]===e?e.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(this.length>0){var t=this[0],n=t.getBoundingClientRect(),o=document.body,i=t.clientTop||o.clientTop||0,a=t.clientLeft||o.clientLeft||0,r=e.pageYOffset||t.scrollTop,s=e.pageXOffset||t.scrollLeft;return{top:n.top+r-i,left:n.left+s-a}}return null},hide:function(){for(var e=0;e<this.length;e++)this[e].style.display="none";return this},show:function(){for(var e=0;e<this.length;e++)this[e].style.display="block";return this},styles:function(){return this[0]?e.getComputedStyle(this[0],null):void 0},css:function(t,n){var o;if(1===arguments.length){if("string"!=typeof t){for(o=0;o<this.length;o++)for(var i in t)this[o].style[i]=t[i];return this}if(this[0])return e.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"==typeof t){for(o=0;o<this.length;o++)this[o].style[t]=n;return this}return this},each:function(e){for(var t=0;t<this.length;t++)e.call(this[t],t,this[t]);return this},filter:function(e){for(var n=[],o=this,i=0;i<o.length;i++)e.call(o[i],i,o[i])&&n.push(o[i]);return new t(n)},html:function(e){if("undefined"==typeof e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t++)this[t].innerHTML=e;return this},text:function(e){if("undefined"==typeof e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t++)this[t].textContent=e;return this},is:function(n){if(!this[0]||"undefined"==typeof n)return!1;var i,a;if("string"==typeof n){var r=this[0];if(r===document)return n===document;if(r===e)return n===e;if(r.matches)return r.matches(n);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector)return r.mozMatchesSelector(n);if(r.msMatchesSelector)return r.msMatchesSelector(n);for(i=o(n),a=0;a<i.length;a++)if(i[a]===this[0])return!0;return!1}if(n===document)return this[0]===document;if(n===e)return this[0]===e;if(n.nodeType||n instanceof t){for(i=n.nodeType?[n]:n,a=0;a<i.length;a++)if(i[a]===this[0])return!0;return!1}return!1},indexOf:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t},index:function(){if(this[0]){for(var e=this[0],t=0;null!==(e=e.previousSibling);)1===e.nodeType&&t++;return t}},eq:function(e){if("undefined"==typeof e)return this;var n,o=this.length;return e>o-1?new t([]):e<0?(n=o+e,new t(n<0?[]:[this[n]])):new t([this[e]])},append:function(e){var n,o;for(n=0;n<this.length;n++)if("string"==typeof e){var i=document.createElement("div");for(i.innerHTML=e;i.firstChild;)this[n].appendChild(i.firstChild)}else if(e instanceof t)for(o=0;o<e.length;o++)this[n].appendChild(e[o]);else this[n].appendChild(e);return this},appendTo:function(e){return o(e).append(this),this},prepend:function(e){var n,o;for(n=0;n<this.length;n++)if("string"==typeof e){var i=document.createElement("div");for(i.innerHTML=e,o=i.childNodes.length-1;o>=0;o--)this[n].insertBefore(i.childNodes[o],this[n].childNodes[0])}else if(e instanceof t)for(o=0;o<e.length;o++)this[n].insertBefore(e[o],this[n].childNodes[0]);else this[n].insertBefore(e,this[n].childNodes[0]);return this},prependTo:function(e){return o(e).prepend(this),this},insertBefore:function(e){for(var t=o(e),n=0;n<this.length;n++)if(1===t.length)t[0].parentNode.insertBefore(this[n],t[0]);else if(t.length>1)for(var i=0;i<t.length;i++)t[i].parentNode.insertBefore(this[n].cloneNode(!0),t[i])},insertAfter:function(e){for(var t=o(e),n=0;n<this.length;n++)if(1===t.length)t[0].parentNode.insertBefore(this[n],t[0].nextSibling);else if(t.length>1)for(var i=0;i<t.length;i++)t[i].parentNode.insertBefore(this[n].cloneNode(!0),t[i].nextSibling)},next:function(e){return new t(this.length>0?e?this[0].nextElementSibling&&o(this[0].nextElementSibling).is(e)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(e){var n=[],i=this[0];if(!i)return new t([]);for(;i.nextElementSibling;){var a=i.nextElementSibling;e?o(a).is(e)&&n.push(a):n.push(a),i=a}return new t(n)},prev:function(e){return new t(this.length>0?e?this[0].previousElementSibling&&o(this[0].previousElementSibling).is(e)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(e){var n=[],i=this[0];if(!i)return new t([]);for(;i.previousElementSibling;){var a=i.previousElementSibling;e?o(a).is(e)&&n.push(a):n.push(a),i=a}return new t(n)},siblings:function(e){return this.nextAll(e).add(this.prevAll(e))},parent:function(e){for(var t=[],n=0;n<this.length;n++)null!==this[n].parentNode&&(e?o(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return o(o.unique(t))},parents:function(e){for(var t=[],n=0;n<this.length;n++)for(var i=this[n].parentNode;i;)e?o(i).is(e)&&t.push(i):t.push(i),i=i.parentNode;return o(o.unique(t))},closest:function(e){var n=this;return"undefined"==typeof e?new t([]):(n.is(e)||(n=n.parents(e).eq(0)),n)},find:function(e){for(var n=[],o=0;o<this.length;o++)for(var i=this[o].querySelectorAll(e),a=0;a<i.length;a++)n.push(i[a]);return new t(n)},children:function(e){for(var n=[],i=0;i<this.length;i++)for(var a=this[i].childNodes,r=0;r<a.length;r++)e?1===a[r].nodeType&&o(a[r]).is(e)&&n.push(a[r]):1===a[r].nodeType&&n.push(a[r]);return new t(o.unique(n))},remove:function(){for(var e=0;e<this.length;e++)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},detach:function(){return this.remove()},add:function(){var e,t,n=this;for(e=0;e<arguments.length;e++){var i=o(arguments[e]);for(t=0;t<i.length;t++)n[n.length]=i[t],n.length++}return n},ready:function(t){function n(){document.removeEventListener("DOMContentLoaded",n),e.removeEventListener("load",n),o||(o=!0,t&&t())}var o=!1;"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e.setTimeout(n):(document.addEventListener("DOMContentLoaded",n),e.addEventListener("load",n))},trim:function(e){return"string"==typeof e&&l?e.replace(d.RegExpr.trim,""):""},empty:function(){for(var e=0;e<this.length;e++){var t=this[e];if(1===t.nodeType){for(var n=0;n<t.childNodes.length;n++)t.childNodes[n].parentNode&&t.childNodes[n].parentNode.removeChild(t.childNodes[n]);t.textContent=""}}return this}},function(){function e(e){t.prototype[e]=function(t,n,a){var r;if("undefined"==typeof t){for(r=0;r<this.length;r++)i.indexOf(e)<0&&(e in this[r]?this[r][e]():o(this[r]).trigger(e));return this}return this.on(e,t,n,a)}}for(var n="click blur focus focusin focusout keyup keydown keypress submit change mousedown mousemove mouseup mouseenter mouseleave mouseout mouseover touchstart touchend touchmove resize scroll".split(" "),i="resize scroll".split(" "),a=0;a<n.length;a++)e(n[a])}();var i={};o.ajaxSetup=function(e){e.type&&(e.method=e.type),o.each(e,function(e,t){i[e]=t})};var a=0;return o.ajax=function(t){function n(e,n,a){var r=arguments;e&&o(document).trigger(e,n),a&&(a in i&&i[a](r[3],r[4],r[5],r[6]),t[a]&&t[a](r[3],r[4],r[5],r[6]))}var r={method:"GET",data:!1,async:!0,cache:!0,processData:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},s=["beforeSend","error","complete","success","statusCode"];t.type&&(t.method=t.type),o.each(i,function(e,t){s.indexOf(e)<0&&(r[e]=t)}),o.each(r,function(e,n){e in t||(t[e]=n)}),t.url||(t.url=e.location.toString());var l=t.url.indexOf("?")>=0?"&":"?",u=t.method.toUpperCase();if(("GET"===u||"HEAD"===u||"OPTIONS"===u||"DELETE"===u)&&t.data){var c;c="string"==typeof t.data?t.data.indexOf("?")>=0?t.data.split("?")[1]:t.data:o.serializeObject(t.data),c.length&&(t.url+=l+c,"?"===l&&(l="&"))}if("json"===t.dataType&&t.url.indexOf("callback=")>=0){var d,p="kelat_jsonp_"+Date.now()+a++,f=t.url.split("callback="),h=f[0]+"callback="+p;if(f[1].indexOf("&")>=0){var g=f[1].split("&").filter(function(e){return e.indexOf("=")>0}).join("&");g.length>0&&(h+="&"+g)}var m=document.createElement("script");return m.type="text/javascript",m.onerror=function(){clearTimeout(d),n(void 0,void 0,"error",null,"scripterror")},m.src=h,e[p]=function(t){clearTimeout(d),n(void 0,void 0,"success",t),m.parentNode.removeChild(m),m=null,delete e[p]},document.querySelector("head").appendChild(m),void(t.timeout>0&&(d=setTimeout(function(){m.parentNode.removeChild(m),m=null,n(void 0,void 0,"error",null,"timeout")},t.timeout)))}"GET"!==u&&"HEAD"!==u&&"OPTIONS"!==u&&"DELETE"!==u||t.cache===!1&&(t.url+=l+"_nocache="+Date.now());var v=new XMLHttpRequest;v.requestUrl=t.url,v.requestParameters=t,v.open(u,t.url,t.async,t.user,t.password);var C=null;if(("POST"===u||"PUT"===u||"PATCH"===u)&&t.data)if(t.processData){var y=[ArrayBuffer,Blob,Document,FormData];if(y.indexOf(t.data.constructor)>=0)C=t.data;else{var b="---------------------------"+Date.now().toString(16);"multipart/form-data"===t.contentType?v.setRequestHeader("Content-Type","multipart/form-data; boundary="+b):v.setRequestHeader("Content-Type",t.contentType),C="";var k=o.serializeObject(t.data);if("multipart/form-data"===t.contentType){b="---------------------------"+Date.now().toString(16),k=k.split("&");for(var T=[],w=0;w<k.length;w++)T.push('Content-Disposition: form-data; name="'+k[w].split("=")[0]+'"\r\n\r\n'+k[w].split("=")[1]+"\r\n");C="--"+b+"\r\n"+T.join("--"+b+"\r\n")+"--"+b+"--\r\n"}else C="application/x-www-form-urlencoded"===t.contentType?k:k.replace(/&/g,"\r\n")}}else C=t.data;t.headers&&o.each(t.headers,function(e,t){v.setRequestHeader(e,t)}),"undefined"==typeof t.crossDomain&&(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&RegExp.$2!==e.location.host),t.crossDomain||v.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.xhrFields&&o.each(t.xhrFields,function(e,t){v[e]=t});var x;return v.onload=function(e){if(x&&clearTimeout(x),v.status>=200&&v.status<300||0===v.status){var o;if("json"===t.dataType)try{o=JSON.parse(v.responseText),n("ajaxSuccess",{xhr:v},"success",o,v.status,v)}catch(e){n("ajaxError",{xhr:v,parseerror:!0},"error",v,"parseerror")}else o="text"===v.responseType||""===v.responseType?v.responseText:v.response,n("ajaxSuccess",{xhr:v},"success",o,v.status,v)}else n("ajaxError",{xhr:v},"error",v,v.status);t.statusCode&&(i.statusCode&&i.statusCode[v.status]&&i.statusCode[v.status](v),t.statusCode[v.status]&&t.statusCode[v.status](v)),n("ajaxComplete",{xhr:v},"complete",v,v.status)},v.onerror=function(e){x&&clearTimeout(x),n("ajaxError",{xhr:v},"error",v,v.status)},n("ajaxStart",{xhr:v},"start",v),n(void 0,void 0,"beforeSend",v),v.send(C),t.timeout>0&&(v.onabort=function(){x&&clearTimeout(x)},x=setTimeout(function(){v.abort(),n("ajaxError",{xhr:v,timeout:!0},"error",v,"timeout"),n("ajaxComplete",{xhr:v,timeout:!0},"complete",v,"timeout")},t.timeout)),v},function(){function e(e){o[e]=function(t,n,i){return o.ajax({url:t,method:"post"===e?"POST":"GET",data:"function"==typeof n?void 0:n,success:"function"==typeof n?n:i,dataType:"getJSON"===e?"json":void 0})}}for(var t="get post getJSON".split(" "),n=0;n<t.length;n++)e(t[n])}(),o.each=function(e,n){if("object"==typeof e&&n){var o,i;if(u.isArray(e)||e instanceof t)for(o=0;o<e.length;o++)n(o,e[o]);else for(i in e)e.hasOwnProperty(i)&&n(i,e[i])}},o.unique=function(e){for(var t=[],n=0;n<e.length;n++)t.indexOf(e[n])===-1&&t.push(e[n]);return t},o.serializeObject=o.param=function(e,t){function n(e){if(t.length>0){for(var n="",o=0;o<t.length;o++)n+=0===o?t[o]:"["+encodeURIComponent(t[o])+"]";return n+"["+encodeURIComponent(e)+"]"}return encodeURIComponent(e)}function i(e){return encodeURIComponent(e)}if("string"==typeof e)return e;var a=[],r="&";t=t||[];var s;for(var l in e)if(e.hasOwnProperty(l)){var c;if(u.isArray(e[l])){c=[];for(var d=0;d<e[l].length;d++)u.isArray(e[l][d])||"object"!=typeof e[l][d]?c.push(n(l)+"[]="+i(e[l][d])):(s=t.slice(),s.push(l),s.push(d+""),c.push(o.serializeObject(e[l][d],s)));c.length>0&&a.push(c.join(r))}else"object"==typeof e[l]?(s=t.slice(),s.push(l),c=o.serializeObject(e[l],s),""!==c&&a.push(c)):"undefined"!=typeof e[l]&&""!==e[l]&&a.push(n(l)+"="+i(e[l]))}return a.join(r)},o.toCamelCase=function(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})},o.dataset=function(e){return o(e).dataset()},o.getTranslate=function(t,n){var o,i,a,r;return"undefined"==typeof n&&(n="x"),a=e.getComputedStyle(t,null),e.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),r=new WebKitCSSMatrix("none"===i?"":i)):(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),o=r.toString().split(",")),"x"===n&&(i=e.WebKitCSSMatrix?r.m41:16===o.length?parseFloat(o[12]):parseFloat(o[4])),"y"===n&&(i=e.WebKitCSSMatrix?r.m42:16===o.length?parseFloat(o[13]):parseFloat(o[5])),i||0},o.requestAnimationFrame=function(t){return e.requestAnimationFrame?e.requestAnimationFrame(t):e.webkitRequestAnimationFrame?e.webkitRequestAnimationFrame(t):e.mozRequestAnimationFrame?e.mozRequestAnimationFrame(t):e.setTimeout(t,1e3/60)},o.cancelAnimationFrame=function(t){return e.cancelAnimationFrame?e.cancelAnimationFrame(t):e.webkitCancelAnimationFrame?e.webkitCancelAnimationFrame(t):e.mozCancelAnimationFrame?e.mozCancelAnimationFrame(t):e.clearTimeout(t)},o.fn=t.prototype,o.fn.scrollTo=function(e,t,n,i,a){return 4===arguments.length&&"function"==typeof i&&(a=i,i=void 0),this.each(function(){function r(e){void 0===e&&(e=+new Date),null===C&&(C=e);var t,u=Math.max(Math.min((e-C)/n,1),0),c="linear"===i?u:.5-Math.cos(u*Math.PI)/2;return m&&(f=s+c*(d-s)),v&&(h=l+c*(p-l)),m&&d>s&&f>=d&&(g.scrollTop=d,t=!0),m&&d<s&&f<=d&&(g.scrollTop=d,t=!0),v&&p>l&&h>=p&&(g.scrollLeft=p,t=!0),v&&p<l&&h<=p&&(g.scrollLeft=p,t=!0),t?void(a&&a()):(m&&(g.scrollTop=f),v&&(g.scrollLeft=h),void o.requestAnimationFrame(r))}var s,l,u,c,d,p,f,h,g=this,m=t>0||0===t,v=e>0||0===e;if("undefined"==typeof i&&(i="swing"),m&&(s=g.scrollTop,n||(g.scrollTop=t)),v&&(l=g.scrollLeft,n||(g.scrollLeft=e)),n){m&&(u=g.scrollHeight-g.offsetHeight,d=Math.max(Math.min(t,u),0)),v&&(c=g.scrollWidth-g.offsetWidth,p=Math.max(Math.min(e,c),0));var C=null;m&&d===s&&(m=!1),v&&p===l&&(v=!1),o.requestAnimationFrame(r)}})},o.fn.scrollTop=function(e,t,n,o){3===arguments.length&&"function"==typeof n&&(o=n,n=void 0);var i=this;return"undefined"==typeof e?i.length>0?i[0].scrollTop:null:i.scrollTo(void 0,e,t,n,o)},o.fn.scrollLeft=function(e,t,n,o){3===arguments.length&&"function"==typeof n&&(o=n,n=void 0);var i=this;return"undefined"==typeof e?i.length>0?i[0].scrollLeft:null:i.scrollTo(e,void 0,t,n,o)},o}();e.kelat.kelatDom=p;var f=p;e.kelat.fn=e.kelat.prototype={rtl:"rtl"===f("body").css("direction"),support:d.support,trim:function(e){return"string"==typeof e&&l?e.replace(d.RegExpr.trim,""):""},layerBorder:function(){return[].forEach.call(document.querySelectorAll("*"),function(e){e.style.outline="1px solid #"+(~~(Math.random()*(1<<24))).toString(16)})},jsonArray:function(e){return l?JSON.stringify(e):""},escapeHTML:function(e){var t={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return e.replace(/[<>&"]/g,function(e){return t[e]})},removeHTML:function(e){return e.replace(/<.*?>/gi,"")},removeString:function(e,t){var n=new RegExp(t,"ig");return e.replace(n,"")},throttle:function(e,t,n){var o,i=null;return function(){var a=this,r=arguments,s=+new Date;clearTimeout(i),o||(o=s),s-o>=n?(e.apply(a,r),o=s):i=setTimeout(function(){e.apply(a,r)},t)}},log:function(t,n){return l&&e.console?console.log(n||"warning",": ",t):""},range:function(e,t){return Math.floor(Math.random()*(e-t+1))+t},ls:e.localStorage,device:function(){var t={},n=navigator.userAgent,o=n.match(d.RegExpr.device.android),i=n.match(d.RegExpr.device.ipad),a=n.match(d.RegExpr.device.ipod),r=!i&&n.match(d.RegExpr.device.iphone);if(t.browse=t.ios=t.android=t.iphone=t.ipad=t.androidChrome=!1,o&&(t.os="android",t.osVersion=o[2],t.android=!0,t.androidChrome=n.toLowerCase().indexOf("chrome")>=0),(i||r||a)&&(t.os="ios",t.ios=!0),r&&!a&&(t.osVersion=r[2].replace(/_/g,"."),t.iphone=!0),i&&(t.osVersion=i[2].replace(/_/g,"."),t.ipad=!0),a&&(t.osVersion=a[3]?a[3].replace(/_/g,"."):null,t.iphone=!0),t.ios&&t.osVersion&&n.indexOf("Version/")>=0&&"10"===t.osVersion.split(".")[0]&&(t.osVersion=n.toLowerCase().split("version/")[1].split(" ")[0]),t.webView=(r||i||a)&&n.match(/.*AppleWebKit(?!.*Safari)/i),t.os&&"ios"===t.os){var s=t.osVersion.split(".");t.minimalUi=!t.webView&&(a||r)&&(1*s[0]===7?1*s[1]>=1:1*s[0]>7)&&f('meta[name="viewport"]').length>0&&f('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}f(document).ready(function(){var e=d.support.GetPageSize();t.statusBar=!1,t.webView&&e.WinW*e.WinH===screen.width*screen.height?t.statusBar=!0:t.statusBar=!1});var u=[];if(t.pixelRatio=e.devicePixelRatio||1,u.push("PixelRatio"+Math.floor(t.pixelRatio)),t.pixelRatio>=2&&u.push("Retina"),t.os&&(u.push(t.os,t.os+"-"+t.osVersion.split(".")[0],t.os+"-"+t.osVersion.replace(/\./g,"-")),"ios"===t.os))for(var c=parseInt(t.osVersion.split(".")[0],10),p=c-1;p>=6;p--)u.push("iosGt"+p);return t.statusBar?u.push("StatusbarOverlay"):f("html").removeClass("StatusbarOverlay"),u.length>0&&f("html").addClass(u.join(" ")),t.browse=n.indexOf("MSIE")>=0?"ie":n.indexOf("Firefox")>=0?"Firefox":n.indexOf("Chrome")>=0?"Chrome":n.indexOf("Edge")>=0?"Edge":n.indexOf("Opera")>=0?"Opera":n.indexOf("Safari")>=0?"Safari":n.indexOf("Netscape")>=0&&"Netscape",l?t:""}(),touchEvents:{start:d.support.touch?"touchstart":d.support.desktopEvents[0],move:d.support.touch?"touchmove":d.support.desktopEvents[1],end:d.support.touch?"touchend":d.support.desktopEvents[2]},touches:function(t,n,o,i){function a(t){var t=t||e.event||arguments.callee.caller.arguments[0];switch(t.preventDefault(),d.support.touch&&(u.touchLength=t.targetTouches.length||0),t.type){case h.touchEvents.start:s=!0,u.startX=Number("touchstart"===t.type?t.targetTouches[0].pageX:t.pageX),u.startY=Number("touchstart"===t.type?t.targetTouches[0].pageY:t.pageY),n(u,c);break;case h.touchEvents.end:s=!1,u.diffX=Number(u.currentX-u.startX),u.diffY=Number(u.currentY-u.startY),i(u,c);break;case h.touchEvents.move:if(!s)return;u.currentX=Number("touchmove"===t.type?t.targetTouches[0].pageX:t.pageX),u.currentY=Number("touchmove"===t.type?t.targetTouches[0].pageY:t.pageY),Number(u.currentX-u.startX)>0?(u.elsX=Number(u.currentX-u.startX-u.diffX),u.elsY=Number(u.currentY-u.startY-u.diffY)):(u.elsX=Number(u.currentX-u.startX+u.diffX),u.elsY=Number(u.currentY-u.startY+u.diffY)),o(u,c)}}var r=!1,s=!1,u={startX:0,startY:0,currentX:0,currentY:0,diffX:0,diffY:0,elsX:0,elsY:0},c=t,p=r?"off":"on";return c[p](h.touchEvents.start,a),c[p](h.touchEvents.move,a),c[p](h.touchEvents.end,a),l?u:""}};var h=e.kelat.fn;e.kelat.extend=f.extend=f.fn.extend=h.extend=u.Extend,e.kelat.extend({expando:"kelat"+(i+Math.random()).replace(/\D/g,""),noop:function(){},ajax:f.ajax,ajaxSetup:f.ajaxSetup,get:f.get,post:f.post,getJSON:f.getJSON,isString:u.isString,isFunction:u.isFunction,isNumber:u.isNumber,isArray:u.isArray,isWindow:u.isWindow,isPlainObject:u.isPlainObject,type:u.type,each:f.each}),function(e){var t={},n=function(){return!0},o=function(){return!1},i={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.click=t.mousedown=t.mouseup=t.mousemove="MouseEvents";var a=function(t,a){return!a&&t.isDefaultPrevented||(a||(a=t),e.each(i,function(e,i){var r=a[e];t[e]=function(){return this[i]=n,r&&r.apply(a,arguments)},t[i]=o}),(void 0!==a.defaultPrevented?a.defaultPrevented:"returnValue"in a?a.returnValue===!1:a.getPreventDefault&&a.getPreventDefault())&&(t.isDefaultPrevented=n)),t};e.fn.trigger=function(t,n){return t=kelat.isString(t)||kelat.isPlainObject(t)?e.Event(t):a(t),t._args=n,this.each(function(){t.type in focus&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var o,i;return this.each(function(a,r){o=createProxy(isString(t)?e.Event(t):t),o._args=n,o.target=r,e.each(findHandlers(r,t.type||t),function(e,t){if(i=t.proxy(o),o.isImmediatePropagationStopped())return!1})}),i},e.Event=function(e,n){kelat.isString(e)||(n=e,e=n.type);var o=document.createEvent(t[e]||"Events"),i=!0;if(n)for(var r in n)"bubbles"===r?i=!!n[r]:o[r]=n[r];return o.initEvent(e,i,!0),a(o)}}(f),function(t){function n(e,t,n,o){return Math.abs(e-t)>=Math.abs(n-o)?e-t>0?"Left":"Right":n-o>0?"Up":"Down";
}function o(){p=null,h.last&&(h.el.trigger("longTap"),h={})}function i(){p&&clearTimeout(p),p=null}function a(){l&&clearTimeout(l),u&&clearTimeout(u),c&&clearTimeout(c),p&&clearTimeout(p),l=u=c=p=null,h={}}function r(e){return("touch"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function s(e,t){return e.type==="pointer"+t||e.type==="mouse"+t||e.type.toLowerCase()==="mspointer"+t}var l,u,c,p,f,h={},g=750;t(document).ready(function(){var m,v,C,y,b,k=0,T=0;"MSGesture"in e&&(f=new MSGesture,f.target=document.body),t(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&"undefined"!=typeof h.el&&(h.el.trigger("swipe"),h.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(e){(y=s(e,"down"))&&!r(e)||(C=y?e:e.touches[0],e.touches&&1===e.touches.length&&h.x2&&(h.x2=void 0,h.y2=void 0),b=e.targetTouches,m=Date.now(),v=m-(h.last||m),h.el=t("tagName"in C.target?C.target:C.target.parentNode),l&&clearTimeout(l),h.x1=C.pageX,h.y1=C.pageY,v>0&&v<=250&&(h.isDoubleTap=!0),h.last=m,p=setTimeout(o,g),f&&y&&f.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(y=s(e,"move"))&&!r(e)||(C=y?e:e.touches[0],i(),h.x2=C.pageX,h.y2=C.pageY,k+=Math.abs(h.x1-h.x2),T+=Math.abs(h.y1-h.y2))}).on("touchend MSPointerUp pointerup",function(e){if((y=s(e,"up"))&&!r(e)){var o=t(e.target);return void(o&&!d.support.touch&&o.trigger("tap"))}i(),h.x2&&Math.abs(h.x1-h.x2)>30||h.y2&&Math.abs(h.y1-h.y2)>30?c=setTimeout(function(){"undefined"!=typeof h.el&&(h.el.trigger("swipe"),h.el.trigger("swipe"+n(h.x1,h.x2,h.y1,h.y2)),h={})},0):"last"in h&&(k<30&&T<30?u=setTimeout(function(){try{var e=t.Event("tap");e.cancelTouch=a,e.targetTouches=b,h.el.trigger(e),h.isDoubleTap?(h.el&&h.el.trigger("doubleTap"),h={}):l=setTimeout(function(){l=null,h.el&&h.el.trigger("singleTap"),h={}},250)}catch(e){return}},0):h={},k=T=0)}).on("touchcancel MSPointerCancel pointercancel",a),t(e).on("scroll",a)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return t?this.on(e,t):this.trigger(e)}})}(f),e.kelat.defaults={shift:0},kelat.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){a["[object "+t+"]"]=t.toLowerCase()}),u.Bubbles=function(t,n,o){var t=e.event||arguments.callee.caller.arguments[0],i=t.target||t.srcElement,a=[];return kelat.each(n.toUpperCase().split(" "),function(e,t){a.push(i.tagName!==t&&l?0:1)}),a.indexOf(1)===-1&&l?o():null},e.kelat.bubbles=u.Bubbles,u.Validate=function(e,t){var n="";return"regexp"===kelat.type(t)?(n=t,t=void 0):n=d.RegExpr.validate[t],!(!n.test(e)||!l)},e.kelat.validate=u.Validate,u.GetUrlParams=function(t){t=t||{};var n={},o=t.url?t.url:e.location.href,i=o.indexOf("?")+1,a=o.substring(i);if(0!==i)if(t.type){var r=a.indexOf(t.type[0])+t.type[0].length;n[t.type[1]]=a.substring(r)}else{a=a.replace(/\?/g,"&").replace(/[#/]/g,"");for(var s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");n[c[0]]=c[1]}}return l?n:null},e.kelat.getUrlParams=u.GetUrlParams,u.LoadJC=function(e,t,n){if("undefined"!=typeof e&&l){var o=document.getElementsByTagName("head")[0];if("js"===t){var i=document.createElement("script");i.src=e,i.type="text/javascript",o.appendChild(i),n&&(i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||n()})}else if("css"===t){var a=document.createElement("link");a.href=e,a.rel="stylesheet",a.type="text/css",o.appendChild(a)}}return this},e.kelat.loadJC=u.LoadJC,u.Glint=function(e){var t=f(e),n=["#DD7886","#FBC7BB","#F4E4C9","#DD7886","#FBC7BB","#F4E4C9","#FFF"],o=0,i=n.length;!function e(){i>++o?(t.css("background",n[o]),setTimeout(e,80)):o=0}()},e.kelat.glint=u.Glint,u.InitPullToRefresh=function(e){function t(e){if(s){if(!h.device.android)return;if("targetTouches"in e&&e.targetTouches.length>1)return}m=f(this),m.hasClass("Refresh")||(c=!1,T=!1,s=!0,d=void 0,y=void 0,"touchstart"===e.type&&(r=e.targetTouches[0].identifier),w.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,w.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,g=+new Date)}function n(e){if(s){var t,n,o;if("touchmove"===e.type){if(r&&e.touches)for(var i=0;i<e.touches.length;i++)e.touches[i].identifier===r&&(o=e.touches[i]);o||(o=e.targetTouches[0]),t=o.pageX,n=o.pageY}else t=e.pageX,n=e.pageY;if(t&&n){if("undefined"==typeof d&&(d=!!(d||Math.abs(n-w.y)>Math.abs(t-w.x))),!d)return void(s=!1);if(C=f("body").scrollTop(),"undefined"==typeof y&&0!==C&&(y=!0),!c){if(m.removeClass("transitioning"),C>m[0].offsetHeight)return void(s=!1);k&&(b=m.attr("data-distance"),b.indexOf("%")>=0&&(b=m[0].offsetHeight*parseInt(b,10)/100)),M=m.hasClass("Refresh")?b:0,S=m[0].scrollHeight===m[0].offsetHeight||!h.device.ios}return c=!0,p=n-w.y,p>0&&C<=0||C<0?(h.device.ios&&parseInt(h.device.osVersion.split(".")[0],10)>7&&0===C&&!y&&(S=!0),S&&(e.preventDefault(),v=Math.pow(p,.85)+M,m.transform("translate3d(0,"+v+"px,0)")),S&&Math.pow(p,.85)>b||!S&&p>=2*b?(x=!0,m.addClass("PullUp").removeClass("PullDown")):(x=!1,m.removeClass("PullUp").addClass("PullDown")),T||(m.trigger("pullstart"),T=!0),m.trigger("pullmove",{event:e,scrollTop:C,translate:v,touchesDiff:p}),void 0):(T=!1,m.removeClass("PullUp PullDown"),void(x=!1))}}}function o(e){if(!("touchend"===e.type&&e.changedTouches&&e.changedTouches.length>0&&r&&e.changedTouches[0].identifier!==r)){if(!s||!c)return s=!1,void(c=!1);v&&(m.addClass("transitioning"),v=0),m.transform(""),x?(m.addClass("Refresh"),m.trigger("refresh",{done:function(){u.PullToRefreshDone(m)}})):m.removeClass("PullDown"),s=!1,c=!1,T&&m.trigger("pullend")}}function i(){a.off(h.touchEvents.start,t),a.off(h.touchEvents.move,n),a.off(h.touchEvents.end,o)}var a=f(e);if(a.hasClass("PullToRefreshContent")||(a=a.find(".PullToRefreshContent")),a&&0!==a.length&&l){var r,s,c,d,p,g,m,v,C,y,b,k,T,w={},x=!1,S=!1,M=0,E=a.hasClass("Wrapper")?a:a.parents(".Wrapper"),O=!1;E.find(".NavBar").length>0&&(O=!0),O||a.addClass("PullToRefreshNoNavbar"),m=a,m.attr("data-distance")?k=!0:b=44,a.on(h.touchEvents.start,t),a.on(h.touchEvents.move,n),a.on(h.touchEvents.end,o),a[0].KLTDestroyPullToRefresh=i}},u.PullToRefreshDone=function(e){e=f(e),0===e.length&&(e=f(".PullToRefreshContent.Refresh")),e.removeClass("Refresh").addClass("transitioning"),e.transitionEnd(function(){e.removeClass("transitioning PullUp PullDown"),e.trigger("refreshdone")})},u.PullToRefreshTrigger=function(e){e=$(e),0===e.length&&(container=$(".PullToRefreshContent")),e.hasClass("Refresh")||(e.addClass("transitioning Refresh"),e.trigger("refresh",{done:function(){u.PullToRefreshDone(e)}}))},u.DestroyPullToRefresh=function(e){e=$(e);var t=e.hasClass("PullToRefreshContent")?e:e.find(".PullToRefreshContent");0!==t.length&&t[0].KLTDestroyPullToRefresh&&t[0].KLTDestroyPullToRefresh()},e.kelat.pullToRefreshDone=u.PullToRefreshDone,e.kelat.initPullToRefresh=u.InitPullToRefresh,e.kelat.pullToRefreshTrigger=u.PullToRefreshTrigger,e.kelat.destroyPullToRefresh=u.DestroyPullToRefresh,u.isInfiniteScroll=!0,u.scrollCurrent=0,u.HandleInfiniteScroll=function(){var e=f(".InfiniteScroll");if(u.isInfiniteScroll&&e.length>0){var t=e[0].offsetHeight,n=parseInt(e.attr("data-distance")),o=e.hasClass("InfiniteScrollTop");n||(n=50),"string"==typeof n&&n.indexOf("%")>=0&&(n=parseInt(n,10)/100*t),n>t&&(n=t);var i=d.support.GetPageScroll().Y,a=e.offset().top,r=d.support.GetPageSize().WinH;if(u.scrollCurrent>i)return;o?i<n&&e.trigger("infinite"):i+n+r-a>t&&(u.scrollCurrent=i,e.trigger("infinite"))}else u.isInfiniteScroll=!1,u.DetachInfiniteScroll()},u.AttachInfiniteScroll=function(){u.isInfiniteScroll=!0,f(e).on("scroll",u.HandleInfiniteScroll)},u.DetachInfiniteScroll=function(t){u.scrollCurrent=0,f(e).off("scroll",u.HandleInfiniteScroll)},u.InitInfiniteScroll=function(e,t){e&&(u.scrollCurrent=0,t(),u.AttachInfiniteScroll())},e.kelat.infiniteScroll=u.InitInfiniteScroll,e.kelat.detachInfiniteScroll=u.DetachInfiniteScroll,e.kelat.attachInfiniteScroll=u.AttachInfiniteScroll,u.Picker=function(t){function n(){var t=!1;return l.params.convertToPopover||l.params.onlyInPopover?(!l.inline&&l.params.input&&(l.params.onlyInPopover?t=!0:h.device.ios?t=!!h.device.ipad:f(e).width()>=768&&(t=!0)),t):t}function o(){return!!(l.opened&&l.container&&l.container.length>0&&l.container.parents(".ModalPopover").length>0)}function i(){if(l.opened)for(var e=0;e<l.cols.length;e++)l.cols[e].divider||(l.cols[e].calcSize(),l.cols[e].setValue(l.cols[e].value,0,!1))}function a(e){if(f("body").addClass("OVBody"),e.preventDefault(),l.isCreate||u.ShowModal(l.container),!l.opened&&(l.open(),l.params.scrollToInput&&!n()&&l.params.calculateHeight)){var t=l.input.parents("body");if(0===t.length)return;var o,i=parseInt(g.css("padding-top"),10),a=parseInt(g.css("padding-bottom"),10),r=t[0].offsetHeight-i-l.container.height(),s=t[0].scrollHeight-i-l.container.height(),c=l.input.offset().top-i+l.input[0].offsetHeight;if(c>r){var p=t.scrollTop()+c-r-d.support.GetPageScroll().Y;p+r>s&&(o=p+r-s+a,r===s&&(o=l.container.height()),g.css({"padding-bottom":o+"px"})),t.scrollTop(p,300)}}}function r(e){o()||(l.input&&l.input.length>0?e.target!==l.input[0]&&0===f(e.target).parents(".PickerModal").length&&l.close():0===f(e.target).parents(".PickerModal").length&&l.close())}function s(){l.opened=!1,l.input&&l.input.length>0&&g.css({"padding-bottom":""}),l.params.onClose&&l.params.onClose(l),l.container.find(".PickerItemsCol").each(function(){l.destroyPickerCol(this)})}var l=this,c={calculateHeight:!0,updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,rotateEffect:!1,isEfficient:!1,autoUpdate:!0,momentumRatio:7,freeMode:!1,closeByOutsideClick:!0,scrollToInput:!0,inputReadOnly:!0,convertToPopover:!0,onlyInPopover:!1,toolbar:!0,toolbarOkText:d.ModalButtonOk,toolbarCloseText:d.ModalButtonCancel,toolbarTemplate:'<div class="ToolBar RippleBox"><div class="ToolBarInner"><div class="Left"><a href="javascript:;" class="Link InkRipple ClosePicker">{{closeText}}</a></div><div class="Right"><a href="javascript:;" class="Link InkRipple OkPicker">{{okText}}</a></div></div></div>'};t=t||{};for(var p in c)"undefined"==typeof t[p]&&(t[p]=c[p]);l.params=t,l.cols=[],l.initialized=!1,l.isCreate=!0;var g=f(".WrapContent");l.inline=!!l.params.container;var m=h.device.ios||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!h.device.android;return l.setValue=function(e,t){var n=0;if(0===l.cols.length)return l.value=e,void l.updateValue(e);for(var o=0;o<l.cols.length;o++)l.cols[o]&&!l.cols[o].divider&&(l.cols[o].setValue(e[n],t),n++)},l.updateValue=function(e){for(var t=e||[],n=[],o=0;o<l.cols.length;o++)l.cols[o].divider||(t.push(l.cols[o].value),n.push(l.cols[o].displayValue));if(!(t.indexOf(void 0)>=0)&&(l.value=t,l.displayValue=n,l.params.onChange&&l.params.onChange(l,l.value,l.displayValue),l.input&&l.input.length>0)){var i="INPUT"===l.input[0].tagName?["val","change"]:["text",d.support.onClick],a=l.params.formatValue?l.params.formatValue(l,l.value,l.displayValue):l.value.join(" ");f(l.input)[i[0]](a),f(l.input).on(i[1])}},l.initPickerCol=function(e,t){function n(e,t){p.wrapper.transform("translate3d(0,"+e+"px,0)"),t&&p.wrapper.transition(0)}function o(){k=f.requestAnimationFrame(function(){p.updateItems(void 0,void 0,0),o()})}function i(e){w||T||(e.preventDefault(),T=!0,x=S="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,M=+new Date,D=!0,O=A=f.getTranslate(p.wrapper[0],"y"))}function a(e){if(T){e.preventDefault(),D=!1,S="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,w||(f.cancelAnimationFrame(k),w=!0,O=A=f.getTranslate(p.wrapper[0],"y"),p.wrapper.transition(0)),e.preventDefault();var t=S-x;A=O+t,I=void 0,A<y&&(A=y-Math.pow(y-A,.8),I="min"),A>b&&(A=b+Math.pow(A-b,.8),I="max"),n(A),p.updateItems(void 0,A,0,l.params.updateValuesOnTouchmove),P=A-L||A,B=+new Date,L=A}}function r(e){if(!T||!w)return void(T=w=!1);T=w=!1,p.wrapper.transition(""),I&&n("min"===I?y:b),E=+new Date;var t,i;E-M>300?i=A:(t=Math.abs(P/(E-B)),i=A+P*l.params.momentumRatio),i=Math.max(Math.min(i,b),y);var a=-Math.floor((i-b)/v);l.params.freeMode||(i=-a*v+b),n(parseInt(i,10)),p.updateItems(a,i,"",!0),l.params.updateValuesOnMomentum&&(o(),p.wrapper.transitionEnd(function(){f.cancelAnimationFrame(k)})),setTimeout(function(){D=!0},100)}function s(e){if(D){f.cancelAnimationFrame(k);var t=f(this).attr("data-picker-value");p.setValue(t)}}var u=f(e),c=u.index(),p=l.cols[c];if(!p.divider){p.container=u,p.wrapper=p.container.find(".PickerItemsColWrapper"),p.items=p.wrapper.find(".PickerItem");var g,v,C,y,b;p.replaceValues=function(e,t){p.destroyEvents(),p.values=e,p.displayValues=t;var n=l.columnHTML(p,!0);p.wrapper.html(n),p.items=p.wrapper.find(".PickerItem"),p.calcSize(),p.setValue(p.values[0],0,!0),p.initEvents()},p.calcSize=function(){l.params.rotateEffect&&(p.container.removeClass("PickerItemsColAbsolute"),p.width||p.container.css({width:""}));var e,t;e=0,t=p.container[0].offsetHeight,g=p.wrapper[0].offsetHeight,v=p.items[0].offsetHeight,C=v*p.items.length,y=t/2-C+v/2,b=t/2-v/2,p.width&&(e=p.width,parseInt(e,10)===e&&(e+="px"),p.container.css({width:e})),l.params.rotateEffect&&(p.width||(p.items.each(function(){var t=f(this);t.css({width:"auto"}),e=Math.max(e,t[0].offsetWidth),t.css({width:""})}),p.container.css({width:e+2+"px"})),p.container.addClass("PickerItemsColAbsolute"))},p.calcSize(),n(b,!0);var k;p.setValue=function(e,t,i){"undefined"==typeof t&&(t="");var a=p.wrapper.find('.PickerItem[data-picker-value="'+e+'"]').index();if("undefined"!=typeof a&&a!==-1){var r=-a*v+b;p.wrapper.transition(t),n(r),l.params.updateValuesOnMomentum&&p.activeIndex&&p.activeIndex!==a&&(f.cancelAnimationFrame(k),p.wrapper.transitionEnd(function(){f.cancelAnimationFrame(k)}),o()),p.updateItems(a,r,t,i)}},p.updateItems=function(e,t,n,o){"undefined"==typeof t&&(t=f.getTranslate(p.wrapper[0],"y")),"undefined"==typeof e&&(e=-Math.round((t-b)/v)),e<0&&(e=0),e>=p.items.length&&(e=p.items.length-1);var i=p.activeIndex;p.activeIndex=e,p.items.removeClass("PickerSelected");var a=p.items.eq(e).addClass("PickerSelected");l.params.rotateEffect?(p.items.transition(n),p.items.each(function(e){var n=f(this),o=(e*v-(b-t))/v,i=Math.ceil(p.height/v/2)+1,a=-18*o;a>180&&(a=180),a<-180&&(a=-180),Math.abs(o)>i?n.addClass("PickerItemFar"):n.removeClass("PickerItemFar"),n.transform("translate3d(0, "+(-t+b)+"px, "+(m?-110:0)+"px) rotateX("+a+"deg)")})):p.items.transition(n),(o||"undefined"==typeof o)&&(p.value=a.attr("data-picker-value"),p.displayValue=p.displayValues?p.displayValues[e]:p.value,i!==e&&(p.onChange&&p.onChange(l,p.value,p.displayValue),l.params.autoUpdate&&l.updateValue()))},t&&p.updateItems(0,b,0);var T,w,x,S,M,E,O,I,A,L,P,B,D=!0;p.initEvents=function(e){var t=e?"off":"on";p.container[t](h.touchEvents.start,i),p.container[t](h.touchEvents.move,a),p.container[t](h.touchEvents.end,r),p.items[t](d.support.onClick,s)},p.destroyEvents=function(){p.initEvents(!0)},p.container[0].KLTDestroyPickerCol=function(){p.destroyEvents()},p.initEvents()}},l.destroyPickerCol=function(e){e=f(e),"KLTDestroyPickerCol"in e[0]&&e[0].KLTDestroyPickerCol()},f(e).on("resize",i),l.columnHTML=function(e,t){var n="",o="";if(e.divider)o+='<div class="PickerItemsCol PickerItemsColDivider '+(e.textAlign?"PickerItemsCol_"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>";else{for(var i=0;i<e.values.length;i++)n+='<div class="PickerItem" data-picker-value="'+e.values[i]+'">'+(e.displayValues?e.displayValues[i]:e.values[i])+"</div>";o+='<div class="PickerItemsCol '+(e.textAlign?"PickerItemsCol_"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="PickerItemsColWrapper">'+n+"</div></div>"}return t?n:o},l.layout=function(){var e,t="",n="";l.cols=[];var o="";for(e=0;e<l.params.cols.length;e++){var i=l.params.cols[e];o+=l.columnHTML(l.params.cols[e]),l.cols.push(i)}n="PickerModal PickerColumns "+(l.params.cssClass||"")+(l.params.rotateEffect?" Picker3d":""),t='<div class="'+n+'">'+(l.params.toolbar?l.params.toolbarTemplate.replace(/{{closeText}}/,l.params.toolbarCloseText).replace(/{{okText}}/,l.params.toolbarOkText):"")+'<div class="PickerModalInner PickerItems">'+o+'<div class="PickerCenterHighlight"></div></div></div>',l.pickerHTML=t},l.params.input&&(l.input=f(l.params.input),l.input.length>0&&(l.params.inputReadOnly&&l.input.prop("readOnly",!0),l.inline||l.input.on("click",a),l.params.inputReadOnly&&l.input.on("focus mousedown",function(e){e.preventDefault()}))),!l.inline&&l.params.closeByOutsideClick&&f("html").on("click",r),l.opened=!1,l.isClick=1,l.open=function(){var e=+new Date,t=n();l.Timestamp=e*l.isClick,l.opened||(l.isCreate&&(l.layout(),t?(l.pickerHTML='<div class="ModalPopover ModalPopoverPickerColumns"><div class="ModalPopoverInner">'+l.pickerHTML+"</div></div>",l.popover=u.Popover(l.pickerHTML,l.params.input,{removeOnClose:!0}),l.container=f(l.popover).find(".PickerModal"),f(l.popover).on("close",function(){s()})):l.inline?(l.container=f(l.pickerHTML),l.container.addClass("PickerModalInline"),f(l.params.container).append(l.container)):(l.container=f(u.PickerModal(l.pickerHTML,!l.params.isEfficient)),f(l.container).on("close",function(){s()})),l.params.isEfficient&&!t&&(l.isCreate=!1)),l.PickerClick=function(){f(this).hasClass("OkPicker")&&!l.params.autoUpdate&&l.updateValue(),l.close(),f(this).off("click",l.PickerClick)},l.container.find(".OkPicker,.ClosePicker").on("click",l.PickerClick),l.container[0].KLTPicker=l,l.container.find(".PickerItemsCol").each(function(){var e=!0;(!l.initialized&&l.params.value||l.initialized&&l.value)&&(e=!1),l.initPickerCol(this,e)}),l.initialized?l.value&&l.setValue(l.value,0):l.value?l.setValue(l.value,0):l.params.value&&l.setValue(l.params.value,0)),l.opened=!0,l.initialized=!0,l.params.onOpen&&e==l.Timestamp&&(l.params.isEfficient&&!t&&l.isClick++,l.params.onOpen(l))},l.close=function(){if(l.opened&&!l.inline)return o()?void(l.isCreate?u.CloseModal(l.popover):(u.HideModal(l.popover),setTimeout(function(){l.opened=!1},400))):void(l.isCreate?u.CloseModal(l.container):(u.HideModal(l.container),setTimeout(function(){l.opened=!1},400)))},l.destroy=function(){l.close(),l.params.input&&l.input.length>0&&l.input.off("click focus",a),f("html").off("click",r),f(e).off("resize",i)},l.inline?l.open():!l.initialized&&l.params.value&&l.setValue(l.params.value),l},e.kelat.picker=function(e){return new u.Picker(e)},u.BackToTop=function(){var t='<div class="BackToTop"><i class="I IGoTop"></i></div>',n=f(document.getElementById(d.WrapperArea)),o=f(t);f(e).on("scroll",function(){if(n.find(".isBackToTop").length>0){var e=d.support.GetPageScroll().Y;e>=200?(n.append(o),o.once(d.support.onClick,function(){f("html,body").scrollTop(0,100),setTimeout(function(){o.remove()},100)})):e<100&&o.remove()}})},u.AddNotify=function(t){if(t){var n=t.title?'<div class="ItemTitle">'+t.title+"</div>":"",o=t.subtitle?'<div class="ItemSubtitle">'+t.subtitle+"</div>":"",i=t.message?'<div class="ItemText">'+t.message+"</div>":"",a=t.media?'<div class="ItemMedia">'+t.media+"</div>":"",r='<div class="ItemAfter"><a href="javascript:;" class="CloseNotify"><span></span></a></div>',s=f(".NotifyBox");0===s.length&&(f(document.getElementById(d.WrapperArea)).append('<ul class="NotifyBox ListBlock MediaList" style="z-index:'+d.LayerIndex+'"></ul>'),s=f(".NotifyBox")),s.show();var l='<li class="ListItem"><div class="ItemCon InkRipple">'+a+'<div class="ItemInner"><div class="ItemTitleRow">'+n+r+"</div>"+o+i+"</div></div></li>",c=f(l);c.on(d.support.onClick,function(e){var n=!1,o=f(e.target);o.is(".CloseNotify")||f(e.target).parents(".CloseNotify").length>0?(n=!0,t.onClose&&t.onClose(c[0],e)):t.closeOnClick&&(n=!0),n&&u.CloseNotify(c[0])}),s.prepend(c[0]);var p=c.outerHeight();c.css("margin-top",-p+"px"),e.setTimeout(function(){c.addClass("ListItemInOut "+t.additionalClass).css("margin-top","0px")},5)}return this},u.CloseNotify=function(t){if(t=f(t),0!==t.length){var n=f(".NotifyBox"),o=t.outerHeight();t.css("height",o+"px"),e.setTimeout(function(){t.addClass("ListItemInOut").css("height","0px")},20),t.addClass("NotifyBoxHidden").transitionEnd(function(){t.remove(),0===n.find(".ListItem").length&&n.hide()})}},e.kelat.addNotify=u.AddNotify,e.kelat.closeNotify=u.CloseNotify,u.Indicator=function(){return l?f(document.getElementById(d.WrapperArea)).append('<div class="LoadingIndicatorBlank"></div><div class="LoadingIndicatorBox"><span class="Loading LoadingWhite"></span></div>'):null},u.unIndicator=function(){return f(".LoadingIndicatorBlank, .LoadingIndicatorBox").remove()},e.kelat.indicator=u.Indicator,e.kelat.unIndicator=u.unIndicator,u.Toast=function(e){e=e||{};var t=e.title?e.title:"",n=e.content?"<div>"+e.content+"</div>":"",i=e.className?e.className:"",a=f('<div class="ToastBox '+i+" "+o(kelat.defaults.shift)+'" style="z-index:'+d.LayerIndex+'">'+n+t+"</div>");f(document.getElementById(d.WrapperArea)).append(a);var r={"margin-left":-(a.outerWidth()/2)+"px"};!function(e){if(e)for(var t=0;t<e.length;t++)if(e[t]){var n;switch(n="string"==typeof e[t]&&e[t].indexOf("%")>=0?e[t]:e[t]+"px",t){case 0:r.top=n,r.bottom="auto";break;case 1:r.right=n,r.left="auto",r["margin-left"]="auto";break;case 2:r.bottom=n;break;case 3:r.left=n,r["margin-left"]="auto"}}}(e.site),a.css(r);var s=function(e,t){setTimeout(function(){l&&e()},t)};s(function(){a.removeClass("ToastOut").css({"z-index":++d.LayerIndex}).addClass("ToastIn")},10),s(function(){a.removeClass("ToastIn").addClass("ToastOut").transitionEnd(function(){a.remove()})},e.time?e.time:2e3)},e.kelat.toast=u.Toast,u.Loading=function(e){return l?u.Modal({title:e||d.LoadingTitle,content:'<div class="TC">'+d.LoadingHtml+"</div>",className:"ModalLoading"}):null},u.unLoading=function(){return u.CloseModal(".ModalBox.ModalLoading")},e.kelat.loading=u.Loading,e.kelat.unLoading=u.unLoading,u.SizeNavbars=function(e){var t=e?f(e).find(".NavBar .NavBarInner"):f(".NavBar .NavBarInner");t.each(function(){var e,t,n=f(this),o=h.rtl?n.find(".Right"):n.find(".Left"),i=h.rtl?n.find(".Left"):n.find(".Right"),a=n.find(".Center"),r=0===o.length,s=0===i.length,l=r?0:o.outerWidth(!0),u=s?0:i.outerWidth(!0),c=a.outerWidth(!0),d=n.styles(),p=n[0].offsetWidth-parseInt(d.paddingLeft,10)-parseInt(d.paddingRight,10);s&&(e=p-c),r&&(e=0),r||s||(e=(p-u-c+l)/2);var g=(p-c)/2;p-l-u>c?(g<l&&(g=l),g+c>p-u&&(g=p-u-c),t=g-e):t=0;var m=t;h.rtl&&r&&s&&a.length>0&&(m=-m),a.css({left:m+"px"})})},u.ShowModal=function(e){return e.prev(".ModalBlank").css("z-index",d.LayerIndex).removeClass("ModalBlankVisibleOut").addClass("ModalBlankVisibleIn"),e.removeClass("ModalOut").css({"z-index":++d.LayerIndex}).addClass("ModalIn"),e},u.HideModal=function(e){f("body").removeClass("OVBody"),e.removeClass("ModalIn").addClass("ModalOut").transitionEnd(function(t){e.removeClass("ModalOut")}),e.prev(".ModalBlank").removeClass("ModalBlankVisibleIn").addClass("ModalBlankVisibleOut").transitionEnd(function(){f(this).removeClass("ModalBlankVisibleOut").removeAttr("style")})},u.OpenModal=function(t,n,o,i){var a=+new Date,r=t.hasClass("ModalPopover"),s=t.hasClass("PickerModal"),c=t.hasClass("PopupBox");f(document.getElementById(d.WrapperArea)).append('<div class="ModalBlank ModalBlank'+a+'" style="z-index:'+d.LayerIndex+'"/>'),f(document.getElementById(d.WrapperArea)).append(t[0]),u.SizeNavbars(t);var p=f(".ModalBlank"+a);(n?n:"").indexOf("ModalWarnBox")!==-1?(t.addClass(n),e.setTimeout(function(){u.CloseModal(t)},i)):(d.isModalPopover?t.addClass(n):r||s||c||t.css({marginTop:-Math.round(t.outerHeight()/2)+"px"}),d.isModalPopover=!1),e.setTimeout(function(){t&&l&&u.ShowModal(t),(r||s||c)&&p.on(d.support.onClick,function(){u.CloseModal(t,o)})},5)},u.CloseModal=function(e,t){if(f("body").removeClass("OVBody"),e=f(e||".ModalBox.ModalBoxIn"),"undefined"==typeof e||0!==e.length){var n=e.hasClass("ModalPopover"),o=e.hasClass("PopupBox"),i=e.hasClass("PickerModal"),a=e.hasClass("RemoveOnClose"),r=e.hasClass("HideOnClose");return e.trigger("close"),e.removeClass("ModalIn").addClass("ModalOut").transitionEnd(function(s){!!t&&t[0].append(t[1]),i||n||o?(r?e.removeClass("ModalOut"):e.removeClass("ModalOut").hide(),a&&e.length>0&&e.remove()):e.remove()}).prev().removeClass("ModalBlankVisibleIn").addClass("ModalBlankVisibleOut").transitionEnd(function(){r&&e.length>0?f(this).removeClass("ModalBlankVisibleOut").removeAttr("style"):f(this).remove()}),!0}},u.Modal=function(e){e=e||{};var t,n="",o="",i="",a=typeof e.content;if(e.buttons&&e.buttons.length>0)for(var r=0;r<e.buttons.length;r++)0===r?o="First":r===e.buttons.length-1&&(o="Last"),n+='<a href="javascript:;" class="ModalButton '+o+" "+(e.buttons[r].className||"")+'">'+e.buttons[r].text+"</a>";var s=e.title?'<div class="ModalHeader">'+e.title+"</div>":"",l=e.content?"object"===a?'<div class="ModalContent"></div>':'<div class="ModalContent">'+e.content+"</div>":"",c=e.afterText||"",p=e.buttons&&0!==e.buttons.length?"":"ModalNoButtons",h=e.buttons&&e.buttons.length>0?'<div class="ModalFooter ModalFooter'+e.buttons.length+'">'+n+"</div>":"";i='<div class="ModalBox '+p+" "+(e.className?e.className:"")+'"><div class="ModalInner">'+(s+l+c)+"</div>"+h+"</div>";var g=f(i);return"object"===a&&(t=[e.content.parent(),e.content],g.find(".ModalContent").append(t[1])),g.find(".ModalButton").each(function(t,n){f(n).on(d.support.onClick,function(n){e.buttons[t].close!==!1&&u.CloseModal(g),e.buttons[t].onClick&&e.buttons[t].onClick(g,n),e.onClick&&e.onClick(g,t)})}),u.OpenModal(g,e.className?e.className:"",t,e.displayTime),g[0]},u.Alert=function(e,t,n,o){return"function"==typeof t&&(o=arguments[2],n=arguments[1],t=void 0),l?u.Modal({content:e||"",title:"undefined"==typeof t?d.ModalTitle:t,buttons:[{text:o&&o[0]?o[0]:d.ModalButtonOk,onClick:n}]}):null},u.Confirm=function(e,t,n,o,i,a){return"function"==typeof t&&("object"==typeof n?i=arguments[2]:(i=arguments[3],o=arguments[2]),n=arguments[1],t=void 0),l?u.Modal({content:e||"",title:"undefined"==typeof t?d.ModalTitle:t,className:a||"",buttons:[{text:i&&i[1]?i[1]:d.ModalButtonCancel,onClick:o},{text:i&&i[0]?i[0]:d.ModalButtonOk,onClick:n}]}):null},u.Warn=function(e,t,n){if(e)return"string"==typeof t&&(n=arguments[1],t=void 0),l?u.Modal({content:e||"",displayTime:t?t:2e3,className:"ModalWarnBox "+n}):null},u.Prompt=function(e,t,n,o,i){return"function"==typeof t&&(n=arguments[1],o=arguments[2],i=arguments[3],t=void 0),u.Modal({content:e||"",title:"undefined"==typeof t?d.ModalTitle:t,afterText:'<div class="InputField"><input type="text" class="ModalTextInput"></div>',buttons:[{text:i&&i[1]?i[1]:d.ModalButtonCancel},{text:i&&i[0]?i[0]:d.ModalButtonOk,bold:!0}],onClick:function(e,t){0===t&&o&&o(f(e).find(".ModalTextInput").val()),1===t&&n&&n(f(e).find(".ModalTextInput").val())}})},u.Popup=function(e,t){return"undefined"==typeof t&&(t=!0),"string"==typeof e&&e.indexOf("<")>=0&&u.ModalString(e,t,function(t){e=t}),e=f(e),0!==e.length&&(e.show(),e.find(".OkPicker,.ClosePicker,.ClosePopup").on("click",function(){u.CloseModal(e)}),u.OpenModal(e),e[0])},u.ConfirmModal=function(e,t,n,o,i){return new u.Confirm(e,t,n,o,i,"ModalPickerBox")},u.PickerModal=function(e,t){if("undefined"==typeof t&&(t=!0),"string"==typeof e&&e.indexOf("<")>=0){if(e=f(e),e.dd="1",!(e.length>0))return!1;t?e.addClass("RemoveOnClose"):e.addClass("HideOnClose"),f(document.getElementById(d.WrapperArea)).append(e[0])}return e=f(e),0!==e.length&&(f(".PickerModal.ModalIn:not(.ModalOut)").length>0&&!e.hasClass("ModalIn")&&u.CloseModal(".PickerModal.ModalIn:not(.ModalOut)"),u.OpenModal(e),e[0])},u.ModalString=function(e,t,n){var o=document.createElement("div");return o.innerHTML=e.trim(),o.childNodes.length>0&&(e=o.childNodes[0],t&&e.classList.add("RemoveOnClose"),f(document.getElementById(d.WrapperArea)).append(e),n(e))},u.Popover=function(t,n,o){function i(){t.css({left:"",top:""});var e,i,a,r=t.width(),s=t.height(),l=0;e=t.find(".ModalPopoverAngle"),l=e.width()/2,e.removeClass("onLeft onRight onTop onBottom").css({left:"",top:""});var u=n.outerWidth(),c=n.outerHeight(),p=n.offset(),f=n.parents("body");f.length>0&&(p.top=p.top-f[0].scrollTop);var h=d.support.GetPageScroll(),g=d.support.GetPageSize(),m=g.WinH,v=g.WinW,C=0,y=0,b=0,k="top";s+l<p.top?C=p.top-s-l+h.Y:s+l<m-p.top-c?(k="bottom",C=p.top+c+l+h.Y):(k="middle",C=c/2+p.top-s/2,b=C,C<=0?C=5:C+s>=m&&(C=m-s-5),b-=C),o.angle&&(k=o.angle,C=p.top-s-l+h.Y),"top"===k||"bottom"===k?(y=u/2+p.left-r/2,b=y,y<5&&(y=5),y+r>v&&(y=v-r-5),"top"===k&&e.addClass("onBottom"),"bottom"===k&&e.addClass("onTop"),b-=y,i=r/2-l+b,i=Math.max(Math.min(i,r-2*l-13),13),e.css({left:i+"px"})):"middle"===k&&(y=p.left-r-l,e.addClass("onRight"),(y<5||y+r>v)&&(y<5&&(y=p.left+u+l),y+r>v&&(y=v-r-5),e.removeClass("onRight").addClass("onLeft")),a=s/2-l+b,a=Math.max(Math.min(a,s-2*l-13),13),e.css({top:a+"px"})),"top"==o.angle&&(e.removeClass("onLeft onRight onTop onBottom").addClass("onTop"),C=p.top+l+c+f[0].scrollTop),o.center&&(y=(v-r)/2),t.css({top:C+"px",left:parseInt(y)+"px"})}return"object"!=typeof o&&(o={}),"undefined"==typeof o.removeOnClose&&(o.removeOnClose=!0),"string"==typeof t&&t.indexOf("<")>=0&&u.ModalString(t,o.removeOnClose,function(e){t=e}),d.isModalPopover=!0,t=f(t),n=f(n),0!==t.length&&0!==n.length&&(0===t.find(".ModalPopoverAngle").length&&t.append('<div class="ModalPopoverAngle"></div>'),t.show(),i(),f(e).on("resize",i),t.on("close",function(){f(e).off("resize",i)}),u.OpenModal(t),l?t[0]:null)},e.kelat.alert=u.Alert,e.kelat.confirm=u.Confirm,e.kelat.warn=u.Warn,e.kelat.prompt=u.Prompt,e.kelat.pickerModal=u.PickerModal,e.kelat.popup=u.Popup,e.kelat.popover=u.Popover,e.kelat.confirmModal=u.ConfirmModal,u.BlankTips=function(e,t,n){"function"==typeof t&&(n=arguments[1],t=void 0);var o=e?'<div class="BlankTipsTitle">'+e+"</div>":"",i=t?'<div class="BlankTipsContent">'+t+"</div>":"",a='<div class="BlankTips">'+i+o+"</div></div>",r=f(a);return r.on(d.support.onClick,function(e){n&&n(r,e)}),f("html,body").addClass("OH"),f(document.getElementById(d.WrapperArea)).append(r),this},e.kelat.blankTips=u.BlankTips,u.OpenActions=function(t){var n=+new Date;f(document.getElementById(d.WrapperArea)).append(f('<div class="ModalBlank ActionsBlank'+n+'" style="z-index:'+d.LayerIndex+'"/>')),f(document.getElementById(d.WrapperArea)).append(f(t[0])),e.setTimeout(function(){t&&l&&t.css({"z-index":++d.LayerIndex}).removeClass("ModalOut").addClass("ModalIn"),f(".ActionsBlank"+n).addClass("ModalBlankVisibleIn").transitionEnd(function(){f(this).on(d.support.onClick,function(){u.CloseModal(t)})})},5)},u.Actions=function(e){for(var e=e||[],t="",n="",o=0;o<e.length;o++)for(var i=0;i<e[o].length;i++){0===i&&(t+='<div class="ActionsModalGroup">');var a=e[o][i],r=a.label?"ActionsLabel":"ActionsButton",s=a.text?a.text:d.ModalButtonCancel;a.bold&&(r+=" ActionsButtonBold"),a.color&&(r+=" "+a.color),a.bg&&(r+=" "+a.bg),a.disabled&&(r+=" disabled"),t+='<div class="'+r+'">'+s+"</div>",i===e[o].length-1&&(t+="</div>")}n='<div class="ModalBox ActionsModal">'+t+"</div>";var c=".ActionsModalGroup",p=".ActionsButton",h=f(n),g=h.find(c);return g.each(function(t,n){var o=t;f(n).children().each(function(t,n){var i,a=t,r=e[o][a];f(n).is(p)&&(i=f(n)),f(n).find(p).length>0&&(i=f(n).find(p)),i&&i.on(d.support.onClick,function(e){r.close!==!1&&u.CloseModal(h),r.onClick&&r.onClick(h,e)})})}),l?u.OpenActions(h):""},e.kelat.actions=u.Actions,u.swipeoutOpenedEl=void 0,u.allowSwipeout=!0,u.initSwipeout=function(t){function n(e){u.allowSwipeout&&(r=!1,a=!0,s=void 0,P.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,P.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,l=(new Date).getTime())}function o(e){if(a){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if("undefined"==typeof s&&(s=!!(s||Math.abs(n-P.y)>Math.abs(t-P.x))),s)return void(a=!1);if(!r){if(f(".ListBlock.SortableOpened").length>0)return;p=f(this),
g=p.find(".SwipeoutCon"),m=p.find(".SwipeoutActionsRight"),v=p.find(".SwipeoutActionsLeft"),C=y=w=x=E=M=null,A=v.hasClass("SwipeoutActionsNoFold")||d.swipeoutActionsNoFold,L=m.hasClass("SwipeoutActionsNoFold")||d.swipeoutActionsNoFold,v.length>0&&(C=v.outerWidth(),w=v.children(".SwipeoutItem"),M=v.find(".SwipeoutOverswipe")),m.length>0&&(y=m.outerWidth(),x=m.children(".SwipeoutItem"),E=m.find(".SwipeoutOverswipe")),k=p.hasClass("SwipeoutOpened"),k&&(T=p.find(".SwipeoutActionsLeft.SwipeoutActionsOpened").length>0?"left":"right"),p.removeClass("transitioning"),d.swipeoutNoFollow||(p.find(".SwipeoutActionsOpened").removeClass("SwipeoutActionsOpened"),p.removeClass("SwipeoutOpened"))}if(r=!0,e.preventDefault(),c=t-P.x,b=c,k&&("right"===T?b-=y:b+=C),b>0&&0===v.length||b<0&&0===m.length){if(!k)return a=r=!1,g.transform(""),x&&x.length>0&&x.transform(""),void(w&&w.length>0&&w.transform(""));b=0}S=b<0?"toLeft":b>0?"toRight":S?S:"toLeft";var o,i,l;if(d.swipeoutNoFollow)return k?("right"===T&&c>0&&u.swipeoutClose(p),"left"===T&&c<0&&u.swipeoutClose(p)):(c<0&&m.length>0&&u.swipeoutOpen(p,"right"),c>0&&v.length>0&&u.swipeoutOpen(p,"left")),a=!1,void(r=!1);O=!1,I=!1;var h;if(m.length>0)for(l=b/y,b<-y&&(b=-y-Math.pow(-b-y,.8),E.length>0&&(I=!0)),o=0;o<x.length;o++)"undefined"==typeof x[o]._buttonOffset&&(x[o]._buttonOffset=x[o].offsetLeft),i=x[o]._buttonOffset,h=f(x[o]),E.length>0&&h.hasClass("SwipeoutOverswipe")&&(h.css({left:(I?-i:0)+"px"}),I?h.addClass("swipeout-overswipe-active"):h.removeClass("swipeout-overswipe-active")),h.transform("translate3d("+(b-i*(1+Math.max(l,-1)))+"px,0,0)");if(v.length>0)for(l=b/C,b>C&&(b=C+Math.pow(b-C,.8),M.length>0&&(O=!0)),o=0;o<w.length;o++)"undefined"==typeof w[o]._buttonOffset&&(w[o]._buttonOffset=C-w[o].offsetLeft-w[o].offsetWidth),i=w[o]._buttonOffset,h=f(w[o]),M.length>0&&h.hasClass("SwipeoutOverswipe")&&(h.css({left:(O?i:0)+"px"}),O?h.addClass("swipeout-overswipe-active"):h.removeClass("swipeout-overswipe-active")),w.length>1&&h.css("z-index",w.length-o),h.transform("translate3d("+(b+i*(1-Math.min(l,1)))+"px,0,0)");g.transform("translate3d("+b+"px,0,0)")}}function i(e){if(!a||!r)return a=!1,void(r=!1);a=!1,r=!1;var t,n,o,i,s,d,h=(new Date).getTime()-l;if(d="toLeft"===S?L:A,o="toLeft"===S?m:v,n="toLeft"===S?y:C,t=h<300&&(c<-10&&"toLeft"===S||c>10&&"toRight"===S)||h>=300&&Math.abs(b)>n/2?"open":"close",h<300&&(0===Math.abs(b)&&(t="close"),Math.abs(b)===n&&(t="open")),"open"===t){u.swipeoutOpenedEl=p,p.trigger("open"),p.addClass("SwipeoutOpened transitioning");var T="toLeft"===S?-n:n;if(g.transform("translate3d("+T+"px,0,0)"),o.addClass("SwipeoutActionsOpened"),i="toLeft"===S?x:w)for(s=0;s<i.length;s++)f(i[s]).transform("translate3d("+T+"px,0,0)");I&&m.find(".SwipeoutOverswipe")[0].click(),O&&v.find(".SwipeoutOverswipe")[0].click()}else p.trigger("close"),u.swipeoutOpenedEl=void 0,p.addClass("transitioning").removeClass("SwipeoutOpened"),g.transform(""),o.removeClass("SwipeoutActionsOpened");var M;if(w&&w.length>0&&w!==i)for(s=0;s<w.length;s++)M=w[s]._buttonOffset,"undefined"==typeof M&&(w[s]._buttonOffset=C-w[s].offsetLeft-w[s].offsetWidth),f(w[s]).transform("translate3d("+M+"px,0,0)");if(x&&x.length>0&&x!==i)for(s=0;s<x.length;s++)M=x[s]._buttonOffset,"undefined"==typeof M&&(x[s]._buttonOffset=x[s].offsetLeft),f(x[s]).transform("translate3d("+-M+"px,0,0)");g.transitionEnd(function(e){k&&"open"===t||closed&&"close"===t||(p.trigger("open"===t?"opened":"closed"),k&&"close"===t&&(m.length>0&&x.transform(""),v.length>0&&w.transform("")))})}var a,r,s,l,c,p,g,m,v,C,y,b,k,T,w,x,S,M,E,O,I,A,L,P={};f(document).on("click",".SwipeoutClose",function(){u.swipeoutClose(f(this).parents(".SwipeoutOpened"))}),f(document).on("click",".SwipeoutDelete",function(){var e=f(this),t=e.dataset();if(t.confirm){var n=t.confirm,o=t.confirmtitle;o?kelat.confirm(n,o,function(){u.swipeoutDelete(e.parents(".Swipeout"))},function(){t.closeoncancel&&u.swipeoutClose(e.parents(".Swipeout"))}):kelat.confirm(n,function(){u.swipeoutDelete(e.parents(".Swipeout"))},function(){t.closeoncancel&&u.swipeoutClose(e.parents(".Swipeout"))})}else u.swipeoutDelete(e.parents(".Swipeout"))}),f(document).on(h.touchEvents.start,function(e){if(u.swipeoutOpenedEl){var t=f(e.target);u.swipeoutOpenedEl.is(t[0])||t.parents(".Swipeout").is(u.swipeoutOpenedEl)||t.hasClass("ModalIn")||t.hasClass("ModalBlank")||t.hasClass("ActionsModal")||t.parents(".ActionsModal.ModalIn, .ModalBox.ModalIn").length>0||u.swipeoutClose(u.swipeoutOpenedEl)}}),t?e.isSwipeoutEL||(f(t).on(h.touchEvents.start,n),f(t).on(h.touchEvents.move,o),f(t).on(h.touchEvents.end,i),e.isSwipeoutEL=!0):e.isSwipeout||(f(document).on(h.touchEvents.start,".ListBlock li.Swipeout",n),f(document).on(h.touchEvents.move,".ListBlock li.Swipeout",o),f(document).on(h.touchEvents.end,".ListBlock li.Swipeout",i),e.isSwipeout=!0)},u.swipeoutOpen=function(e,t,n){if(e=f(e),2===arguments.length&&"function"==typeof arguments[1]&&(n=t),0!==e.length&&(e.length>1&&(e=f(e[0])),e.hasClass("Swipeout")&&!e.hasClass("SwipeoutOpened"))){t||(t=e.find(".SwipeoutActionsRight").length>0?"right":"left");var o=e.find(".swipeout-actions-"+t);if(0!==o.length){e.trigger("open").addClass("SwipeoutOpened").removeClass("transitioning"),o.addClass("SwipeoutActionsOpened");var i,a=o.children(".SwipeoutItem"),r=o.outerWidth(),s="right"===t?-r:r;if(a.length>1){for(i=0;i<a.length;i++)"right"===t?f(a[i]).transform("translate3d("+-a[i].offsetLeft+"px,0,0)"):f(a[i]).css("z-index",a.length-i).transform("translate3d("+(r-a[i].offsetWidth-a[i].offsetLeft)+"px,0,0)");a[1].clientLeft}for(e.addClass("transitioning"),i=0;i<a.length;i++)f(a[i]).transform("translate3d("+s+"px,0,0)");e.find(".SwipeoutCon").transform("translate3d("+s+"px,0,0)").transitionEnd(function(){e.trigger("opened"),n&&n.call(e[0])}),u.swipeoutOpenedEl=e}}},u.swipeoutClose=function(e,t){function n(){u.allowSwipeout=!0,e.hasClass("SwipeoutOpened")||(e.removeClass("transitioning"),a.transform(""),e.trigger("closed"),t&&t.call(e[0]),s&&clearTimeout(s))}if(e=f(e),0!==e.length&&e.hasClass("SwipeoutOpened")){var o=e.find(".SwipeoutActionsOpened").hasClass("SwipeoutActionsRight")?"right":"left",i=e.find(".SwipeoutActionsOpened").removeClass("SwipeoutActionsOpened"),a=i.children(".SwipeoutItem"),r=i.outerWidth();u.allowSwipeout=!1,e.trigger("close"),e.removeClass("SwipeoutOpened").addClass("transitioning");var s;e.find(".SwipeoutCon").transform("").transitionEnd(n),s=setTimeout(n,500);for(var l=0;l<a.length;l++)"right"===o?f(a[l]).transform("translate3d("+-a[l].offsetLeft+"px,0,0)"):f(a[l]).transform("translate3d("+(r-a[l].offsetWidth-a[l].offsetLeft)+"px,0,0)"),f(a[l]).css({left:"0px"}).removeClass("swipeout-overswipe-active");u.swipeoutOpenedEl&&u.swipeoutOpenedEl[0]===e[0]&&(u.swipeoutOpenedEl=void 0)}},u.swipeoutDelete=function(e,t){if(e=f(e),0!==e.length){e.length>1&&(e=f(e[0])),u.swipeoutOpenedEl=void 0,e.trigger("delete"),e.css({height:e.outerHeight()+"px"});e[0].clientLeft;e.css({height:"0px"}).addClass("Deleting transitioning").transitionEnd(function(){e.trigger("deleted"),t&&t.call(e[0]),e.remove()});var n="-100%";e.find(".SwipeoutCon").transform("translate3d("+n+",0,0)")}},e.kelat.initSwipeout=u.initSwipeout,e.kelat.swipeoutOpen=u.swipeoutOpen,e.kelat.swipeoutClose=u.swipeoutClose,e.kelat.swipeoutDelete=u.swipeoutDelete,u.sortableToggle=function(e){return e=f(e),0===e.length&&(e=f(".ListBlock.Sortable")),e.toggleClass("SortableOpened"),e.hasClass("SortableOpened")?e.trigger("open"):e.trigger("close"),e},u.sortableOpen=function(e){return e=f(e),0===e.length&&(e=f(".ListBlock.Sortable")),e.addClass("SortableOpened"),e.trigger("open"),e},u.sortableClose=function(e){return e=f(e),0===e.length&&(e=f(".ListBlock.Sortable")),e.removeClass("SortableOpened"),e.trigger("close"),e},u.initSortable=function(){function e(e){i=!1,o=!0,a="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,s=f(this).parent(),c=s.parent().find("li"),C=s.parents(".sortable"),e.preventDefault(),u.allowSwipeout=!1}function t(e){if(o&&s){var t="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;i||(s.addClass("sorting"),C.addClass("sortable-sorting"),p=s[0].offsetTop,g=s.parent().height()-s[0].offsetTop-s.height(),l=s[0].offsetHeight),i=!0,e.preventDefault(),r=t-a;var n=r;n<-p&&(n=-p),n>g&&(n=g),s.transform("translate3d(0,"+n+"px,0)"),v=m=void 0,c.each(function(){var e=f(this);if(e[0]!==s[0]){var t=e[0].offsetTop,o=e.height(),i=s[0].offsetTop+n;i>=t-o/2&&s.index()<e.index()?(e.transform("translate3d(0, "+-l+"px,0)"),m=e,v=void 0):i<=t+o/2&&s.index()>e.index()?(e.transform("translate3d(0, "+l+"px,0)"),m=void 0,v||(v=e)):f(this).transform("translate3d(0, 0%,0)")}})}}function n(e){return u.allowSwipeout=!0,o&&i?(e.preventDefault(),c.transform(""),s.removeClass("sorting"),C.removeClass("sortable-sorting"),m&&(s.insertAfter(m),s.trigger("sort")),v&&(s.insertBefore(v),s.trigger("sort")),m=v=void 0,o=!1,void(i=!1)):(o=!1,void(i=!1))}var o,i,a,r,s,l,c,p,g,m,v,C;f(document).on("click",".ToggleSortable,.CloseSortable,.OpenSortable",function(){var e=f(this),t=e.dataset();e.hasClass("ToggleSortable")&&u.sortableToggle(t.sortable),e.hasClass("OpenSortable")&&u.sortableOpen(t.sortable),e.hasClass("CloseSortable")&&u.sortableClose(t.sortable)}),f(document).on(h.touchEvents.start,".ListBlock.Sortable .SortableHandler",e),d.support.touch?(f(document).on(h.touchEvents.move,".ListBlock.Sortable .SortableHandler",t),f(document).on(h.touchEvents.end,".ListBlock.Sortable .SortableHandler",n)):(f(document).on(h.touchEvents.move,t),f(document).on(h.touchEvents.end,n))},e.kelat.initSortable=u.initSortable,e.kelat.sortableOpen=u.sortableOpen,e.kelat.sortableClose=u.sortableClose,u.isAccordion=!0,u.accordionToggle=function(e){e=f(e),0!==e.length&&(e.hasClass("AccordionItemExpanded")?u.accordionClose(e):u.accordionOpen(e))},u.accordionOpen=function(e){e=f(e);var t=e.parents(".AccordionList").eq(0),n=e.children(".AccordionItemCon");0===n.length&&(n=e.find(".AccordionItemCon"));var o=t.length>0&&e.parent().children(".AccordionItemExpanded");o.length>0&&u.accordionClose(o),n.css("height",n[0].scrollHeight+"px").transitionEnd(function(){if(e.hasClass("AccordionItemExpanded")){n.transition(0),n.css("height","auto");e[0].clientLeft;n.transition(""),e.trigger("opened")}else n.css("height",""),e.trigger("closed");u.isAccordion=!0}),e.trigger("open"),e.addClass("AccordionItemExpanded")},u.accordionClose=function(e){e=f(e);var t=e.children(".AccordionItemCon");0===t.length&&(t=e.find(".AccordionItemCon")),e.removeClass("AccordionItemExpanded"),t.transition(0),t.css("height",t[0].scrollHeight+"px");t[0].clientLeft;t.transition(""),t.css("height","").transitionEnd(function(){if(e.hasClass("AccordionItemExpanded")){t.transition(0),t.css("height","auto");t[0].clientLeft;t.transition(""),e.trigger("opened")}else t.css("height",""),e.trigger("closed");u.isAccordion=!0}),e.trigger("close")},u.initAccordion=function(e){f(document).on("click",".AccordionItemToggle,.ItemLink,.AccordionItem",function(){if(u.isAccordion){var t=f(this),n=t.parent(".AccordionItem");0===n.length&&(n=t.parents(".AccordionItem")),0===n.length&&(n=t.parents("li")),t.hasClass("ItemLink")&&t.parent().hasClass("AccordionItem")&&(u.accordionToggle(n),u.isAccordion=!!e)}})},e.kelat.initAccordion=u.initAccordion,e.kelat.accordionOpen=u.accordionOpen,e.kelat.accordionClose=u.accordionClose,e.kelat.accordionToggle=u.accordionToggle,u.materialTabbarSetHighlight=function(e,t){e=f(e),t=t||e.find(".TabLink.active");var n,o;e.hasClass("TabBarScrollable")?(n=t[0].offsetWidth+"px",o=(h.rtl?-t[0].offsetLeft:t[0].offsetLeft)+"px"):(n=1/e.find(".TabLink").length*100+"%",o=100*(h.rtl?-t.index():t.index())+"%"),e.find(".TabLinkHighlight").css({width:n}).transform("translate3d("+o+",0,0)")},u.initPageMaterialTabbar=function(t){function n(){u.materialTabbarSetHighlight(o)}t=f(t);var o=f(t).find(".TabBar");o.length>0&&(0===o.find(".TabLinkHighlight").length&&o.find(".ToolBarInner").append('<span class="TabLinkHighlight"></span>'),n(),f(e).on("resize",n),t.once("pageBeforeRemove",function(){$(e).off("resize",n)}))},u.showTab=function(e,t,n){var o=f(e);if(2===arguments.length&&"boolean"==typeof t&&(n=t),0===o.length)return!1;if(o.hasClass("active"))return n&&o.trigger("show"),!1;var i=o.parent(".Tabs");if(0===i.length)return!1;u.allowSwipeout=!0;var a=i.parent().hasClass("TabsAnimatedWrap");if(a){var r=100*(h.rtl?o.index():-o.index());i.transform("translate3d("+r+"%,0,0)")}var s=i.children(".Tab.active").removeClass("active");if(o.addClass("active"),o.trigger("show"),!a&&o.find(".NavBar").length>0){var l;l=o.hasClass(app.params.viewClass)?o[0]:o.parents("."+app.params.viewClass)[0],u.SizeNavbars(l)}if(t?t=f(t):(t=f("string"==typeof e?'.tab-link[href="'+e+'"]':'.tab-link[href="#'+o.attr("id")+'"]'),(!t||t&&0===t.length)&&f("[data-tab]").each(function(){o.is(f(this).attr("data-tab"))&&(t=f(this))})),0!==t.length){var c;if(s&&s.length>0){var d=s.attr("id");d&&(c=f('.TabLink[href="#'+d+'"]')),(!c||c&&0===c.length)&&f("[data-tab]").each(function(){s.is(f(this).attr("data-tab"))&&(c=f(this))})}if(t&&t.length>0){t.addClass("active");var p=t.parents(".TabBar");p.length>0&&(0===p.find(".TabLinkHighlight").length&&p.find(".ToolBarInner").append('<span class="TabLinkHighlight"></span>'),u.materialTabbarSetHighlight(p,t))}return c&&c.length>0&&c.removeClass("active"),!0}},u.initTab=function(e,t,n){f(document).on("click",".TabLink",function(){var e=f(this),t=e.dataset();u.showTab(t.tab||e.attr("href"),e)}),u.initPageMaterialTabbar(f(document.getElementById(d.WrapperArea)))},e.kelat.tabs=u.initTab,e.kelat.showTab=u.showTab,u.NumberBox=function(){var e=".NumBoxPlus",t=".NumBoxMinus",n="disabled",o=function(o){null===o.value||""===o.value||isNaN(o.value)?o.input.val(o.min||0):(null!=o.max&&!isNaN(o.max)&&o.value>=parseInt(o.max)?(o.value=o.max,o.parent.find(e).addClass(n)):o.parent.find(e).removeClass(n),null!=o.min&&!isNaN(o.min)&&o.value<=parseInt(o.min)?(o.value=o.min,o.parent.find(t).addClass(n)):o.parent.find(t).removeClass(n),o.input.val(o.value))};return f(document).on(d.support.onClick,e+","+t,function(){var n,i=f(this),a=i.parent(".NumBox"),r=a.find(".NumBoxInput"),s=parseInt(a[0].getAttribute("data-step")||1),u=a[0].getAttribute("data-min")?parseInt(a[0].getAttribute("data-min")):"",c=a[0].getAttribute("data-max")?parseInt(a[0].getAttribute("data-max")):"";i.is(e)?n=parseInt(r.val())+s:i.is(t)&&(n=parseInt(r.val())-s),l?o({value:n,min:u,max:c,parent:a,input:r}):""}),this},e.kelat.numberBox=u.NumberBox,u.Progressbar=function(t,n){if(t=f(t||"body"),0!==t.length&&l){var o;return t.hasClass("ProgressBar")?o=t:(o=t.children(".ProgressBar:not(.ProgressBarOut)"),0===o.length&&(o=f('<span class="ProgressBar ProgressBarIn"></span>'),t.append(o))),e.setTimeout(function(){o.remove()},n?n:2e3),o[0]}},e.kelat.progressbar=u.Progressbar,u.Ripple=function(){return f(document).on(d.support.onClick,".InkRipple",function(e){if(l){if(d.support.touch&&!e.targetTouches)return;var t=f(this),n=+new Date,o=Math.max(t.outerWidth(),t.outerHeight()),i=(d.support.touch?e.targetTouches[0].pageX:e.pageX)-t.offset().left-o/2,a=(d.support.touch?e.targetTouches[0].pageY:e.pageY)-t.offset().top-o/2;t.prepend('<span class="ink" id="ink'+n+'" style="top:'+a+"px;left:"+i+"px;height:"+o+"px;width:"+o+'px"></span>');var r=f("#ink"+n);r.addClass("RippleAnimate").animationEnd(function(){r.remove()})}})},u.FloatButton=function(e){var t=f(e);return t.hasClass("FloatingButton")&&t.parent().hasClass("SpeedDial")&&t.on(d.support.onClick,function(e){e.preventDefault(),f(this).parent(".SpeedDial").toggleClass("SpeedDialOpened")}),this},e.kelat.floatButton=u.FloatButton,u.PushMenu=function(){var t=d.screenSizes;f(document).on("click",".SidebarToggle",function(n){n.preventDefault(),f(e).width()>t.sm-1?f("body").hasClass("SidebarCollapse")?f("body").removeClass("SidebarCollapse"):f("body").addClass("SidebarCollapse"):f("body").hasClass("SidebarOpen")?f("body").removeClass("SidebarOpen").removeClass("SidebarCollapse"):f("body").addClass("SidebarOpen")}),f(".ContentWrapper").click(function(){f(e).width()<=t.sm-1&&f("body").hasClass("SidebarOpen")&&f("body").removeClass("SidebarOpen")})},e.kelat.extend({imgReady:function(){var e=[],t=null,n=function(){for(var t=0;t<e.length;t++)e[t].end?e.splice(t--,1):e[t]();!e.length&&o()},o=function(){clearInterval(t),t=null};return function(o,i,a,r){var s,l,u,c,d,p=new Image;return p.src=o,p.complete?(i.call(p),void(a&&a.call(p))):(l=p.width,u=p.height,p.onerror=function(){r&&r.call(p),s.end=!0,p=p.onload=p.onerror=null},s=function(){c=p.width,d=p.height,(c!==l||d!==u||c*d>1024)&&(i.call(p),s.end=!0)},s(),p.onload=function(){!s.end&&s(),a&&a.call(p),p=p.onload=p.onerror=null},void(s.end||(e.push(s),null===t&&(t=setInterval(n,40)))))}}(),imgRender:function(e,t){var n=new Image;n.src=e.path,kelat.imgReady(e.path,function(){},function(){var n=this,o=n.width,i=n.height,a=o/i;o=e.width||100,i=o/a;var r=document.createElement("canvas"),s=r.getContext("2d");r.style.width=o,r.style.height=i,s.drawImage(n,0,0,o,i),t(r.toDataURL())},function(){kelat.alert(d.ImgTips)})}});var g=!0;return u.initImagesLazyLoad=function(t){function n(e){function t(){e.removeClass("Lazy").addClass("LazyLoaded"),o?e.css("background-image","url("+i+")"):e.attr("src",i),d.ImgLazyLoadSequential&&(p=!1,c.length>0&&n(c.shift()))}e=f(e);var o=e.attr("data-background"),i=o?o:e.attr("data-src");if(i){if(d.ImgLazyLoadSequential&&p)return void(c.indexOf(e[0])<0&&c.push(e[0]));p=!0;var a=new Image;a.onload=t,a.onerror=t,a.src=i}}function o(){s=l.find(".Lazy"),0===s?(g=!1,r()):(g=!0,a(),s.each(function(e,t){t=f(t),i(t[0])&&n(t)}))}function i(t){var n=t.getBoundingClientRect(),o=d.ImgLazyLoadThreshold||0;return n.top>=0-o&&n.left>=0-o&&n.top<=e.innerHeight+o&&n.left<=e.innerWidth+o}function a(t){var n=t?"off":"on";s[n]("lazy",o),l[n]("lazy",o),f(e)[n]("scroll",o),f(e)[n]("resize",o)}function r(){a(!0)}var s,l=f("#"+d.WrapperArea);if(l.hasClass("Lazy")?(s=l,l=s.parents("#"+d.WrapperArea)):s=l.find(".Lazy"),0!==s.length){var u=d.ImgPlaceholder;"string"==typeof t&&(u=t),t!==!1&&s.each(function(){f(this).attr("data-src")&&f(this).attr("src",u)});var c=[],p=!1;a(),o()}},e.kelat.imagesLazyLoad=u.initImagesLazyLoad,e.kelat.init=function(){u.Ripple&&u.Ripple(),u.BackToTop&&u.BackToTop(),u.PushMenu&&u.PushMenu()}(),"function"==typeof define&&define.amd&&define("kelat",function(){return e.kelat}),t||(e.kelat=e.$$=kelat),l||kelat.addNotify({title:d.ModalTitle,message:d.message}),e.kelat}});
//# sourceMappingURL=kelat.min.js.map