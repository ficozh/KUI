!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("kelat requires window & document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e){return e.getAttribute&&e.getAttribute("class")||""}function o(e){var t="";if(0!==e)switch(e){case 1:t="zoomInDown";break;case 2:t="fadeInUpBig";break;case 3:t="zoomInLeft";break;case 4:t="rollIn";break;case 5:t="shake"}return t}var i={},a=i.toString,r=i.hasOwnProperty,s=!!(++[[]][+[]]+[]+[]>>>0),l={type:function(e){return null===e?e+"":"object"==typeof e||"function"==typeof e?i[a.call(e)]||"object":typeof e},isString:function(e){return"string"==typeof e},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},isWindow:function(e){return null!=e&&e===e.window}};l.isPlainObject=function(e){return"object"===l.type(e)&&!e.nodeType&&!l.isWindow(e)&&!(e.constructor&&!r.call(e.constructor.prototype,"isPrototypeOf"))},l.isFunction=function(e){return"function"===l.type(e)},l.Extend=function(){var e,t,n,o,i,a,r=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[s]||{},s++),"object"!=typeof r&&"function"!=typeof r&&(r={}),s===c&&(r=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)n=r[t],o=e[t],r!==o&&(u&&o&&(l.isPlainObject(o)||(i=l.isArray(o)))?(i?(i=!1,a=n&&l.isArray(n)?n:[]):a=n&&l.isPlainObject(n)?n:{},r[t]=l.Extend(u,a,o)):void 0!==o&&(r[t]=o));return r};var c={SYSTEM_LANGUAGE:{MODAL:{TIPS:"提示",OK:"确定",CANCEL:"取消"},IMG:{IMGTIPS:"图片格式不正确或者跨域请求！",IMGPlaceholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},LOADING:["正在加载..."]},WrapperArea:"WrapperArea",id:"zh-cn"};e.kelatlocale?e.kelatlocale=l.Extend(!0,c,e.kelatlocale):e.kelatlocale=c;var u={website:"http://git.oschina.net/ficozhe/K-UI",message:"您使用期已到！",ImgPlaceholder:kelatlocale.SYSTEM_LANGUAGE.IMG.IMGPlaceholder,ImgLazyLoadThreshold:0,ImgLazyLoadSequential:!0,ImgTips:kelatlocale.SYSTEM_LANGUAGE.IMG.IMGTIPS,WrapperArea:kelatlocale.WrapperArea,LayerIndex:"2000",LoadingTitle:kelatlocale.SYSTEM_LANGUAGE.LOADING,LoadingHtml:'<span class="Loading LoadingWhite"></span>',ModalTitle:kelatlocale.SYSTEM_LANGUAGE.MODAL.TIPS,ModalButtonOk:kelatlocale.SYSTEM_LANGUAGE.MODAL.OK,ModalButtonCancel:kelatlocale.SYSTEM_LANGUAGE.MODAL.CANCEL,isModalPopover:!1,swipeout:!0,swipeoutActionsNoFold:!1,swipeoutNoFollow:!1,screenSizes:{xs:480,sm:768,md:992,lg:1200},RegExpr:{rnotwhite:/\S+/g,rclass:/[\t\r\n\f]/g,trim:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,device:{android:/(Android);?[\s\/]+([\d.]+)?/,ipad:/(iPad).*OS\s([\d_]+)/,ipod:/(iPod)(.*OS\s([\d_]+))?/,iphone:/(iPhone\sOS)\s([\d_]+)/},validate:{email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,phone:/^((\(\d{3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}$/,mobile:/^1[34578]\d{9}$/,number:/^\d+$/,integer:/^[-\+]?\d+$/,english:/^[A-Za-z]+$/,chinese:/^[\u0391-\uFFE5]+$/,date:/^(\d{4})年(0\d{1}|1[0-2])月(0\d{1}|[12]\d{1}|3[01])日$/}},support:function(){var t=["mousedown","mousemove","mouseup"];e.navigator.pointerEnabled?t=["pointerdown","pointermove","pointerup"]:e.navigator.msPointerEnabled&&(t=["MSPointerDown","MSPointerMove","MSPointerUp"]);var n={};return n.touch=!!("ontouchstart"in e||e.DocumentTouch&&document instanceof DocumentTouch),n.rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,n.desktopEvents=t,n.onClick=n.touch?"tap":"click",n.GetPageScroll=function(){var t="",n="";return e.pageYOffset?(n=e.pageYOffset,t=e.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(n=document.documentElement.scrollTop,t=document.documentElement.scrollLeft):document.body&&(n=document.body.scrollTop,t=document.body.scrollLeft),{X:t,Y:n}},n.GetPageSize=function(){var t="",n="";e.innerHeight&&e.scrollMaxY?(t=e.innerWidth+e.scrollMaxX,n=e.innerHeight+e.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(t=document.body.scrollWidth,n=document.body.scrollHeight):document.body&&(t=document.body.offsetWidth,n=document.body.offsetHeight);var o="",i="";return e.innerHeight?(o=e.innerWidth,i=e.innerHeight):document.documentElement&&document.documentElement.clientHeight?(o=document.documentElement.clientWidth,i=document.documentElement.clientHeight):document.body&&(o=document.body.clientWidth,i=document.body.clientHeight),{PageW:t<o?o:t,PageH:n<i?i:n,WinW:o,WinH:i}},n}()};if(function(){if(!e.isHello){var t="kelat.js 1.2.4 - ✰ KUI ✰ ",n="\n\n如有任何意见和建议可发送邮件至 ficozh@163.com\n\n",o="background:#0CF;padding:5px 0";if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["%c %c "+t+" %c %c "+u.website+" %c %c "+n,o,"background:#111;color:#FFF;padding:5px 0",o,"background:#CFF;padding:5px 0",o,"color:#000"];e.console.log.apply(console,i)}else e.console&&e.console.log(t+u.website+n);e.isHello=!0}}(),!e.kelat){e.kelat=function(t,n){return new e.kelat.kelatDom(t,n)},e.kelat.version="1.2.4";var d=function(){var t=function(e){var t=this,n=0;for(n=0;n<e.length;n++)t[n]=e[n];return t.length=e.length,this},o=function(n,o){var i=[],a=0;if(n&&!o&&n instanceof t)return n;if(n)if("string"==typeof n){var r,s,l;if(n=l=n.replace(u.RegExpr.trim,""),l.indexOf("<")>=0&&l.indexOf(">")>=0){var c="div";for(0===l.indexOf("<li")&&(c="ul"),0===l.indexOf("<tr")&&(c="tbody"),0!==l.indexOf("<td")&&0!==l.indexOf("<th")||(c="tr"),0===l.indexOf("<tbody")&&(c="table"),0===l.indexOf("<option")&&(c="select"),s=document.createElement(c),s.innerHTML=l,a=0;a<s.childNodes.length;a++)i.push(s.childNodes[a])}else for(r=o||"#"!==n[0]||n.match(/[ .<>:~]/)?(o||document).querySelectorAll(n):[document.getElementById(n.split("#")[1])],a=0;a<r.length;a++)r[a]&&i.push(r[a])}else if(n.nodeType||n===e||n===document)i.push(n);else if(n.length>0&&n[0].nodeType)for(a=0;a<n.length;a++)i.push(n[a]);return new t(i)};t.prototype={addClass:function(e){var t,o,i,a,r,s,l,c=0;if("function"==typeof e)return this.each(function(t){p(this).addClass(e.call(this,t,n(this)))});if("string"==typeof e&&e)for(t=e.match(u.RegExpr.rnotwhite)||[];o=this[c++];)if(a=n(o),i=1===o.nodeType&&(" "+a+" ").replace(u.RegExpr.rclass," ")){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");l=i.replace(u.RegExpr.trim,""),a!==l&&o.setAttribute("class",l)}return this},removeClass:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)for(var o=0;o<this.length;o++)void 0!==this[o].classList&&this[o].classList.remove(t[n]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)for(var o=0;o<this.length;o++)void 0!==this[o].classList&&this[o].classList.toggle(t[n]);return this},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n++)if(2===arguments.length)this[n].setAttribute(e,t);else for(var o in e)this[n][o]=e[o],this[n].setAttribute(o,e[o]);return this},removeAttr:function(e){for(var t=0;t<this.length;t++)this[t].removeAttribute(e);return this},prop:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0][e]:void 0;for(var n=0;n<this.length;n++)if(2===arguments.length)this[n][e]=t;else for(var o in e)this[n][o]=e[o];return this},data:function(e,t){if(void 0!==t){for(var n=0;n<this.length;n++){var o=this[n];o.kelatDomElementDataStorage||(o.kelatDomElementDataStorage={}),o.kelatDomElementDataStorage[e]=t}return this}if(this[0]){if(this[0].kelatDomElementDataStorage&&e in this[0].kelatDomElementDataStorage)return this[0].kelatDomElementDataStorage[e];var i=this[0].getAttribute("data-"+e);return i?i:void 0}},removeData:function(e){for(var t=0;t<this.length;t++){var n=this[t];n.kelatDomElementDataStorage&&n.kelatDomElementDataStorage[e]&&(n.kelatDomElementDataStorage[e]=null,delete n.kelatDomElementDataStorage[e])}},dataset:function(){var e=this[0];if(e){var t={};if(e.dataset)for(var n in e.dataset)t[n]=e.dataset[n];else for(var i=0;i<e.attributes.length;i++){var a=e.attributes[i];a.name.indexOf("data-")>=0&&(t[o.toCamelCase(a.name.split("data-")[1])]=a.value)}for(var r in t)"false"===t[r]?t[r]=!1:"true"===t[r]?t[r]=!0:parseFloat(t[r])===1*t[r]&&(t[r]=1*t[r]);return t}},val:function(e){if(void 0===e)return this[0]?this[0].value:void 0;for(var t=0;t<this.length;t++)this[t].value=e;return this},transform:function(e){for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=e}return this},on:function(e,t,n,i){function a(e){var i=e.target;if(o(i).is(t))n.call(i,e);else for(var a=o(i).parents(),r=0;r<a.length;r++)o(a[r]).is(t)&&n.call(a[r],e)}var r,s,l=e.split(" ");for(r=0;r<this.length;r++)if("function"==typeof t||t===!1)for("function"==typeof t&&(n=arguments[1],i=arguments[2]||!1),s=0;s<l.length;s++)this[r].addEventListener(l[s],n,i);else for(s=0;s<l.length;s++)this[r].kelatDomLiveListeners||(this[r].kelatDomLiveListeners=[]),this[r].kelatDomLiveListeners.push({listener:n,liveListener:a}),this[r].addEventListener(l[s],a,i);return this},off:function(e,t,n,o){for(var i=e.split(" "),a=0;a<i.length;a++)for(var r=0;r<this.length;r++)if("function"==typeof t||t===!1)"function"==typeof t&&(n=arguments[1],o=arguments[2]||!1),this[r].removeEventListener(i[a],n,o);else if(this[r].kelatDomLiveListeners)for(var s=0;s<this[r].kelatDomLiveListeners.length;s++)this[r].kelatDomLiveListeners[s].listener===n&&this[r].removeEventListener(i[a],this[r].kelatDomLiveListeners[s].liveListener,o);return this},once:function(e,t,n,o){function i(r){n.call(r.target,r),a.off(e,t,i,o)}var a=this;return"function"==typeof t&&(n=arguments[1],o=arguments[2],t=!1),a.on(e,t,i,o)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},trigger:function(e,t){for(var n=e.split(" "),o=0;o<n.length;o++)for(var i=0;i<this.length;i++){var a;try{a=new CustomEvent(n[o],{detail:t,bubbles:!0,cancelable:!0})}catch(e){a=document.createEvent("Event"),a.initEvent(n[o],!0,!0),a.detail=t}this[i].dispatchEvent(a)}return this},transitionEnd:function(e){function t(a){if(a.target===this)for(e.call(this,a),n=0;n<o.length;n++)i.off(o[n],t)}var n,o=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i=this;if(e)for(n=0;n<o.length;n++)i.on(o[n],t);return this},animationEnd:function(e){function t(a){for(e(a),n=0;n<o.length;n++)i.off(o[n],t)}var n,o=["webkitAnimationEnd","OAnimationEnd","MSAnimationEnd","animationend"],i=this;if(e)for(n=0;n<o.length;n++)i.on(o[n],t);return this},width:function(){return this[0]===e?e.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},height:function(){return this[0]===e?e.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(this.length>0){var t=this[0],n=t.getBoundingClientRect(),o=document.body,i=t.clientTop||o.clientTop||0,a=t.clientLeft||o.clientLeft||0,r=e.pageYOffset||t.scrollTop,s=e.pageXOffset||t.scrollLeft;return{top:n.top+r-i,left:n.left+s-a}}return null},hide:function(){for(var e=0;e<this.length;e++)this[e].style.display="none";return this},show:function(){for(var e=0;e<this.length;e++)this[e].style.display="block";return this},styles:function(){return this[0]?e.getComputedStyle(this[0],null):void 0},css:function(t,n){var o;if(1===arguments.length){if("string"!=typeof t){for(o=0;o<this.length;o++)for(var i in t)this[o].style[i]=t[i];return this}if(this[0])return e.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"==typeof t){for(o=0;o<this.length;o++)this[o].style[t]=n;return this}return this},each:function(e){for(var t=0;t<this.length;t++)e.call(this[t],t,this[t]);return this},filter:function(e){for(var n=[],o=this,i=0;i<o.length;i++)e.call(o[i],i,o[i])&&n.push(o[i]);return new t(n)},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t++)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t++)this[t].textContent=e;return this},is:function(n){if(!this[0]||void 0===n)return!1;var i,a;if("string"==typeof n){var r=this[0];if(r===document)return n===document;if(r===e)return n===e;if(r.matches)return r.matches(n);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector)return r.mozMatchesSelector(n);if(r.msMatchesSelector)return r.msMatchesSelector(n);for(i=o(n),a=0;a<i.length;a++)if(i[a]===this[0])return!0;return!1}if(n===document)return this[0]===document;if(n===e)return this[0]===e;if(n.nodeType||n instanceof t){for(i=n.nodeType?[n]:n,a=0;a<i.length;a++)if(i[a]===this[0])return!0;return!1}return!1},indexOf:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t},index:function(){if(this[0]){for(var e=this[0],t=0;null!==(e=e.previousSibling);)1===e.nodeType&&t++;return t}},eq:function(e){if(void 0===e)return this;var n,o=this.length;return e>o-1?new t([]):e<0?(n=o+e,new t(n<0?[]:[this[n]])):new t([this[e]])},append:function(e){var n,o;for(n=0;n<this.length;n++)if("string"==typeof e){var i=document.createElement("div");for(i.innerHTML=e;i.firstChild;)this[n].appendChild(i.firstChild)}else if(e instanceof t)for(o=0;o<e.length;o++)this[n].appendChild(e[o]);else this[n].appendChild(e);return this},appendTo:function(e){return o(e).append(this),this},prepend:function(e){var n,o;for(n=0;n<this.length;n++)if("string"==typeof e){var i=document.createElement("div");for(i.innerHTML=e,o=i.childNodes.length-1;o>=0;o--)this[n].insertBefore(i.childNodes[o],this[n].childNodes[0])}else if(e instanceof t)for(o=0;o<e.length;o++)this[n].insertBefore(e[o],this[n].childNodes[0]);else this[n].insertBefore(e,this[n].childNodes[0]);return this},prependTo:function(e){return o(e).prepend(this),this},insertBefore:function(e){for(var t=o(e),n=0;n<this.length;n++)if(1===t.length)t[0].parentNode.insertBefore(this[n],t[0]);else if(t.length>1)for(var i=0;i<t.length;i++)t[i].parentNode.insertBefore(this[n].cloneNode(!0),t[i])},insertAfter:function(e){for(var t=o(e),n=0;n<this.length;n++)if(1===t.length)t[0].parentNode.insertBefore(this[n],t[0].nextSibling);else if(t.length>1)for(var i=0;i<t.length;i++)t[i].parentNode.insertBefore(this[n].cloneNode(!0),t[i].nextSibling)},next:function(e){return new t(this.length>0?e?this[0].nextElementSibling&&o(this[0].nextElementSibling).is(e)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(e){var n=[],i=this[0];if(!i)return new t([]);for(;i.nextElementSibling;){var a=i.nextElementSibling;e?o(a).is(e)&&n.push(a):n.push(a),i=a}return new t(n)},prev:function(e){return new t(this.length>0?e?this[0].previousElementSibling&&o(this[0].previousElementSibling).is(e)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(e){var n=[],i=this[0];if(!i)return new t([]);for(;i.previousElementSibling;){var a=i.previousElementSibling;e?o(a).is(e)&&n.push(a):n.push(a),i=a}return new t(n)},siblings:function(e){return this.nextAll(e).add(this.prevAll(e))},parent:function(e){for(var t=[],n=0;n<this.length;n++)null!==this[n].parentNode&&(e?o(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return o(o.unique(t))},parents:function(e){for(var t=[],n=0;n<this.length;n++)for(var i=this[n].parentNode;i;)e?o(i).is(e)&&t.push(i):t.push(i),i=i.parentNode;return o(o.unique(t))},closest:function(e){var n=this;return void 0===e?new t([]):(n.is(e)||(n=n.parents(e).eq(0)),n)},find:function(e){for(var n=[],o=0;o<this.length;o++)for(var i=this[o].querySelectorAll(e),a=0;a<i.length;a++)n.push(i[a]);return new t(n)},children:function(e){for(var n=[],i=0;i<this.length;i++)for(var a=this[i].childNodes,r=0;r<a.length;r++)e?1===a[r].nodeType&&o(a[r]).is(e)&&n.push(a[r]):1===a[r].nodeType&&n.push(a[r]);return new t(o.unique(n))},remove:function(){for(var e=0;e<this.length;e++)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},detach:function(){return this.remove()},add:function(){var e,t,n=this;for(e=0;e<arguments.length;e++){var i=o(arguments[e]);for(t=0;t<i.length;t++)n[n.length]=i[t],n.length++}return n},ready:function(t){function n(){document.removeEventListener("DOMContentLoaded",n),e.removeEventListener("load",n),o||(o=!0,t&&t())}var o=!1;"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e.setTimeout(n):(document.addEventListener("DOMContentLoaded",n),e.addEventListener("load",n))},trim:function(e){return"string"==typeof e&&s?e.replace(u.RegExpr.trim,""):""},empty:function(){for(var e=0;e<this.length;e++){var t=this[e];if(1===t.nodeType){for(var n=0;n<t.childNodes.length;n++)t.childNodes[n].parentNode&&t.childNodes[n].parentNode.removeChild(t.childNodes[n]);t.textContent=""}}return this}},function(){function e(e){t.prototype[e]=function(t,n,a){var r;if(void 0===t){for(r=0;r<this.length;r++)i.indexOf(e)<0&&(e in this[r]?this[r][e]():o(this[r]).trigger(e));return this}return this.on(e,t,n,a)}}for(var n="click blur focus focusin focusout keyup keydown keypress submit change mousedown mousemove mouseup mouseenter mouseleave mouseout mouseover touchstart touchend touchmove resize scroll".split(" "),i="resize scroll".split(" "),a=0;a<n.length;a++)e(n[a])}();var i={};o.ajaxSetup=function(e){e.type&&(e.method=e.type),o.each(e,function(e,t){i[e]=t})};var a=0;return o.ajax=function(t){function n(e,n,a){var r=arguments;e&&o(document).trigger(e,n),a&&(a in i&&i[a](r[3],r[4],r[5],r[6]),t[a]&&t[a](r[3],r[4],r[5],r[6]))}var r={method:"GET",data:!1,async:!0,cache:!0,processData:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},s=["beforeSend","error","complete","success","statusCode"];t.type&&(t.method=t.type),o.each(i,function(e,t){s.indexOf(e)<0&&(r[e]=t)}),o.each(r,function(e,n){e in t||(t[e]=n)}),t.url||(t.url=e.location.toString());var l=t.url.indexOf("?")>=0?"&":"?",c=t.method.toUpperCase();if(("GET"===c||"HEAD"===c||"OPTIONS"===c||"DELETE"===c)&&t.data){var u;u="string"==typeof t.data?t.data.indexOf("?")>=0?t.data.split("?")[1]:t.data:o.serializeObject(t.data),u.length&&(t.url+=l+u,"?"===l&&(l="&"))}if("json"===t.dataType&&t.url.indexOf("callback=")>=0){var d,p="kelat_jsonp_"+Date.now()+a++,f=t.url.split("callback="),h=f[0]+"callback="+p;if(f[1].indexOf("&")>=0){var g=f[1].split("&").filter(function(e){return e.indexOf("=")>0}).join("&");g.length>0&&(h+="&"+g)}var v=document.createElement("script");return v.type="text/javascript",v.onerror=function(){clearTimeout(d),n(void 0,void 0,"error",null,"scripterror")},v.src=h,e[p]=function(t){clearTimeout(d),n(void 0,void 0,"success",t),v.parentNode.removeChild(v),v=null,delete e[p]},document.querySelector("head").appendChild(v),void(t.timeout>0&&(d=setTimeout(function(){v.parentNode.removeChild(v),v=null,n(void 0,void 0,"error",null,"timeout")},t.timeout)))}"GET"!==c&&"HEAD"!==c&&"OPTIONS"!==c&&"DELETE"!==c||t.cache===!1&&(t.url+=l+"_nocache="+Date.now());var m=new XMLHttpRequest;m.requestUrl=t.url,m.requestParameters=t,m.open(c,t.url,t.async,t.user,t.password);var C=null;if(("POST"===c||"PUT"===c||"PATCH"===c)&&t.data)if(t.processData){var b=[ArrayBuffer,Blob,Document,FormData];if(b.indexOf(t.data.constructor)>=0)C=t.data;else{var y="---------------------------"+Date.now().toString(16);"multipart/form-data"===t.contentType?m.setRequestHeader("Content-Type","multipart/form-data; boundary="+y):m.setRequestHeader("Content-Type",t.contentType),C="";var k=o.serializeObject(t.data);if("multipart/form-data"===t.contentType){y="---------------------------"+Date.now().toString(16),k=k.split("&");for(var T=[],w=0;w<k.length;w++)T.push('Content-Disposition: form-data; name="'+k[w].split("=")[0]+'"\r\n\r\n'+k[w].split("=")[1]+"\r\n");C="--"+y+"\r\n"+T.join("--"+y+"\r\n")+"--"+y+"--\r\n"}else C="application/x-www-form-urlencoded"===t.contentType?k:k.replace(/&/g,"\r\n")}}else C=t.data;t.headers&&o.each(t.headers,function(e,t){m.setRequestHeader(e,t)}),void 0===t.crossDomain&&(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&RegExp.$2!==e.location.host),t.crossDomain||m.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.xhrFields&&o.each(t.xhrFields,function(e,t){m[e]=t});var x;return m.onload=function(e){if(x&&clearTimeout(x),m.status>=200&&m.status<300||0===m.status){var o;if("json"===t.dataType)try{o=JSON.parse(m.responseText),n("ajaxSuccess",{xhr:m},"success",o,m.status,m)}catch(e){n("ajaxError",{xhr:m,parseerror:!0},"error",m,"parseerror")}else o="text"===m.responseType||""===m.responseType?m.responseText:m.response,n("ajaxSuccess",{xhr:m},"success",o,m.status,m)}else n("ajaxError",{xhr:m},"error",m,m.status);t.statusCode&&(i.statusCode&&i.statusCode[m.status]&&i.statusCode[m.status](m),t.statusCode[m.status]&&t.statusCode[m.status](m)),n("ajaxComplete",{xhr:m},"complete",m,m.status)},m.onerror=function(e){x&&clearTimeout(x),n("ajaxError",{xhr:m},"error",m,m.status)},n("ajaxStart",{xhr:m},"start",m),n(void 0,void 0,"beforeSend",m),m.send(C),t.timeout>0&&(m.onabort=function(){x&&clearTimeout(x)},x=setTimeout(function(){m.abort(),n("ajaxError",{xhr:m,timeout:!0},"error",m,"timeout"),n("ajaxComplete",{xhr:m,timeout:!0},"complete",m,"timeout")},t.timeout)),m},function(){function e(e){o[e]=function(t,n,i){return o.ajax({url:t,method:"post"===e?"POST":"GET",data:"function"==typeof n?void 0:n,success:"function"==typeof n?n:i,dataType:"getJSON"===e?"json":void 0})}}for(var t="get post getJSON".split(" "),n=0;n<t.length;n++)e(t[n])}(),o.each=function(e,n){if("object"==typeof e&&n){var o,i;if(l.isArray(e)||e instanceof t)for(o=0;o<e.length;o++)n(o,e[o]);else for(i in e)e.hasOwnProperty(i)&&n(i,e[i])}},o.unique=function(e){for(var t=[],n=0;n<e.length;n++)t.indexOf(e[n])===-1&&t.push(e[n]);return t},o.serializeObject=o.param=function(e,t){function n(e){if(t.length>0){for(var n="",o=0;o<t.length;o++)n+=0===o?t[o]:"["+encodeURIComponent(t[o])+"]";return n+"["+encodeURIComponent(e)+"]"}return encodeURIComponent(e)}function i(e){return encodeURIComponent(e)}if("string"==typeof e)return e;var a=[];t=t||[];var r;for(var s in e)if(e.hasOwnProperty(s)){var c;if(l.isArray(e[s])){c=[];for(var u=0;u<e[s].length;u++)l.isArray(e[s][u])||"object"!=typeof e[s][u]?c.push(n(s)+"[]="+i(e[s][u])):(r=t.slice(),r.push(s),r.push(u+""),c.push(o.serializeObject(e[s][u],r)));c.length>0&&a.push(c.join("&"))}else"object"==typeof e[s]?(r=t.slice(),r.push(s),""!==(c=o.serializeObject(e[s],r))&&a.push(c)):void 0!==e[s]&&""!==e[s]&&a.push(n(s)+"="+i(e[s]))}return a.join("&")},o.toCamelCase=function(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})},o.dataset=function(e){return o(e).dataset()},o.getTranslate=function(t,n){var o,i,a,r;return void 0===n&&(n="x"),a=e.getComputedStyle(t,null),e.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),r=new WebKitCSSMatrix("none"===i?"":i)):(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),o=r.toString().split(",")),"x"===n&&(i=e.WebKitCSSMatrix?r.m41:16===o.length?parseFloat(o[12]):parseFloat(o[4])),"y"===n&&(i=e.WebKitCSSMatrix?r.m42:16===o.length?parseFloat(o[13]):parseFloat(o[5])),i||0},o.requestAnimationFrame=function(t){return e.requestAnimationFrame?e.requestAnimationFrame(t):e.webkitRequestAnimationFrame?e.webkitRequestAnimationFrame(t):e.mozRequestAnimationFrame?e.mozRequestAnimationFrame(t):e.setTimeout(t,1e3/60)},o.cancelAnimationFrame=function(t){return e.cancelAnimationFrame?e.cancelAnimationFrame(t):e.webkitCancelAnimationFrame?e.webkitCancelAnimationFrame(t):e.mozCancelAnimationFrame?e.mozCancelAnimationFrame(t):e.clearTimeout(t)},o.fn=t.prototype,o.fn.scrollTo=function(e,t,n,i,a){return 4===arguments.length&&"function"==typeof i&&(a=i,i=void 0),this.each(function(){function r(e){void 0===e&&(e=+new Date),null===C&&(C=e);var t,c=Math.max(Math.min((e-C)/n,1),0),u="linear"===i?c:.5-Math.cos(c*Math.PI)/2;if(v&&(f=s+u*(d-s)),m&&(h=l+u*(p-l)),v&&d>s&&f>=d&&(g.scrollTop=d,t=!0),v&&d<s&&f<=d&&(g.scrollTop=d,t=!0),m&&p>l&&h>=p&&(g.scrollLeft=p,t=!0),m&&p<l&&h<=p&&(g.scrollLeft=p,t=!0),t)return void(a&&a());v&&(g.scrollTop=f),m&&(g.scrollLeft=h),o.requestAnimationFrame(r)}var s,l,c,u,d,p,f,h,g=this,v=t>0||0===t,m=e>0||0===e;if(void 0===i&&(i="swing"),v&&(s=g.scrollTop,n||(g.scrollTop=t)),m&&(l=g.scrollLeft,n||(g.scrollLeft=e)),n){v&&(c=g.scrollHeight-g.offsetHeight,d=Math.max(Math.min(t,c),0)),m&&(u=g.scrollWidth-g.offsetWidth,p=Math.max(Math.min(e,u),0));var C=null;v&&d===s&&(v=!1),m&&p===l&&(m=!1),o.requestAnimationFrame(r)}})},o.fn.scrollTop=function(e,t,n,o){3===arguments.length&&"function"==typeof n&&(o=n,n=void 0);var i=this;return void 0===e?i.length>0?i[0].scrollTop:null:i.scrollTo(void 0,e,t,n,o)},o.fn.scrollLeft=function(e,t,n,o){3===arguments.length&&"function"==typeof n&&(o=n,n=void 0);var i=this;return void 0===e?i.length>0?i[0].scrollLeft:null:i.scrollTo(e,void 0,t,n,o)},o}();e.kelat.kelatDom=d;var p=d;e.kelat.fn=e.kelat.prototype={rtl:"rtl"===p("body").css("direction"),support:u.support,trim:function(e){return"string"==typeof e&&s?e.replace(u.RegExpr.trim,""):""},layerBorder:function(){return[].forEach.call(document.querySelectorAll("*"),function(e){e.style.outline="1px solid #"+(~~(Math.random()*(1<<24))).toString(16)})},jsonArray:function(e){return s?JSON.stringify(e):""},escapeHTML:function(e){var t={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return e.replace(/[<>&"]/g,function(e){return t[e]})},removeHTML:function(e){return e.replace(/<.*?>/gi,"")},removeString:function(e,t){var n=new RegExp(t,"ig");return e.replace(n,"")},throttle:function(e,t,n){var o,i=null;return function(){var a=this,r=arguments,s=+new Date;clearTimeout(i),o||(o=s),s-o>=n?(e.apply(a,r),o=s):i=setTimeout(function(){e.apply(a,r)},t)}},log:function(t,n){return s&&e.console?console.log(n||"warning",": ",t):""},range:function(e,t){return Math.floor(Math.random()*(e-t+1))+t},ls:e.localStorage,device:function(){var t={},n=navigator.userAgent,o=n.match(u.RegExpr.device.android),i=n.match(u.RegExpr.device.ipad),a=n.match(u.RegExpr.device.ipod),r=!i&&n.match(u.RegExpr.device.iphone);if(t.browse=t.ios=t.android=t.iphone=t.ipad=t.androidChrome=!1,o&&(t.os="android",t.osVersion=o[2],t.android=!0,t.androidChrome=n.toLowerCase().indexOf("chrome")>=0),(i||r||a)&&(t.os="ios",t.ios=!0),r&&!a&&(t.osVersion=r[2].replace(/_/g,"."),t.iphone=!0),i&&(t.osVersion=i[2].replace(/_/g,"."),t.ipad=!0),a&&(t.osVersion=a[3]?a[3].replace(/_/g,"."):null,t.iphone=!0),t.ios&&t.osVersion&&n.indexOf("Version/")>=0&&"10"===t.osVersion.split(".")[0]&&(t.osVersion=n.toLowerCase().split("version/")[1].split(" ")[0]),t.webView=(r||i||a)&&n.match(/.*AppleWebKit(?!.*Safari)/i),t.os&&"ios"===t.os){var l=t.osVersion.split(".");t.minimalUi=!t.webView&&(a||r)&&(1*l[0]==7?1*l[1]>=1:1*l[0]>7)&&p('meta[name="viewport"]').length>0&&p('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}p(document).ready(function(){var e=u.support.GetPageSize();t.statusBar=!1,t.webView&&e.WinW*e.WinH==screen.width*screen.height?t.statusBar=!0:t.statusBar=!1});var c=[];if(t.pixelRatio=e.devicePixelRatio||1,c.push("PixelRatio"+Math.floor(t.pixelRatio)),t.pixelRatio>=2&&c.push("Retina"),t.os&&(c.push(t.os,t.os+"-"+t.osVersion.split(".")[0],t.os+"-"+t.osVersion.replace(/\./g,"-")),"ios"===t.os))for(var d=parseInt(t.osVersion.split(".")[0],10),f=d-1;f>=6;f--)c.push("iosGt"+f);return t.statusBar?c.push("WithStatusbarOverlay"):p("html").removeClass("WithStatusbarOverlay"),c.length>0&&p("html").addClass(c.join(" ")),t.browse=n.indexOf("MSIE")>=0?"ie":n.indexOf("Firefox")>=0?"Firefox":n.indexOf("Chrome")>=0?"Chrome":n.indexOf("Edge")>=0?"Edge":n.indexOf("Opera")>=0?"Opera":n.indexOf("Safari")>=0?"Safari":n.indexOf("Netscape")>=0&&"Netscape",s?t:""}(),touchEvents:{start:u.support.touch?"touchstart":u.support.desktopEvents[0],move:u.support.touch?"touchmove":u.support.desktopEvents[1],end:u.support.touch?"touchend":u.support.desktopEvents[2]},touches:function(t,n,o,i,a){function r(t){var t=t||e.event||arguments.callee.caller.arguments[0];switch(t.preventDefault(),u.support.touch&&(c.touchLength=t.targetTouches.length||0),t.type){case f.touchEvents.start:l=!0,c.startX=Number("touchstart"===t.type?t.targetTouches[0].pageX:t.pageX),c.startY=Number("touchstart"===t.type?t.targetTouches[0].pageY:t.pageY),o(c,d);break;case f.touchEvents.end:l=!1,c.diffX=Number(c.currentX-c.startX),c.diffY=Number(c.currentY-c.startY),a(c,d);break;case f.touchEvents.move:if(!l)return;c.currentX=Number("touchmove"===t.type?t.targetTouches[0].pageX:t.pageX),c.currentY=Number("touchmove"===t.type?t.targetTouches[0].pageY:t.pageY),Number(c.currentX-c.startX)>0?(c.elsX=Number(c.currentX-c.startX-c.diffX),c.elsY=Number(c.currentY-c.startY-c.diffY)):(c.elsX=Number(c.currentX-c.startX+c.diffX),c.elsY=Number(c.currentY-c.startY+c.diffY)),i(c,d)}}var l=!1,c={startX:0,startY:0,currentX:0,currentY:0,diffX:0,diffY:0,elsX:0,elsY:0},d=t,p=n?"off":"on";return d[p](f.touchEvents.start,r),d[p](f.touchEvents.move,r),d[p](f.touchEvents.end,r),s?c:""}};var f=e.kelat.fn;e.kelat.extend=p.extend=p.fn.extend=f.extend=l.Extend,e.kelat.extend({expando:"kelat"+("1.2.4"+Math.random()).replace(/\D/g,""),noop:function(){},ajax:p.ajax,ajaxSetup:p.ajaxSetup,get:p.get,post:p.post,getJSON:p.getJSON,isString:l.isString,isFunction:l.isFunction,isNumber:l.isNumber,isArray:l.isArray,isWindow:l.isWindow,isPlainObject:l.isPlainObject,type:l.type,each:p.each}),function(e){var t={},n=function(){return!0},o=function(){return!1},i={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.click=t.mousedown=t.mouseup=t.mousemove="MouseEvents";var a=function(t,a){return!a&&t.isDefaultPrevented||(a||(a=t),e.each(i,function(e,i){var r=a[e];t[e]=function(){return this[i]=n,r&&r.apply(a,arguments)},t[i]=o}),(void 0!==a.defaultPrevented?a.defaultPrevented:"returnValue"in a?a.returnValue===!1:a.getPreventDefault&&a.getPreventDefault())&&(t.isDefaultPrevented=n)),t};e.fn.trigger=function(t,n){return t=kelat.isString(t)||kelat.isPlainObject(t)?e.Event(t):a(t),t._args=n,this.each(function(){t.type in focus&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var o,i;return this.each(function(a,r){o=createProxy(isString(t)?e.Event(t):t),o._args=n,o.target=r,e.each(findHandlers(r,t.type||t),function(e,t){if(i=t.proxy(o),o.isImmediatePropagationStopped())return!1})}),i},e.Event=function(e,n){kelat.isString(e)||(n=e,e=n.type);var o=document.createEvent(t[e]||"Events"),i=!0;if(n)for(var r in n)"bubbles"===r?i=!!n[r]:o[r]=n[r];return o.initEvent(e,i,!0),a(o)}}(p),function(t){function n(e,t,n,o){return Math.abs(e-t)>=Math.abs(n-o)?e-t>0?"Left":"Right":n-o>0?"Up":"Down"}function o(){p=null,h.last&&(h.el.trigger("longTap"),h={})}function i(){p&&clearTimeout(p),p=null}function a(){l&&clearTimeout(l),
c&&clearTimeout(c),d&&clearTimeout(d),p&&clearTimeout(p),l=c=d=p=null,h={}}function r(e){return("touch"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function s(e,t){return e.type==="pointer"+t||e.type==="mouse"+t||e.type.toLowerCase()==="mspointer"+t}var l,c,d,p,f,h={};t(document).ready(function(){var g,v,m,C,b,y=0,k=0;"MSGesture"in e&&(f=new MSGesture,f.target=document.body),t(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&void 0!==h.el&&(h.el.trigger("swipe"),h.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(e){(C=s(e,"down"))&&!r(e)||(m=C?e:e.touches[0],e.touches&&1===e.touches.length&&h.x2&&(h.x2=void 0,h.y2=void 0),b=e.targetTouches,g=Date.now(),v=g-(h.last||g),h.el=t("tagName"in m.target?m.target:m.target.parentNode),l&&clearTimeout(l),h.x1=m.pageX,h.y1=m.pageY,v>0&&v<=250&&(h.isDoubleTap=!0),h.last=g,p=setTimeout(o,750),f&&C&&f.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(C=s(e,"move"))&&!r(e)||(m=C?e:e.touches[0],i(),h.x2=m.pageX,h.y2=m.pageY,y+=Math.abs(h.x1-h.x2),k+=Math.abs(h.y1-h.y2))}).on("touchend MSPointerUp pointerup",function(e){if((C=s(e,"up"))&&!r(e)){var o=t(e.target);return void(o&&!u.support.touch&&o.trigger("tap"))}i(),h.x2&&Math.abs(h.x1-h.x2)>30||h.y2&&Math.abs(h.y1-h.y2)>30?d=setTimeout(function(){void 0!==h.el&&(h.el.trigger("swipe"),h.el.trigger("swipe"+n(h.x1,h.x2,h.y1,h.y2)),h={})},0):"last"in h&&(y<30&&k<30?c=setTimeout(function(){try{var e=t.Event("tap");e.cancelTouch=a,e.targetTouches=b,h.el.trigger(e),h.isDoubleTap?(h.el&&h.el.trigger("doubleTap"),h={}):l=setTimeout(function(){l=null,h.el&&h.el.trigger("singleTap"),h={}},250)}catch(e){return}},0):h={},y=k=0)}).on("touchcancel MSPointerCancel pointercancel",a),t(e).on("scroll",a)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return t?this.on(e,t):this.trigger(e)}})}(p),e.kelat.defaults={shift:0},kelat.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){i["[object "+t+"]"]=t.toLowerCase()}),l.Bubbles=function(t,n,o){var t=e.event||arguments.callee.caller.arguments[0],i=t.target||t.srcElement,a=[];return kelat.each(n.toUpperCase().split(" "),function(e,t){a.push(i.tagName!==t&&s?0:1)}),a.indexOf(1)===-1&&s?o():null},e.kelat.bubbles=l.Bubbles,l.Validate=function(e,t){var n="";return"regexp"===kelat.type(t)?(n=t,t=void 0):n=u.RegExpr.validate[t],!(!n.test(e)||!s)},e.kelat.validate=l.Validate,l.GetUrlParams=function(t){t=t||{};var n={},o=t.url?t.url:e.location.href,i=o.indexOf("?")+1,a=o.substring(i);if(0!==i)if(t.type){var r=a.indexOf(t.type[0])+t.type[0].length;n[t.type[1]]=a.substring(r)}else{a=a.replace(/%26/gi,"&").replace(/%2F/gi,"/").replace(/%3D/gi,"=").replace(/%2B/gi,"+").replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,"+").replace(/\?/g,"&").replace(/\#\//g,"&");for(var l=a.split("&"),c=0;c<l.length;c++){var u=l[c].split("=");n[u[0]]=u[1]}}return s?n:null},e.kelat.getUrlParams=l.GetUrlParams,l.LoadJC=function(e,t,n){if(void 0!==e&&s){var o=document.getElementsByTagName("head")[0];if("js"===t){var i=document.createElement("script");i.src=e,i.type="text/javascript",o.appendChild(i),n&&(i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||n()})}else if("css"===t){var a=document.createElement("link");a.href=e,a.rel="stylesheet",a.type="text/css",o.appendChild(a)}}return this},e.kelat.loadJC=l.LoadJC,l.Glint=function(e){var t=p(e),n=["#DD7886","#FBC7BB","#F4E4C9","#DD7886","#FBC7BB","#F4E4C9","#FFF"],o=0,i=n.length;!function e(){i>++o?(t.css("background",n[o]),setTimeout(e,80)):o=0}()},e.kelat.glint=l.Glint,l.InitPullToRefresh=function(e){function t(e){if(c){if(!f.device.android)return;if("targetTouches"in e&&e.targetTouches.length>1)return}v=p(this),v.hasClass("Refresh")||(u=!1,T=!1,c=!0,d=void 0,b=void 0,"touchstart"===e.type&&(r=e.targetTouches[0].identifier),w.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,w.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,g=+new Date)}function n(e){if(c){var t,n,o;if("touchmove"===e.type){if(r&&e.touches)for(var i=0;i<e.touches.length;i++)e.touches[i].identifier===r&&(o=e.touches[i]);o||(o=e.targetTouches[0]),t=o.pageX,n=o.pageY}else t=e.pageX,n=e.pageY;if(t&&n){if(void 0===d&&(d=!!(d||Math.abs(n-w.y)>Math.abs(t-w.x))),!d)return void(c=!1);if(C=p("body").scrollTop(),void 0===b&&0!==C&&(b=!0),!u){if(v.removeClass("transitioning"),C>v[0].offsetHeight)return void(c=!1);k&&(y=v.attr("data-distance"),y.indexOf("%")>=0&&(y=v[0].offsetHeight*parseInt(y,10)/100)),M=v.hasClass("Refresh")?y:0,S=v[0].scrollHeight===v[0].offsetHeight||!f.device.ios}if(u=!0,!((h=n-w.y)>0&&C<=0||C<0))return T=!1,v.removeClass("PullUp PullDown"),void(x=!1);f.device.ios&&parseInt(f.device.osVersion.split(".")[0],10)>7&&0===C&&!b&&(S=!0),S&&(e.preventDefault(),m=Math.pow(h,.85)+M,v.transform("translate3d(0,"+m+"px,0)")),S&&Math.pow(h,.85)>y||!S&&h>=2*y?(x=!0,v.addClass("PullUp").removeClass("PullDown")):(x=!1,v.removeClass("PullUp").addClass("PullDown")),T||(v.trigger("pullstart"),T=!0),v.trigger("pullmove",{event:e,scrollTop:C,translate:m,touchesDiff:h})}}}function o(e){if(!("touchend"===e.type&&e.changedTouches&&e.changedTouches.length>0&&r&&e.changedTouches[0].identifier!==r)){if(!c||!u)return c=!1,void(u=!1);m&&(v.addClass("transitioning"),m=0),v.transform(""),x?(v.addClass("Refresh"),v.trigger("refresh",{done:function(){l.PullToRefreshDone(v)}})):v.removeClass("PullDown"),c=!1,u=!1,T&&v.trigger("pullend")}}function i(){a.off(f.touchEvents.start,t),a.off(f.touchEvents.move,n),a.off(f.touchEvents.end,o)}var a=p(e);if(a.hasClass("PullToRefreshContent")||(a=a.find(".PullToRefreshContent")),a&&0!==a.length&&s){var r,c,u,d,h,g,v,m,C,b,y,k,T,w={},x=!1,S=!1,M=0,E=a.hasClass("Wrapper")?a:a.parents(".Wrapper"),O=!1;E.find(".NavBar").length>0&&(O=!0),O||a.addClass("PullToRefreshNoNavbar"),v=a,v.attr("data-distance")?k=!0:y=44,a.on(f.touchEvents.start,t),a.on(f.touchEvents.move,n),a.on(f.touchEvents.end,o),a[0].KLTDestroyPullToRefresh=i}},l.PullToRefreshDone=function(e){e=p(e),0===e.length&&(e=p(".PullToRefreshContent.Refresh")),e.removeClass("Refresh").addClass("transitioning"),e.transitionEnd(function(){e.removeClass("transitioning PullUp PullDown"),e.trigger("refreshdone")})},l.PullToRefreshTrigger=function(e){e=$(e),0===e.length&&(container=$(".PullToRefreshContent")),e.hasClass("Refresh")||(e.addClass("transitioning Refresh"),e.trigger("refresh",{done:function(){l.PullToRefreshDone(e)}}))},l.DestroyPullToRefresh=function(e){e=$(e);var t=e.hasClass("PullToRefreshContent")?e:e.find(".PullToRefreshContent");0!==t.length&&t[0].KLTDestroyPullToRefresh&&t[0].KLTDestroyPullToRefresh()},e.kelat.pullToRefreshDone=l.PullToRefreshDone,e.kelat.initPullToRefresh=l.InitPullToRefresh,e.kelat.pullToRefreshTrigger=l.PullToRefreshTrigger,e.kelat.destroyPullToRefresh=l.DestroyPullToRefresh,l.isInfiniteScroll=!0,l.scrollCurrent=0,l.HandleInfiniteScroll=function(){var e=p(".InfiniteScroll");if(l.isInfiniteScroll&&e.length>0){var t=e[0].offsetHeight,n=parseInt(e.attr("data-distance")),o=e.hasClass("InfiniteScrollTop");n||(n=50),"string"==typeof n&&n.indexOf("%")>=0&&(n=parseInt(n,10)/100*t),n>t&&(n=t);var i=u.support.GetPageScroll().Y,a=e.offset().top,r=u.support.GetPageSize().WinH;if(l.scrollCurrent>i)return;o?i<n&&e.trigger("infinite"):i+n+r-a>t&&(l.scrollCurrent=i,e.trigger("infinite"))}else l.isInfiniteScroll=!1,l.DetachInfiniteScroll()},l.AttachInfiniteScroll=function(){l.isInfiniteScroll=!0,p(e).on("scroll",l.HandleInfiniteScroll)},l.DetachInfiniteScroll=function(t){l.scrollCurrent=0,p(e).off("scroll",l.HandleInfiniteScroll)},l.InitInfiniteScroll=function(e,t){e&&(l.scrollCurrent=0,t(),l.AttachInfiniteScroll())},e.kelat.infiniteScroll=l.InitInfiniteScroll,e.kelat.detachInfiniteScroll=l.DetachInfiniteScroll,e.kelat.attachInfiniteScroll=l.AttachInfiniteScroll,l.Picker=function(t){function n(){var t=!1;return c.params.convertToPopover||c.params.onlyInPopover?(!c.inline&&c.params.input&&(c.params.onlyInPopover?t=!0:f.device.ios?t=!!f.device.ipad:p(e).width()>=768&&(t=!0)),t):t}function o(){return!!(c.opened&&c.container&&c.container.length>0&&c.container.parents(".ModalPopover").length>0)}function i(){if(c.opened)for(var e=0;e<c.cols.length;e++)c.cols[e].divider||(c.cols[e].calcSize(),c.cols[e].setValue(c.cols[e].value,0,!1))}function a(e){if(p("body").addClass("OVBody"),e.preventDefault(),c.isCreate||l.ShowModal(c.container),!c.opened&&(c.open(),c.params.scrollToInput&&!n()&&c.params.calculateHeight)){var t=c.input.parents("body");if(0===t.length)return;var o,i=parseInt(g.css("padding-top"),10),a=parseInt(g.css("padding-bottom"),10),r=t[0].offsetHeight-i-c.container.height(),s=t[0].scrollHeight-i-c.container.height(),d=c.input.offset().top-i+c.input[0].offsetHeight;if(d>r){var f=t.scrollTop()+d-r-u.support.GetPageScroll().Y;f+r>s&&(o=f+r-s+a,r===s&&(o=c.container.height()),g.css({"padding-bottom":o+"px"})),t.scrollTop(f,300)}}}function r(e){o()||(c.input&&c.input.length>0?e.target!==c.input[0]&&0===p(e.target).parents(".PickerModal").length&&c.close():0===p(e.target).parents(".PickerModal").length&&c.close())}function s(){c.opened=!1,c.input&&c.input.length>0&&g.css({"padding-bottom":""}),c.params.onClose&&c.params.onClose(c),c.container.find(".PickerItemsCol").each(function(){c.destroyPickerCol(this)})}var c=this,d={calculateHeight:!0,updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,rotateEffect:!1,isEfficient:!1,autoUpdate:!0,momentumRatio:7,freeMode:!1,closeByOutsideClick:!0,scrollToInput:!0,inputReadOnly:!0,convertToPopover:!0,onlyInPopover:!1,toolbar:!0,toolbarOkText:u.ModalButtonOk,toolbarCloseText:u.ModalButtonCancel,toolbarTemplate:'<div class="ToolBar RippleBox"><div class="ToolBarInner"><div class="Left"><a href="javascript:;" class="Link InkRipple ClosePicker">{{closeText}}</a></div><div class="Right"><a href="javascript:;" class="Link InkRipple OkPicker">{{okText}}</a></div></div></div>'};t=t||{};for(var h in d)void 0===t[h]&&(t[h]=d[h]);c.params=t,c.cols=[],c.initialized=!1,c.isCreate=!0;var g=p(".WrapContent");c.inline=!!c.params.container;var v=f.device.ios||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!f.device.android;return c.setValue=function(e,t){var n=0;if(0===c.cols.length)return c.value=e,void c.updateValue(e);for(var o=0;o<c.cols.length;o++)c.cols[o]&&!c.cols[o].divider&&(c.cols[o].setValue(e[n],t),n++)},c.updateValue=function(e){for(var t=e||[],n=[],o=0;o<c.cols.length;o++)c.cols[o].divider||(t.push(c.cols[o].value),n.push(c.cols[o].displayValue));if(!(t.indexOf(void 0)>=0)&&(c.value=t,c.displayValue=n,c.params.onChange&&c.params.onChange(c,c.value,c.displayValue),c.input&&c.input.length>0)){var i="INPUT"===c.input[0].tagName?["val","change"]:["text",u.support.onClick],a=c.params.formatValue?c.params.formatValue(c,c.value,c.displayValue):c.value.join(" ");p(c.input)[i[0]](a),p(c.input).on(i[1])}},c.initPickerCol=function(e,t){function n(e,t){h.wrapper.transform("translate3d(0,"+e+"px,0)"),t&&h.wrapper.transition(0)}function o(){k=p.requestAnimationFrame(function(){h.updateItems(void 0,void 0,0),o()})}function i(e){w||T||(e.preventDefault(),T=!0,x=S="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,M=+new Date,D=!0,O=A=p.getTranslate(h.wrapper[0],"y"))}function a(e){if(T){e.preventDefault(),D=!1,S="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,w||(p.cancelAnimationFrame(k),w=!0,O=A=p.getTranslate(h.wrapper[0],"y"),h.wrapper.transition(0)),e.preventDefault();A=O+(S-x),I=void 0,A<b&&(A=b-Math.pow(b-A,.8),I="min"),A>y&&(A=y+Math.pow(A-y,.8),I="max"),n(A),h.updateItems(void 0,A,0,c.params.updateValuesOnTouchmove),P=A-L||A,B=+new Date,L=A}}function r(e){if(!T||!w)return void(T=w=!1);T=w=!1,h.wrapper.transition(""),I&&n("min"===I?b:y),E=+new Date;var t;E-M>300?t=A:(Math.abs(P/(E-B)),t=A+P*c.params.momentumRatio),t=Math.max(Math.min(t,y),b);var i=-Math.floor((t-y)/m);c.params.freeMode||(t=-i*m+y),n(parseInt(t,10)),h.updateItems(i,t,"",!0),c.params.updateValuesOnMomentum&&(o(),h.wrapper.transitionEnd(function(){p.cancelAnimationFrame(k)})),setTimeout(function(){D=!0},100)}function s(e){if(D){p.cancelAnimationFrame(k);var t=p(this).attr("data-picker-value");h.setValue(t)}}var l=p(e),d=l.index(),h=c.cols[d];if(!h.divider){h.container=l,h.wrapper=h.container.find(".PickerItemsColWrapper"),h.items=h.wrapper.find(".PickerItem");var g,m,C,b,y;h.replaceValues=function(e,t){h.destroyEvents(),h.values=e,h.displayValues=t;var n=c.columnHTML(h,!0);h.wrapper.html(n),h.items=h.wrapper.find(".PickerItem"),h.calcSize(),h.setValue(h.values[0],0,!0),h.initEvents()},h.calcSize=function(){c.params.rotateEffect&&(h.container.removeClass("PickerItemsColAbsolute"),h.width||h.container.css({width:""}));var e,t;e=0,t=h.container[0].offsetHeight,g=h.wrapper[0].offsetHeight,m=h.items[0].offsetHeight,C=m*h.items.length,b=t/2-C+m/2,y=t/2-m/2,h.width&&(e=h.width,parseInt(e,10)===e&&(e+="px"),h.container.css({width:e})),c.params.rotateEffect&&(h.width||(h.items.each(function(){var t=p(this);t.css({width:"auto"}),e=Math.max(e,t[0].offsetWidth),t.css({width:""})}),h.container.css({width:e+2+"px"})),h.container.addClass("PickerItemsColAbsolute"))},h.calcSize(),n(y,!0);var k;h.setValue=function(e,t,i){void 0===t&&(t="");var a=h.wrapper.find('.PickerItem[data-picker-value="'+e+'"]').index();if(void 0!==a&&a!==-1){var r=-a*m+y;h.wrapper.transition(t),n(r),c.params.updateValuesOnMomentum&&h.activeIndex&&h.activeIndex!==a&&(p.cancelAnimationFrame(k),h.wrapper.transitionEnd(function(){p.cancelAnimationFrame(k)}),o()),h.updateItems(a,r,t,i)}},h.updateItems=function(e,t,n,o){void 0===t&&(t=p.getTranslate(h.wrapper[0],"y")),void 0===e&&(e=-Math.round((t-y)/m)),e<0&&(e=0),e>=h.items.length&&(e=h.items.length-1);var i=h.activeIndex;h.activeIndex=e,h.items.removeClass("PickerSelected");var a=h.items.eq(e).addClass("PickerSelected");c.params.rotateEffect?(h.items.transition(n),h.items.each(function(e){var n=p(this),o=(e*m-(y-t))/m,i=Math.ceil(h.height/m/2)+1,a=-18*o;a>180&&(a=180),a<-180&&(a=-180),Math.abs(o)>i?n.addClass("PickerItemFar"):n.removeClass("PickerItemFar"),n.transform("translate3d(0, "+(-t+y)+"px, "+(v?-110:0)+"px) rotateX("+a+"deg)")})):h.items.transition(n),(o||void 0===o)&&(h.value=a.attr("data-picker-value"),h.displayValue=h.displayValues?h.displayValues[e]:h.value,i!==e&&(h.onChange&&h.onChange(c,h.value,h.displayValue),c.params.autoUpdate&&c.updateValue()))},t&&h.updateItems(0,y,0);var T,w,x,S,M,E,O,I,A,L,P,B,D=!0;h.initEvents=function(e){var t=e?"off":"on";h.container[t](f.touchEvents.start,i),h.container[t](f.touchEvents.move,a),h.container[t](f.touchEvents.end,r),h.items[t](u.support.onClick,s)},h.destroyEvents=function(){h.initEvents(!0)},h.container[0].KLTDestroyPickerCol=function(){h.destroyEvents()},h.initEvents()}},c.destroyPickerCol=function(e){e=p(e),"KLTDestroyPickerCol"in e[0]&&e[0].KLTDestroyPickerCol()},p(e).on("resize",i),c.columnHTML=function(e,t){var n="",o="";if(e.divider)o+='<div class="PickerItemsCol PickerItemsColDivider '+(e.textAlign?"PickerItemsCol_"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>";else{for(var i=0;i<e.values.length;i++)n+='<div class="PickerItem" data-picker-value="'+e.values[i]+'">'+(e.displayValues?e.displayValues[i]:e.values[i])+"</div>";o+='<div class="PickerItemsCol '+(e.textAlign?"PickerItemsCol_"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="PickerItemsColWrapper">'+n+"</div></div>"}return t?n:o},c.layout=function(){var e,t="",n="";c.cols=[];var o="";for(e=0;e<c.params.cols.length;e++){var i=c.params.cols[e];o+=c.columnHTML(c.params.cols[e]),c.cols.push(i)}n="PickerModal PickerColumns "+(c.params.cssClass||"")+(c.params.rotateEffect?" Picker3d":""),t='<div class="'+n+'">'+(c.params.toolbar?c.params.toolbarTemplate.replace(/{{closeText}}/,c.params.toolbarCloseText).replace(/{{okText}}/,c.params.toolbarOkText):"")+'<div class="PickerModalInner PickerItems">'+o+'<div class="PickerCenterHighlight"></div></div></div>',c.pickerHTML=t},c.params.input&&(c.input=p(c.params.input),c.input.length>0&&(c.params.inputReadOnly&&c.input.prop("readOnly",!0),c.inline||c.input.on("click",a),c.params.inputReadOnly&&c.input.on("focus mousedown",function(e){e.preventDefault()}))),!c.inline&&c.params.closeByOutsideClick&&p("html").on("click",r),c.opened=!1,c.isClick=1,c.open=function(){var e=+new Date,t=n();c.Timestamp=e*c.isClick,c.opened||(c.isCreate&&(c.layout(),t?(c.pickerHTML='<div class="ModalPopover ModalPopoverPickerColumns"><div class="ModalPopoverInner">'+c.pickerHTML+"</div></div>",c.popover=l.Popover(c.pickerHTML,c.params.input,{removeOnClose:!0}),c.container=p(c.popover).find(".PickerModal"),p(c.popover).on("close",function(){s()})):c.inline?(c.container=p(c.pickerHTML),c.container.addClass("PickerModalInline"),p(c.params.container).append(c.container)):(c.container=p(l.PickerModal(c.pickerHTML,!c.params.isEfficient)),p(c.container).on("close",function(){s()})),c.params.isEfficient&&!t&&(c.isCreate=!1)),c.PickerClick=function(){p(this).hasClass("OkPicker")&&!c.params.autoUpdate&&c.updateValue(),c.close(),p(this).off("click",c.PickerClick)},c.container.find(".OkPicker,.ClosePicker").on("click",c.PickerClick),c.container[0].KLTPicker=c,c.container.find(".PickerItemsCol").each(function(){var e=!0;(!c.initialized&&c.params.value||c.initialized&&c.value)&&(e=!1),c.initPickerCol(this,e)}),c.initialized?c.value&&c.setValue(c.value,0):c.value?c.setValue(c.value,0):c.params.value&&c.setValue(c.params.value,0)),c.opened=!0,c.initialized=!0,c.params.onOpen&&e==c.Timestamp&&(c.params.isEfficient&&!t&&c.isClick++,c.params.onOpen(c))},c.close=function(){if(c.opened&&!c.inline)return o()?void(c.isCreate?l.CloseModal(c.popover):(l.HideModal(c.popover),setTimeout(function(){c.opened=!1},400))):void(c.isCreate?l.CloseModal(c.container):(l.HideModal(c.container),setTimeout(function(){c.opened=!1},400)))},c.destroy=function(){c.close(),c.params.input&&c.input.length>0&&c.input.off("click focus",a),p("html").off("click",r),p(e).off("resize",i)},c.inline?c.open():!c.initialized&&c.params.value&&c.setValue(c.params.value),c},e.kelat.picker=function(e){return new l.Picker(e)},l.BackToTop=function(){var t=p(document.getElementById(u.WrapperArea)),n=p('<div class="BackToTop"><i class="I IGoTop"></i></div>');p(e).on("scroll",function(){if(t.find(".isBackToTop").length>0){var e=u.support.GetPageScroll().Y;e>=200?(t.append(n),n.once(u.support.onClick,function(){p("html,body").scrollTop(0,100),setTimeout(function(){n.remove()},100)})):e<100&&n.remove()}})},l.AddNotify=function(t){if(t){var n=t.title?'<div class="ItemTitle">'+t.title+"</div>":"",o=t.subtitle?'<div class="ItemSubtitle">'+t.subtitle+"</div>":"",i=t.message?'<div class="ItemText">'+t.message+"</div>":"",a=t.media?'<div class="ItemMedia">'+t.media+"</div>":"",r=p(".NotifyBox");0===r.length&&(p(document.getElementById(u.WrapperArea)).append('<ul class="NotifyBox ListBlock MediaList" style="z-index:'+u.LayerIndex+'"></ul>'),r=p(".NotifyBox")),r.show();var s='<li class="ListItem"><div class="ItemCon InkRipple">'+a+'<div class="ItemInner"><div class="ItemTitleRow">'+n+'<div class="ItemAfter"><a href="javascript:;" class="CloseNotify"><span></span></a></div></div>'+o+i+"</div></div></li>",c=p(s);c.on(u.support.onClick,function(e){var n=!1;p(e.target).is(".CloseNotify")||p(e.target).parents(".CloseNotify").length>0?(n=!0,t.onClose&&t.onClose(c[0],e)):t.closeOnClick&&(n=!0),n&&l.CloseNotify(c[0])}),r.prepend(c[0]);var d=c.outerHeight();c.css("margin-top",-d+"px"),e.setTimeout(function(){c.addClass("ListItemInOut "+t.additionalClass).css("margin-top","0px")},5)}return this},l.CloseNotify=function(t){if(t=p(t),0!==t.length){var n=p(".NotifyBox"),o=t.outerHeight();t.css("height",o+"px"),e.setTimeout(function(){t.addClass("ListItemInOut").css("height","0px")},20),t.addClass("NotifyBoxHidden").transitionEnd(function(){t.remove(),0===n.find(".ListItem").length&&n.hide()})}},e.kelat.addNotify=l.AddNotify,e.kelat.closeNotify=l.CloseNotify,l.Indicator=function(){return s?p(document.getElementById(u.WrapperArea)).append('<div class="LoadingIndicatorBlank"></div><div class="LoadingIndicatorBox"><span class="Loading LoadingWhite"></span></div>'):null},l.unIndicator=function(){return p(".LoadingIndicatorBlank, .LoadingIndicatorBox").remove()},e.kelat.indicator=l.Indicator,e.kelat.unIndicator=l.unIndicator,l.Toast=function(e){e=e||{};var t=e.title?e.title:"",n=e.content?"<div>"+e.content+"</div>":"",i=e.className?e.className:"",a=p('<div class="ToastBox '+i+" "+o(kelat.defaults.shift)+'" style="z-index:'+u.LayerIndex+'">'+n+t+"</div>");p(document.getElementById(u.WrapperArea)).append(a);var r={"margin-left":-(a.outerWidth()/2)+"px"};!function(e){if(e)for(var t=0;t<e.length;t++)if(e[t]){var n;switch(n="string"==typeof e[t]&&e[t].indexOf("%")>=0?e[t]:e[t]+"px",t){case 0:r.top=n,r.bottom="auto";break;case 1:r.right=n,r.left="auto",r["margin-left"]="auto";break;case 2:r.bottom=n;break;case 3:r.left=n,r["margin-left"]="auto"}}}(e.site),a.css(r);var l=function(e,t){setTimeout(function(){s&&e()},t)};l(function(){a.removeClass("ToastOut").css({"z-index":++u.LayerIndex}).addClass("ToastIn")},10),l(function(){a.removeClass("ToastIn").addClass("ToastOut").transitionEnd(function(){a.remove()})},e.time?e.time:2e3)},e.kelat.toast=l.Toast,l.Loading=function(e){return s?l.Modal({title:e||u.LoadingTitle,content:'<div class="TC">'+u.LoadingHtml+"</div>",className:"ModalLoading"}):null},l.unLoading=function(){return l.CloseModal(".ModalBox.ModalLoading")},e.kelat.loading=l.Loading,e.kelat.unLoading=l.unLoading,l.SizeNavbars=function(e){(e?p(e).find(".NavBar .NavBarInner"):p(".NavBar .NavBarInner")).each(function(){var e,t,n=p(this),o=f.rtl?n.find(".Right"):n.find(".Left"),i=f.rtl?n.find(".Left"):n.find(".Right"),a=n.find(".Center"),r=0===o.length,s=0===i.length,l=r?0:o.outerWidth(!0),c=s?0:i.outerWidth(!0),u=a.outerWidth(!0),d=n.styles(),h=n[0].offsetWidth-parseInt(d.paddingLeft,10)-parseInt(d.paddingRight,10);s&&(e=h-u),r&&(e=0),r||s||(e=(h-c-u+l)/2);var g=(h-u)/2;h-l-c>u?(g<l&&(g=l),g+u>h-c&&(g=h-c-u),t=g-e):t=0;var v=t;f.rtl&&r&&s&&a.length>0&&(v=-v),a.css({left:v+"px"})})},l.ShowModal=function(e){return e.prev(".ModalBlank").css("z-index",u.LayerIndex).removeClass("ModalBlankVisibleOut").addClass("ModalBlankVisibleIn"),e.removeClass("ModalOut").css({"z-index":++u.LayerIndex}).addClass("ModalIn"),e},l.HideModal=function(e){p("body").removeClass("OVBody"),e.removeClass("ModalIn").addClass("ModalOut").transitionEnd(function(t){e.removeClass("ModalOut")}),e.prev(".ModalBlank").removeClass("ModalBlankVisibleIn").addClass("ModalBlankVisibleOut").transitionEnd(function(){p(this).removeClass("ModalBlankVisibleOut").removeAttr("style")})},l.OpenModal=function(t,n,o,i){var a=+new Date,r=t.hasClass("ModalPopover"),c=t.hasClass("PickerModal"),d=t.hasClass("PopupBox");p(document.getElementById(u.WrapperArea)).append('<div class="ModalBlank ModalBlank'+a+'" style="z-index:'+u.LayerIndex+'"/>'),p(document.getElementById(u.WrapperArea)).append(t[0]),l.SizeNavbars(t);var f=p(".ModalBlank"+a);(n?n:"").indexOf("ModalWarnBox")!==-1?(t.addClass(n),e.setTimeout(function(){l.CloseModal(t)},i)):(u.isModalPopover?t.addClass(n):r||c||d||t.css({marginTop:-Math.round(t.outerHeight()/2)+"px"}),u.isModalPopover=!1),e.setTimeout(function(){t&&s&&l.ShowModal(t),(r||c||d)&&f.on(u.support.onClick,function(){l.CloseModal(t,o)})},5)},l.CloseModal=function(e,t){if(p("body").removeClass("OVBody"),void 0===(e=p(e||".ModalBox.ModalBoxIn"))||0!==e.length){var n=e.hasClass("ModalPopover"),o=e.hasClass("PopupBox"),i=e.hasClass("PickerModal"),a=e.hasClass("RemoveOnClose"),r=e.hasClass("HideOnClose");return e.trigger("close"),e.removeClass("ModalIn").addClass("ModalOut").transitionEnd(function(s){!!t&&t[0].append(t[1]),i||n||o?(r?e.removeClass("ModalOut"):e.removeClass("ModalOut").hide(),a&&e.length>0&&e.remove()):e.remove()}).prev().removeClass("ModalBlankVisibleIn").addClass("ModalBlankVisibleOut").transitionEnd(function(){r&&e.length>0?p(this).removeClass("ModalBlankVisibleOut").removeAttr("style"):p(this).remove()}),!0}},l.Modal=function(e){e=e||{};var t,n="",o="",i="",a=typeof e.content;if(e.buttons&&e.buttons.length>0)for(var r=0;r<e.buttons.length;r++)0===r?o="First":r===e.buttons.length-1&&(o="Last"),n+='<a href="javascript:;" class="ModalButton '+o+" "+(e.buttons[r].className||"")+'">'+e.buttons[r].text+"</a>";var s=e.title?'<div class="ModalHeader">'+e.title+"</div>":"",c=e.content?"object"===a?'<div class="ModalContent"></div>':'<div class="ModalContent">'+e.content+"</div>":"",d=e.afterText||"",f=e.buttons&&0!==e.buttons.length?"":"ModalNoButtons",h=e.buttons&&e.buttons.length>0?'<div class="ModalFooter ModalFooter'+e.buttons.length+'">'+n+"</div>":"";i='<div class="ModalBox '+f+" "+(e.className?e.className:"")+'"><div class="ModalInner">'+(s+c+d)+"</div>"+h+"</div>";var g=p(i);return"object"===a&&(t=[e.content.parent(),e.content],g.find(".ModalContent").append(t[1])),g.find(".ModalButton").each(function(t,n){p(n).on(u.support.onClick,function(n){e.buttons[t].close!==!1&&l.CloseModal(g),e.buttons[t].onClick&&e.buttons[t].onClick(g,n),e.onClick&&e.onClick(g,t)})}),l.OpenModal(g,e.className?e.className:"",t,e.displayTime),g[0]},l.Alert=function(e,t,n,o){return"function"==typeof t&&(o=arguments[2],n=arguments[1],t=void 0),s?l.Modal({content:e||"",title:void 0===t?u.ModalTitle:t,buttons:[{text:o&&o[0]?o[0]:u.ModalButtonOk,onClick:n}]}):null},l.Confirm=function(e,t,n,o,i,a){return"function"==typeof t&&("object"==typeof n?i=arguments[2]:(i=arguments[3],o=arguments[2]),n=arguments[1],t=void 0),s?l.Modal({content:e||"",title:void 0===t?u.ModalTitle:t,className:a||"",buttons:[{text:i&&i[1]?i[1]:u.ModalButtonCancel,onClick:o},{text:i&&i[0]?i[0]:u.ModalButtonOk,onClick:n}]}):null},l.Warn=function(e,t,n){if(e)return"string"==typeof t&&(n=arguments[1],t=void 0),s?l.Modal({content:e||"",displayTime:t?t:2e3,className:"ModalWarnBox "+n}):null},l.Prompt=function(e,t,n,o,i){return"function"==typeof t&&(n=arguments[1],o=arguments[2],i=arguments[3],t=void 0),l.Modal({content:e||"",title:void 0===t?u.ModalTitle:t,afterText:'<div class="InputField"><input type="text" class="ModalTextInput"></div>',buttons:[{text:i&&i[1]?i[1]:u.ModalButtonCancel},{text:i&&i[0]?i[0]:u.ModalButtonOk,bold:!0}],onClick:function(e,t){0===t&&o&&o(p(e).find(".ModalTextInput").val()),1===t&&n&&n(p(e).find(".ModalTextInput").val())}})},l.Popup=function(e,t){return void 0===t&&(t=!0),"string"==typeof e&&e.indexOf("<")>=0&&l.ModalString(e,t,function(t){e=t}),e=p(e),0!==e.length&&(e.show(),e.find(".OkPicker,.ClosePicker,.ClosePopup").on("click",function(){l.ClosePopup(e)}),l.OpenModal(e),e[0])},l.unPopup=function(e){return l.CloseModal(e),e[0]},l.ConfirmModal=function(e,t,n,o,i){return new l.Confirm(e,t,n,o,i,"ModalPickerBox")},l.PickerModal=function(e,t){if(void 0===t&&(t=!0),"string"==typeof e&&e.indexOf("<")>=0){if(e=p(e),e.dd="1",!(e.length>0))return!1;t?e.addClass("RemoveOnClose"):e.addClass("HideOnClose"),p(document.getElementById(u.WrapperArea)).append(e[0])}return e=p(e),0!==e.length&&(p(".PickerModal.ModalIn:not(.ModalOut)").length>0&&!e.hasClass("ModalIn")&&l.CloseModal(".PickerModal.ModalIn:not(.ModalOut)"),l.OpenModal(e),e[0])},l.ModalString=function(e,t,n){var o=document.createElement("div");return o.innerHTML=e.trim(),o.childNodes.length>0&&(e=o.childNodes[0],t&&e.classList.add("RemoveOnClose"),p(document.getElementById(u.WrapperArea)).append(e),n(e))},l.Popover=function(t,n,o){function i(){t.css({left:"",top:""});var e,i,a,r=t.width(),s=t.height(),l=0;e=t.find(".ModalPopoverAngle"),l=e.width()/2,e.removeClass("onLeft onRight onTop onBottom").css({left:"",top:""});var c=n.outerWidth(),d=n.outerHeight(),p=n.offset(),f=n.parents("body");f.length>0&&(p.top=p.top-f[0].scrollTop);var h=u.support.GetPageScroll(),g=u.support.GetPageSize(),v=g.WinH,m=g.WinW,C=0,b=0,y=0,k="top";s+l<p.top?C=p.top-s-l+h.Y:s+l<v-p.top-d?(k="bottom",C=p.top+d+l+h.Y):(k="middle",C=d/2+p.top-s/2,y=C,C<=0?C=5:C+s>=v&&(C=v-s-5),y-=C),o.angle&&(k=o.angle,C=p.top-s-l+h.Y),"top"===k||"bottom"===k?(b=c/2+p.left-r/2,y=b,b<5&&(b=5),b+r>m&&(b=m-r-5),"top"===k&&e.addClass("onBottom"),"bottom"===k&&e.addClass("onTop"),y-=b,i=r/2-l+y,i=Math.max(Math.min(i,r-2*l-13),13),e.css({left:i+"px"})):"middle"===k&&(b=p.left-r-l,e.addClass("onRight"),(b<5||b+r>m)&&(b<5&&(b=p.left+c+l),b+r>m&&(b=m-r-5),e.removeClass("onRight").addClass("onLeft")),a=s/2-l+y,a=Math.max(Math.min(a,s-2*l-13),13),e.css({top:a+"px"})),"top"==o.angle&&(e.removeClass("onLeft onRight onTop onBottom").addClass("onTop"),C=p.top+l+d+f[0].scrollTop),o.center&&(b=(m-r)/2),t.css({top:C+"px",left:parseInt(b)+"px"})}return"object"!=typeof o&&(o={}),void 0===o.removeOnClose&&(o.removeOnClose=!0),"string"==typeof t&&t.indexOf("<")>=0&&l.ModalString(t,o.removeOnClose,function(e){t=e}),u.isModalPopover=!0,t=p(t),n=p(n),0!==t.length&&0!==n.length&&(0===t.find(".ModalPopoverAngle").length&&t.append('<div class="ModalPopoverAngle"></div>'),t.show(),i(),p(e).on("resize",i),t.on("close",function(){p(e).off("resize",i)}),l.OpenModal(t),s?t[0]:null)},e.kelat.alert=l.Alert,e.kelat.confirm=l.Confirm,e.kelat.warn=l.Warn,e.kelat.prompt=l.Prompt,e.kelat.pickerModal=l.PickerModal,e.kelat.popup=l.Popup,e.kelat.unPopup=l.unPopup,e.kelat.popover=l.Popover,e.kelat.confirmModal=l.ConfirmModal,l.BlankTips=function(e,t,n){"function"==typeof t&&(n=arguments[1],t=void 0);var o=e?'<div class="BlankTipsTitle">'+e+"</div>":"",i=t?'<div class="BlankTipsContent">'+t+"</div>":"",a='<div class="BlankTips">'+i+o+"</div></div>",r=p(a);return r.on(u.support.onClick,function(e){n&&n(r,e)}),p("html,body").addClass("OH"),p(document.getElementById(u.WrapperArea)).append(r),this},e.kelat.blankTips=l.BlankTips,l.OpenActions=function(t){var n=+new Date;p(document.getElementById(u.WrapperArea)).append(p('<div class="ModalBlank ActionsBlank'+n+'" style="z-index:'+u.LayerIndex+'"/>')),p(document.getElementById(u.WrapperArea)).append(p(t[0])),e.setTimeout(function(){t&&s&&t.css({"z-index":++u.LayerIndex}).removeClass("ModalOut").addClass("ModalIn"),p(".ActionsBlank"+n).addClass("ModalBlankVisibleIn").transitionEnd(function(){p(this).on(u.support.onClick,function(){l.CloseModal(t)})})},5)},l.Actions=function(e){for(var e=e||[],t="",n="",o=0;o<e.length;o++)for(var i=0;i<e[o].length;i++){0===i&&(t+='<div class="ActionsModalGroup">');var a=e[o][i],r=a.label?"ActionsLabel":"ActionsButton",c=a.text?a.text:u.ModalButtonCancel;a.bold&&(r+=" ActionsButtonBold"),a.color&&(r+=" "+a.color),a.bg&&(r+=" "+a.bg),a.disabled&&(r+=" disabled"),t+='<div class="'+r+'">'+c+"</div>",i===e[o].length-1&&(t+="</div>")}n='<div class="ModalBox ActionsModal">'+t+"</div>";var d=p(n);return d.find(".ActionsModalGroup").each(function(t,n){var o=t;p(n).children().each(function(t,n){var i,a=t,r=e[o][a];p(n).is(".ActionsButton")&&(i=p(n)),p(n).find(".ActionsButton").length>0&&(i=p(n).find(".ActionsButton")),i&&i.on(u.support.onClick,function(e){r.close!==!1&&l.CloseModal(d),r.onClick&&r.onClick(d,e)})})}),s?l.OpenActions(d):""},e.kelat.actions=l.Actions,l.swipeoutOpenedEl=void 0,l.allowSwipeout=!0,l.initSwipeout=function(t){function n(e){l.allowSwipeout&&(r=!1,a=!0,s=void 0,P.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,P.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,c=(new Date).getTime())}function o(e){if(a){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===s&&(s=!!(s||Math.abs(n-P.y)>Math.abs(t-P.x))),s)return void(a=!1);if(!r){if(p(".ListBlock.SortableOpened").length>0)return;h=p(this),g=h.find(".SwipeoutCon"),v=h.find(".SwipeoutActionsRight"),
m=h.find(".SwipeoutActionsLeft"),C=b=w=x=E=M=null,A=m.hasClass("SwipeoutActionsNoFold")||u.swipeoutActionsNoFold,L=v.hasClass("SwipeoutActionsNoFold")||u.swipeoutActionsNoFold,m.length>0&&(C=m.outerWidth(),w=m.children(".SwipeoutItem"),M=m.find(".SwipeoutOverswipe")),v.length>0&&(b=v.outerWidth(),x=v.children(".SwipeoutItem"),E=v.find(".SwipeoutOverswipe")),k=h.hasClass("SwipeoutOpened"),k&&(T=h.find(".SwipeoutActionsLeft.SwipeoutActionsOpened").length>0?"left":"right"),h.removeClass("transitioning"),u.swipeoutNoFollow||(h.find(".SwipeoutActionsOpened").removeClass("SwipeoutActionsOpened"),h.removeClass("SwipeoutOpened"))}if(r=!0,e.preventDefault(),d=t-P.x,y=d,k&&("right"===T?y-=b:y+=C),y>0&&0===m.length||y<0&&0===v.length){if(!k)return a=r=!1,g.transform(""),x&&x.length>0&&x.transform(""),void(w&&w.length>0&&w.transform(""));y=0}S=y<0?"toLeft":y>0?"toRight":S?S:"toLeft";var o,i,c;if(u.swipeoutNoFollow)return k?("right"===T&&d>0&&l.swipeoutClose(h),"left"===T&&d<0&&l.swipeoutClose(h)):(d<0&&v.length>0&&l.swipeoutOpen(h,"right"),d>0&&m.length>0&&l.swipeoutOpen(h,"left")),a=!1,void(r=!1);O=!1,I=!1;var f;if(v.length>0)for(c=y/b,y<-b&&(y=-b-Math.pow(-y-b,.8),E.length>0&&(I=!0)),o=0;o<x.length;o++)void 0===x[o]._buttonOffset&&(x[o]._buttonOffset=x[o].offsetLeft),i=x[o]._buttonOffset,f=p(x[o]),E.length>0&&f.hasClass("SwipeoutOverswipe")&&(f.css({left:(I?-i:0)+"px"}),I?f.addClass("swipeout-overswipe-active"):f.removeClass("swipeout-overswipe-active")),f.transform("translate3d("+(y-i*(1+Math.max(c,-1)))+"px,0,0)");if(m.length>0)for(c=y/C,y>C&&(y=C+Math.pow(y-C,.8),M.length>0&&(O=!0)),o=0;o<w.length;o++)void 0===w[o]._buttonOffset&&(w[o]._buttonOffset=C-w[o].offsetLeft-w[o].offsetWidth),i=w[o]._buttonOffset,f=p(w[o]),M.length>0&&f.hasClass("SwipeoutOverswipe")&&(f.css({left:(O?i:0)+"px"}),O?f.addClass("swipeout-overswipe-active"):f.removeClass("swipeout-overswipe-active")),w.length>1&&f.css("z-index",w.length-o),f.transform("translate3d("+(y+i*(1-Math.min(c,1)))+"px,0,0)");g.transform("translate3d("+y+"px,0,0)")}}function i(e){if(!a||!r)return a=!1,void(r=!1);a=!1,r=!1;var t,n,o,i,s,u=(new Date).getTime()-c;if("toLeft"===S?L:A,o="toLeft"===S?v:m,n="toLeft"===S?b:C,t=u<300&&(d<-10&&"toLeft"===S||d>10&&"toRight"===S)||u>=300&&Math.abs(y)>n/2?"open":"close",u<300&&(0===Math.abs(y)&&(t="close"),Math.abs(y)===n&&(t="open")),"open"===t){l.swipeoutOpenedEl=h,h.trigger("open"),h.addClass("SwipeoutOpened transitioning");var f="toLeft"===S?-n:n;if(g.transform("translate3d("+f+"px,0,0)"),o.addClass("SwipeoutActionsOpened"),i="toLeft"===S?x:w)for(s=0;s<i.length;s++)p(i[s]).transform("translate3d("+f+"px,0,0)");I&&v.find(".SwipeoutOverswipe")[0].click(),O&&m.find(".SwipeoutOverswipe")[0].click()}else h.trigger("close"),l.swipeoutOpenedEl=void 0,h.addClass("transitioning").removeClass("SwipeoutOpened"),g.transform(""),o.removeClass("SwipeoutActionsOpened");var T;if(w&&w.length>0&&w!==i)for(s=0;s<w.length;s++)T=w[s]._buttonOffset,void 0===T&&(w[s]._buttonOffset=C-w[s].offsetLeft-w[s].offsetWidth),p(w[s]).transform("translate3d("+T+"px,0,0)");if(x&&x.length>0&&x!==i)for(s=0;s<x.length;s++)T=x[s]._buttonOffset,void 0===T&&(x[s]._buttonOffset=x[s].offsetLeft),p(x[s]).transform("translate3d("+-T+"px,0,0)");g.transitionEnd(function(e){k&&"open"===t||closed&&"close"===t||(h.trigger("open"===t?"opened":"closed"),k&&"close"===t&&(v.length>0&&x.transform(""),m.length>0&&w.transform("")))})}var a,r,s,c,d,h,g,v,m,C,b,y,k,T,w,x,S,M,E,O,I,A,L,P={};p(document).on("click",".SwipeoutClose",function(){l.swipeoutClose(p(this).parents(".SwipeoutOpened"))}),p(document).on("click",".SwipeoutDelete",function(){var e=p(this),t=e.dataset();if(t.confirm){var n=t.confirm,o=t.confirmtitle;o?kelat.confirm(n,o,function(){l.swipeoutDelete(e.parents(".Swipeout"))},function(){t.closeoncancel&&l.swipeoutClose(e.parents(".Swipeout"))}):kelat.confirm(n,function(){l.swipeoutDelete(e.parents(".Swipeout"))},function(){t.closeoncancel&&l.swipeoutClose(e.parents(".Swipeout"))})}else l.swipeoutDelete(e.parents(".Swipeout"))}),p(document).on(f.touchEvents.start,function(e){if(l.swipeoutOpenedEl){var t=p(e.target);l.swipeoutOpenedEl.is(t[0])||t.parents(".Swipeout").is(l.swipeoutOpenedEl)||t.hasClass("ModalIn")||t.hasClass("ModalBlank")||t.hasClass("ActionsModal")||t.parents(".ActionsModal.ModalIn, .ModalBox.ModalIn").length>0||l.swipeoutClose(l.swipeoutOpenedEl)}}),t?e.isSwipeoutEL||(p(t).on(f.touchEvents.start,n),p(t).on(f.touchEvents.move,o),p(t).on(f.touchEvents.end,i),e.isSwipeoutEL=!0):e.isSwipeout||(p(document).on(f.touchEvents.start,".ListBlock li.Swipeout",n),p(document).on(f.touchEvents.move,".ListBlock li.Swipeout",o),p(document).on(f.touchEvents.end,".ListBlock li.Swipeout",i),e.isSwipeout=!0)},l.swipeoutOpen=function(e,t,n){if(e=p(e),2===arguments.length&&"function"==typeof arguments[1]&&(n=t),0!==e.length&&(e.length>1&&(e=p(e[0])),e.hasClass("Swipeout")&&!e.hasClass("SwipeoutOpened"))){t||(t=e.find(".SwipeoutActionsRight").length>0?"right":"left");var o=e.find(".swipeout-actions-"+t);if(0!==o.length){e.trigger("open").addClass("SwipeoutOpened").removeClass("transitioning"),o.addClass("SwipeoutActionsOpened");var i,a=o.children(".SwipeoutItem"),r=o.outerWidth(),s="right"===t?-r:r;if(a.length>1){for(i=0;i<a.length;i++)"right"===t?p(a[i]).transform("translate3d("+-a[i].offsetLeft+"px,0,0)"):p(a[i]).css("z-index",a.length-i).transform("translate3d("+(r-a[i].offsetWidth-a[i].offsetLeft)+"px,0,0)");a[1].clientLeft}for(e.addClass("transitioning"),i=0;i<a.length;i++)p(a[i]).transform("translate3d("+s+"px,0,0)");e.find(".SwipeoutCon").transform("translate3d("+s+"px,0,0)").transitionEnd(function(){e.trigger("opened"),n&&n.call(e[0])}),l.swipeoutOpenedEl=e}}},l.swipeoutClose=function(e,t){function n(){l.allowSwipeout=!0,e.hasClass("SwipeoutOpened")||(e.removeClass("transitioning"),a.transform(""),e.trigger("closed"),t&&t.call(e[0]),s&&clearTimeout(s))}if(e=p(e),0!==e.length&&e.hasClass("SwipeoutOpened")){var o=e.find(".SwipeoutActionsOpened").hasClass("SwipeoutActionsRight")?"right":"left",i=e.find(".SwipeoutActionsOpened").removeClass("SwipeoutActionsOpened"),a=i.children(".SwipeoutItem"),r=i.outerWidth();l.allowSwipeout=!1,e.trigger("close"),e.removeClass("SwipeoutOpened").addClass("transitioning");var s;e.find(".SwipeoutCon").transform("").transitionEnd(n),s=setTimeout(n,500);for(var c=0;c<a.length;c++)"right"===o?p(a[c]).transform("translate3d("+-a[c].offsetLeft+"px,0,0)"):p(a[c]).transform("translate3d("+(r-a[c].offsetWidth-a[c].offsetLeft)+"px,0,0)"),p(a[c]).css({left:"0px"}).removeClass("swipeout-overswipe-active");l.swipeoutOpenedEl&&l.swipeoutOpenedEl[0]===e[0]&&(l.swipeoutOpenedEl=void 0)}},l.swipeoutDelete=function(e,t){if(e=p(e),0!==e.length){e.length>1&&(e=p(e[0])),l.swipeoutOpenedEl=void 0,e.trigger("delete"),e.css({height:e.outerHeight()+"px"});e[0].clientLeft;e.css({height:"0px"}).addClass("Deleting transitioning").transitionEnd(function(){e.trigger("deleted"),t&&t.call(e[0]),e.remove()});e.find(".SwipeoutCon").transform("translate3d(-100%,0,0)")}},e.kelat.initSwipeout=l.initSwipeout,e.kelat.swipeoutOpen=l.swipeoutOpen,e.kelat.swipeoutClose=l.swipeoutClose,e.kelat.swipeoutDelete=l.swipeoutDelete,l.sortableToggle=function(e){return e=p(e),0===e.length&&(e=p(".ListBlock.Sortable")),e.toggleClass("SortableOpened"),e.hasClass("SortableOpened")?e.trigger("open"):e.trigger("close"),e},l.sortableOpen=function(e){return e=p(e),0===e.length&&(e=p(".ListBlock.Sortable")),e.addClass("SortableOpened"),e.trigger("open"),e},l.sortableClose=function(e){return e=p(e),0===e.length&&(e=p(".ListBlock.Sortable")),e.removeClass("SortableOpened"),e.trigger("close"),e},l.initSortable=function(){function e(e){i=!1,o=!0,a="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,s=p(this).parent(),d=s.parent().find("li"),C=s.parents(".sortable"),e.preventDefault(),l.allowSwipeout=!1}function t(e){if(o&&s){var t="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;i||(s.addClass("sorting"),C.addClass("sortable-sorting"),h=s[0].offsetTop,g=s.parent().height()-s[0].offsetTop-s.height(),c=s[0].offsetHeight),i=!0,e.preventDefault(),r=t-a;var n=r;n<-h&&(n=-h),n>g&&(n=g),s.transform("translate3d(0,"+n+"px,0)"),m=v=void 0,d.each(function(){var e=p(this);if(e[0]!==s[0]){var t=e[0].offsetTop,o=e.height(),i=s[0].offsetTop+n;i>=t-o/2&&s.index()<e.index()?(e.transform("translate3d(0, "+-c+"px,0)"),v=e,m=void 0):i<=t+o/2&&s.index()>e.index()?(e.transform("translate3d(0, "+c+"px,0)"),v=void 0,m||(m=e)):p(this).transform("translate3d(0, 0%,0)")}})}}function n(e){if(l.allowSwipeout=!0,!o||!i)return o=!1,void(i=!1);e.preventDefault(),d.transform(""),s.removeClass("sorting"),C.removeClass("sortable-sorting"),v&&(s.insertAfter(v),s.trigger("sort")),m&&(s.insertBefore(m),s.trigger("sort")),v=m=void 0,o=!1,i=!1}var o,i,a,r,s,c,d,h,g,v,m,C;p(document).on("click",".ToggleSortable,.CloseSortable,.OpenSortable",function(){var e=p(this),t=e.dataset();e.hasClass("ToggleSortable")&&l.sortableToggle(t.sortable),e.hasClass("OpenSortable")&&l.sortableOpen(t.sortable),e.hasClass("CloseSortable")&&l.sortableClose(t.sortable)}),p(document).on(f.touchEvents.start,".ListBlock.Sortable .SortableHandler",e),u.support.touch?(p(document).on(f.touchEvents.move,".ListBlock.Sortable .SortableHandler",t),p(document).on(f.touchEvents.end,".ListBlock.Sortable .SortableHandler",n)):(p(document).on(f.touchEvents.move,t),p(document).on(f.touchEvents.end,n))},e.kelat.initSortable=l.initSortable,e.kelat.sortableOpen=l.sortableOpen,e.kelat.sortableClose=l.sortableClose,l.isAccordion=!0,l.accordionToggle=function(e){e=p(e),0!==e.length&&(e.hasClass("AccordionItemExpanded")?l.accordionClose(e):l.accordionOpen(e))},l.accordionOpen=function(e){e=p(e);var t=e.parents(".AccordionList").eq(0),n=e.children(".AccordionItemCon");0===n.length&&(n=e.find(".AccordionItemCon"));var o=t.length>0&&e.parent().children(".AccordionItemExpanded");o.length>0&&l.accordionClose(o),n.css("height",n[0].scrollHeight+"px").transitionEnd(function(){if(e.hasClass("AccordionItemExpanded")){n.transition(0),n.css("height","auto");e[0].clientLeft;n.transition(""),e.trigger("opened")}else n.css("height",""),e.trigger("closed");l.isAccordion=!0}),e.trigger("open"),e.addClass("AccordionItemExpanded")},l.accordionClose=function(e){e=p(e);var t=e.children(".AccordionItemCon");0===t.length&&(t=e.find(".AccordionItemCon")),e.removeClass("AccordionItemExpanded"),t.transition(0),t.css("height",t[0].scrollHeight+"px");t[0].clientLeft;t.transition(""),t.css("height","").transitionEnd(function(){if(e.hasClass("AccordionItemExpanded")){t.transition(0),t.css("height","auto");t[0].clientLeft;t.transition(""),e.trigger("opened")}else t.css("height",""),e.trigger("closed");l.isAccordion=!0}),e.trigger("close")},l.initAccordion=function(e){p(document).on("click",".AccordionItemToggle,.ItemLink,.AccordionItem",function(){if(l.isAccordion){var t=p(this),n=t.parent(".AccordionItem");0===n.length&&(n=t.parents(".AccordionItem")),0===n.length&&(n=t.parents("li")),t.hasClass("ItemLink")&&t.parent().hasClass("AccordionItem")&&(l.accordionToggle(n),l.isAccordion=!!e)}})},e.kelat.initAccordion=l.initAccordion,e.kelat.accordionOpen=l.accordionOpen,e.kelat.accordionClose=l.accordionClose,e.kelat.accordionToggle=l.accordionToggle,l.materialTabbarSetHighlight=function(e,t){e=p(e),t=t||e.find(".TabLink.active");var n,o;e.hasClass("TabBarScrollable")?(n=t[0].offsetWidth+"px",o=(f.rtl?-t[0].offsetLeft:t[0].offsetLeft)+"px"):(n=1/e.find(".TabLink").length*100+"%",o=100*(f.rtl?-t.index():t.index())+"%"),e.find(".TabLinkHighlight").css({width:n}).transform("translate3d("+o+",0,0)")},l.initPageMaterialTabbar=function(t){function n(){l.materialTabbarSetHighlight(o)}t=p(t);var o=p(t).find(".TabBar");o.length>0&&(0===o.find(".TabLinkHighlight").length&&o.find(".ToolBarInner").append('<span class="TabLinkHighlight"></span>'),n(),p(e).on("resize",n),t.once("pageBeforeRemove",function(){$(e).off("resize",n)}))},l.showTab=function(e,t,n){var o=p(e);if(2===arguments.length&&"boolean"==typeof t&&(n=t),0===o.length)return!1;if(o.hasClass("active"))return n&&o.trigger("show"),!1;var i=o.parent(".Tabs");if(0===i.length)return!1;l.allowSwipeout=!0;var a=i.parent().hasClass("TabsAnimatedWrap");if(a){var r=100*(f.rtl?o.index():-o.index());i.transform("translate3d("+r+"%,0,0)")}var s=i.children(".Tab.active").removeClass("active");if(o.addClass("active"),o.trigger("show"),!a&&o.find(".NavBar").length>0){var c;c=o.hasClass(app.params.viewClass)?o[0]:o.parents("."+app.params.viewClass)[0],l.SizeNavbars(c)}if(t?t=p(t):(!(t=p("string"==typeof e?'.tab-link[href="'+e+'"]':'.tab-link[href="#'+o.attr("id")+'"]'))||t&&0===t.length)&&p("[data-tab]").each(function(){o.is(p(this).attr("data-tab"))&&(t=p(this))}),0!==t.length){var u;if(s&&s.length>0){var d=s.attr("id");d&&(u=p('.TabLink[href="#'+d+'"]')),(!u||u&&0===u.length)&&p("[data-tab]").each(function(){s.is(p(this).attr("data-tab"))&&(u=p(this))})}if(t&&t.length>0){t.addClass("active");var h=t.parents(".TabBar");h.length>0&&(0===h.find(".TabLinkHighlight").length&&h.find(".ToolBarInner").append('<span class="TabLinkHighlight"></span>'),l.materialTabbarSetHighlight(h,t))}return u&&u.length>0&&u.removeClass("active"),!0}},l.initTab=function(e,t,n){p(document).on("click",".TabLink",function(){var e=p(this),t=e.dataset();l.showTab(t.tab||e.attr("href"),e)}),l.initPageMaterialTabbar(p(document.getElementById(u.WrapperArea)))},e.kelat.tabs=l.initTab,e.kelat.showTab=l.showTab,l.NumberBox=function(){var e=".NumBoxPlus",t=".NumBoxMinus",n=function(n){null===n.value||""===n.value||isNaN(n.value)?n.input.val(n.min||0):(null!=n.max&&!isNaN(n.max)&&n.value>=parseInt(n.max)?(n.value=n.max,n.parent.find(e).addClass("disabled")):n.parent.find(e).removeClass("disabled"),null!=n.min&&!isNaN(n.min)&&n.value<=parseInt(n.min)?(n.value=n.min,n.parent.find(t).addClass("disabled")):n.parent.find(t).removeClass("disabled"),n.input.val(n.value))};return p(document).on(u.support.onClick,e+","+t,function(){var o,i=p(this),a=i.parent(".NumBox"),r=a.find(".NumBoxInput"),l=parseInt(a[0].getAttribute("data-step")||1),c=a[0].getAttribute("data-min")?parseInt(a[0].getAttribute("data-min")):"",u=a[0].getAttribute("data-max")?parseInt(a[0].getAttribute("data-max")):"";i.is(e)?o=parseInt(r.val())+l:i.is(t)&&(o=parseInt(r.val())-l),s&&n({value:o,min:c,max:u,parent:a,input:r})}),this},e.kelat.numberBox=l.NumberBox,l.Progressbar=function(t,n){if(t=p(t||"body"),0!==t.length&&s){var o;return t.hasClass("ProgressBar")?o=t:(o=t.children(".ProgressBar:not(.ProgressBarOut)"),0===o.length&&(o=p('<span class="ProgressBar ProgressBarIn"></span>'),t.append(o))),e.setTimeout(function(){o.remove()},n?n:2e3),o[0]}},e.kelat.progressbar=l.Progressbar,l.Ripple=function(){return p(document).on(u.support.onClick,".InkRipple",function(e){if(s){if(u.support.touch&&!e.targetTouches)return;var t=p(this),n=+new Date,o=Math.max(t.outerWidth(),t.outerHeight()),i=(u.support.touch?e.targetTouches[0].pageX:e.pageX)-t.offset().left-o/2,a=(u.support.touch?e.targetTouches[0].pageY:e.pageY)-t.offset().top-o/2;t.prepend('<span class="ink" id="ink'+n+'" style="top:'+a+"px;left:"+i+"px;height:"+o+"px;width:"+o+'px"></span>');var r=p("#ink"+n);r.addClass("RippleAnimate").animationEnd(function(){r.remove()})}})},l.FloatButton=function(e){var t=p(e);return t.hasClass("FloatingButton")&&t.parent().hasClass("SpeedDial")&&t.on(u.support.onClick,function(e){e.preventDefault(),p(this).parent(".SpeedDial").toggleClass("SpeedDialOpened")}),this},e.kelat.floatButton=l.FloatButton,l.PushMenu=function(){var t=u.screenSizes;p(document).on("click",".SidebarToggle",function(n){n.preventDefault(),p(e).width()>t.sm-1?p("body").hasClass("SidebarCollapse")?p("body").removeClass("SidebarCollapse"):p("body").addClass("SidebarCollapse"):p("body").hasClass("SidebarOpen")?p("body").removeClass("SidebarOpen").removeClass("SidebarCollapse"):p("body").addClass("SidebarOpen")}),p(".ContentWrapper").click(function(){p(e).width()<=t.sm-1&&p("body").hasClass("SidebarOpen")&&p("body").removeClass("SidebarOpen")})},e.kelat.extend({imgReady:function(){var e=[],t=null,n=function(){for(var t=0;t<e.length;t++)e[t].end?e.splice(t--,1):e[t]();!e.length&&o()},o=function(){clearInterval(t),t=null};return function(o,i,a,r){var s,l,c,u,d,p=new Image;if(p.src=o,p.complete)return i.call(p),void(a&&a.call(p));l=p.width,c=p.height,p.onerror=function(){r&&r.call(p),s.end=!0,p=p.onload=p.onerror=null},s=function(){u=p.width,d=p.height,(u!==l||d!==c||u*d>1024)&&(i.call(p),s.end=!0)},s(),p.onload=function(){!s.end&&s(),a&&a.call(p),p=p.onload=p.onerror=null},s.end||(e.push(s),null===t&&(t=setInterval(n,40)))}}(),imgRender:function(e,t){(new Image).src=e.path,kelat.imgReady(e.path,function(){},function(){var n=this,o=n.width,i=n.height,a=o/i;o=e.width||100,i=o/a;var r=document.createElement("canvas"),s=r.getContext("2d");r.style.width=o,r.style.height=i,s.drawImage(n,0,0,o,i),t(r.toDataURL())},function(){kelat.alert(u.ImgTips)})}});var h=!0;return l.initImagesLazyLoad=function(t){function n(e){function t(){e.removeClass("Lazy").addClass("LazyLoaded"),o?e.css("background-image","url("+i+")"):e.attr("src",i),u.ImgLazyLoadSequential&&(f=!1,d.length>0&&n(d.shift()))}e=p(e);var o=e.attr("data-background"),i=o?o:e.attr("data-src");if(i){if(u.ImgLazyLoadSequential&&f)return void(d.indexOf(e[0])<0&&d.push(e[0]));f=!0;var a=new Image;a.onload=t,a.onerror=t,a.src=i}}function o(){s=l.find(".Lazy"),0===s?(h=!1,r()):(h=!0,a(),s.each(function(e,t){t=p(t),i(t[0])&&n(t)}))}function i(t){var n=t.getBoundingClientRect(),o=u.ImgLazyLoadThreshold||0;return n.top>=0-o&&n.left>=0-o&&n.top<=e.innerHeight+o&&n.left<=e.innerWidth+o}function a(t){var n=t?"off":"on";s[n]("lazy",o),l[n]("lazy",o),p(e)[n]("scroll",o),p(e)[n]("resize",o)}function r(){a(!0)}var s,l=p("#"+u.WrapperArea);if(l.hasClass("Lazy")?(s=l,l=s.parents("#"+u.WrapperArea)):s=l.find(".Lazy"),0!==s.length){var c=u.ImgPlaceholder;"string"==typeof t&&(c=t),t!==!1&&s.each(function(){p(this).attr("data-src")&&p(this).attr("src",c)});var d=[],f=!1;a(),o()}},e.kelat.imagesLazyLoad=l.initImagesLazyLoad,e.kelat.init=function(){l.Ripple&&l.Ripple(),l.BackToTop&&l.BackToTop(),l.PushMenu&&l.PushMenu()}(),"function"==typeof define&&define.amd&&define("kelat",function(){return e.kelat}),t||(e.kelat=e.$$=kelat),s||kelat.addNotify({title:u.ModalTitle,message:u.message}),e.kelat}});
//# sourceMappingURL=kelat.min.js.map