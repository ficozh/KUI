/*!
 * kelat JavaScript Library v1.0.0-beta1
 * https://kelat.com/
 *
 * Date: 2016-03-14
 */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("kelat \u9700\u8981\u4e00\u4e2a\u6587\u6863\u7a97\u53e3");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function h(a){var b=!!a&&"length"in a&&a.length,c=kelat.type(a);return"function"===c||kelat.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function i(a,b){return g.RegExpr.validate[b].test(a)&&g.running?!0:!1}function j(b){var c={},d=b?b:a.location.href,e=d.indexOf("#/")+1,f=d.substring(e),h=f.indexOf("?")+1,i=f.substring(h);if(0!==h)for(var j=i.split("&"),k=0;k<j.length;k++){var l=j[k].split("=");c[l[0]]=l[1]}return g.running?c:null}function k(a,b,c){if("undefined"!=typeof a&&g.running){var d=document.getElementsByTagName("head")[0];if("js"==b){var e=document.createElement("script");e.src=a,e.type="text/javascript",d.appendChild(e),c&&(e.onload=e.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||c()})}else if("css"==b){var f=document.createElement("link");f.href=a,f.rel="stylesheet",f.type="text/css",d.appendChild(f)}}return this}function l(a,b){return function(){b.apply(a,arguments)}}function m(){var b=g.running,c='<div class="BackToTop"><i class="I IGoTop"></i></div>';$(a).on("scroll",function(){var a=$(c),d=g.support.GetPageScroll().Y;d>=200&&b?(b=!1,$(document.getElementById(g.WrapperArea)).append(a.fadeIn()),a.one(g.support.onClick,function(){a.animate({opacity:"0"},400,function(){$(this).remove()}),$("html,body").animate({scrollTop:"0px"},100)})):100>d&&(b=g.running,$(".BackToTop").remove())})}function n(b){if(b){b=b||{};var c=b.title?'<div class="ItemTitle">'+b.title+"</div>":"",d=b.subtitle?'<div class="ItemSubtitle">'+b.subtitle+"</div>":"",e=b.message?'<div class="ItemText">'+b.message+"</div>":"",f=b.media?'<div class="ItemMedia">'+b.media+"</div>":"",h='<div class="ItemAfter"><a href="javascript:;" class="CloseNotify"><span></span></a></div>',i=$(".NotifyBox");0===i.length&&($(document.getElementById(g.WrapperArea)).append('<ul class="NotifyBox ListBlock MediaList" style="z-index:'+g.LayerIndex+'"></ul>'),i=$(".NotifyBox")),i.show();var j='<li class="ListItem"><div class="ItemCon InkRipple">'+f+'<div class="ItemInner"><div class="ItemTitleRow">'+c+h+"</div>"+d+e+"</div></div></li>",k=$(j);k.on(g.support.onClick,function(a){var c=!1,d=$(a.target);(d.is(".CloseNotify")||$(a.target).parents(".CloseNotify").length>0)&&(c=!0,b.onClose&&b.onClose(k[0],a)),c&&o(k[0])}),i.prepend(k[0]);var l=k.outerHeight();k.css("margin-top",-l+"px"),a.setTimeout(function(){k.addClass("ListItemInOut").css("margin-top","0px")},20)}return this}function o(b){if(b=$(b),0!==b.length){var c=$(".NotifyBox"),d=b.outerHeight();b.css("height",d+"px"),a.setTimeout(function(){b.addClass("ListItemInOut").css("height","0px")},20),b.addClass("NotifyBoxHidden").one(g.TransitionEnd,function(){b.remove(),0===c.find(".ListItem").length&&c.hide()})}}function p(){return g.running?$(document.getElementById(g.WrapperArea)).append('<div class="LoadingIndicatorBlank"></div><div class="LoadingIndicatorBox"><span class="Loading LoadingWhite"></span></div>'):null}function q(){return $(".LoadingIndicatorBlank, .LoadingIndicatorBox").remove()}function r(a){return g.running?v({title:a||g.LoadingTitle,content:'<div class="TC">'+g.LoadingHtml+"</div>",className:"ModalLoading"}):null}function s(){return u(".ModalBox.ModalLoading")}function t(b,c){$(document.getElementById(g.WrapperArea)).append('<div class="PF ModalBlank" style="z-index:'+g.LayerIndex+'"/>'),$(document.getElementById(g.WrapperArea)).append(b[0]),b&&g.running&&("ModalPromptBox"==c?(b.addClass("ModalPromptBox").show(),a.setTimeout(function(){u()},2e3)):b.addClass(c).css({marginTop:-Math.round(b.outerHeight()/2)+"px"}),b.css({"z-index":++g.LayerIndex}).removeClass("ModalBoxOut").addClass("ModalBoxIn"))}function u(a){a=$(a||".ModalBox.ModalBoxIn"),("undefined"==typeof a||0!==a.length)&&$(a).addClass("ModalBoxOut").on(g.TransitionEnd,function(){$(this).remove()}).prev(".ModalBlank,.ActionsModal").animate({opacity:"0"},400,function(){$(this).remove()})}function v(a){a=a||{};var b="",c="",d="";if(a.buttons&&a.buttons.length>0)for(var e=0;e<a.buttons.length;e++)0==e?c="First":e==a.buttons.length-1&&(c="Last"),b+='<a href="javascript:;" class="ModalButton '+c+'">'+a.buttons[e].text+"</a>";var f=a.title?'<div class="ModalHeader">'+a.title+"</div>":"",h=a.content?'<div class="ModalContent">'+a.content+"</div>":"",i=a.afterText?a.afterText:"",j=a.buttons&&0!==a.buttons.length?"":"ModalNoButtons",k=a.buttons&&a.buttons.length>0?'<div class="ModalFooter ModalFooter'+a.buttons.length+'">'+b+"</div>":"";d='<div class="ModalBox '+j+'"><div class="ModalInner">'+(f+h+i)+"</div>"+k+"</div>";var l=$(d);return l.find(".ModalButton").each(function(b,c){$(c).on(g.support.onClick,function(c){a.buttons[b].close!==!1&&u(l),a.buttons[b].onClick&&a.buttons[b].onClick(l,c),a.onClick&&a.onClick(l,b)})}),t(l,a.className?a.className:""),l[0]}function w(a,b,c){return"function"==typeof b&&(c=arguments[1],b=void 0),g.running?v({content:a||"",title:"undefined"==typeof b?g.ModalTitle:b,buttons:[{text:g.ModalButtonOk,onClick:c}]}):null}function x(a,b,c,d){return"function"==typeof b&&(d=arguments[2],c=arguments[1],b=void 0),g.running?v({content:a||"",title:"undefined"==typeof b?g.ModalTitle:b,buttons:[{text:g.ModalButtonCancel,onClick:d},{text:g.ModalButtonOk,onClick:c}]}):null}function y(a){return g.running?v({content:a||"",className:"ModalPromptBox"}):null}function z(a,b,c,d){return"function"==typeof b&&(d=arguments[2],c=arguments[1],b=void 0),g.running?v({content:a||"",title:"undefined"==typeof b?g.ModalTitle:b,className:"ModalPickerBox",buttons:[{text:g.ModalButtonCancel,onClick:d},{text:g.ModalButtonOk,onClick:c}]}):null}function A(a,b,c){"function"==typeof b&&(c=arguments[1],b=void 0);var d=a?'<div class="BlankTipsTitle">'+a+"</div>":"",e=b?'<div class="BlankTipsContent">'+b+"</div>":"",f='<div class="BlankTips">'+e+d+"</div></div>",h=$(f);return h.on(g.support.onClick,function(a){c&&c(h,a)}),$(document.getElementById(g.WrapperArea)).append(h),this}function B(a){var b=$('<div class="PF ModalBlank" id="OpenActions" style="z-index:'+g.LayerIndex+'"/>');$(document.getElementById(g.WrapperArea)).append(b),$(document.getElementById(g.WrapperArea)).append(a[0]),a&&g.running&&a.show().css({"z-index":++g.LayerIndex}).removeClass("ModalBoxOut").addClass("ModalBoxIn").one(g.TransitionEnd,function(){b.on(g.support.onClick,function(){u(a)})})}function C(a){for(var a=a||[],b="",c="",d=0;d<a.length;d++)for(var e=0;e<a[d].length;e++){0===e&&(b+='<div class="ActionsModalGroup">');var f=a[d][e],h=f.label?"ActionsLabel":"ActionsButton",i=f.text?f.text:g.ModalButtonCancel;f.bold&&(h+=" ActionsButtonBold"),f.color&&(h+=" "+f.color),f.bg&&(h+=" "+f.bg),f.disabled&&(h+=" disabled"),b+='<div class="'+h+'">'+i+"</div>",e===a[d].length-1&&(b+="</div>")}c='<div class="ModalBox ActionsModal">'+b+"</div>";var j=".ActionsModalGroup",k=".ActionsButton",l=$(c),m=l.find(j);return m.each(function(b,c){var d=b;$(c).children().each(function(b,c){var h,e=b,f=a[d][e];$(c).is(k)&&(h=$(c)),$(c).find(k).length>0&&(h=$(c).find(k)),h&&h.on(g.support.onClick,function(a){f.close!==!1&&u(l),f.onClick&&f.onClick(l,a)})})}),B(l),this}function D(){var a=".NumBoxPlus",b=".NumBoxMinus",c="disabled",d=function(d){null==d.value||""==d.value||isNaN(d.value)?d.input.val(d.min||0):(null!=d.max&&!isNaN(d.max)&&d.value>=parseInt(d.max)?(d.value=d.max,d.parent.find(a).addClass(c)):d.parent.find(a).removeClass(c),null!=d.min&&!isNaN(d.min)&&d.value<=parseInt(d.min)?(d.value=d.min,d.parent.find(b).addClass(c)):d.parent.find(b).removeClass(c),d.input.val(d.value))};return $(document).on(g.support.onClick,a+","+b,function(){var k,c=$(this),e=c.parent(".NumBox"),f=e.find(".NumBoxInput"),h=parseInt(e.attr("data-step")||1),i=parseInt(e.attr("data-min")),j=parseInt(e.attr("data-max"));c.is(a)?k=parseInt(f.val())+h:c.is(b)&&(k=parseInt(f.val())-h),g.running?d({value:k,min:i,max:j,parent:e,input:f}):""}),this}function E(b,c){if(b=$(b||"body"),0!==b.length){var d;return b.hasClass("ProgressBar")?d=b:(d=b.children(".ProgressBar:not(.ProgressBarOut)"),0===d.length&&(d=$('<span class="ProgressBar ProgressBarIn"></span>'),b.append(d))),a.setTimeout(function(){d.remove()},c),d[0]}}function F(){$(document).on(g.support.onClick,".InkRipple",function(a){if(g.running){var b=$(this),c=(new Date).getTime(),d=Math.max(b.outerWidth(),b.outerHeight()),e=a.pageX-b.offset().left-d/2,f=a.pageY-b.offset().top-d/2;b.prepend('<span class="ink" id="ink'+c+'" style="top:'+f+"px;left:"+e+"px;height:"+d+"px;width:"+d+'px"></span>');var h=$("#ink"+c);h.addClass("RippleAnimate").one(g.AnimationEnd,function(){$(this).remove()})}})}function G(){return $(document).on(g.support.onClick,".FloatingButton",function(a){a.preventDefault(),$(this).parent(".SpeedDial").toggleClass("SpeedDialOpened")}),this}var c="1.0.0",d={},e=d.toString,f=d.hasOwnProperty,g={title:"KMUI",message:"\u60a8\u4f7f\u7528\u671f\u5df2\u5230\uff01",WrapperArea:"WrapperArea",LayerIndex:"2000",LoadingTitle:"\u6b63\u5728\u52a0\u8f7d...",LoadingHtml:'<span class="Loading"></span>',ModalTitle:"\u63d0\u793a",ModalButtonOk:"\u786e\u5b9a",ModalButtonCancel:"\u53d6\u6d88",ModalActionsClose:!1,running:++[[]][+[]]+[]+[]>>>0?!0:!1,RegExpr:{trim:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,device:{android:/(Android);?[\s\/]+([\d.]+)?/,ipad:/(iPad).*OS\s([\d_]+)/,ipod:/(iPod)(.*OS\s([\d_]+))?/,iphone:/(iPhone\sOS)\s([\d_]+)/},validate:{email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,phone:/^((\(\d{3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}$/,mobile:/^1[34578]\d{9}$/,number:/^\d+$/,integer:/^[-\+]?\d+$/,english:/^[A-Za-z]+$/,chinese:/^[\u0391-\uFFE5]+$/,date:/^(\d{4})\u5e74(0\d{1}|1[0-2])\u6708(0\d{1}|[12]\d{1}|3[01])\u65e5$/}},support:function(){var b={};return b.touch=!!("ontouchstart"in a||a.DocumentTouch&&document instanceof DocumentTouch),b.onClick=b.touch?"tap":"click",b.GetPageScroll=function(){var b="",c="";return a.pageYOffset?(c=a.pageYOffset,b=a.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(c=document.documentElement.scrollTop,b=document.documentElement.scrollLeft):document.body&&(c=document.body.scrollTop,b=document.body.scrollLeft),{X:b,Y:c}},b.GetPageSize=function(){var b="",c="";a.innerHeight&&a.scrollMaxY?(b=a.innerWidth+a.scrollMaxX,c=a.innerHeight+a.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(b=document.body.scrollWidth,c=document.body.scrollHeight):document.body&&(b=document.body.offsetWidth,c=document.body.offsetHeight);var d="",e="";a.innerHeight?(d=a.innerWidth,e=a.innerHeight):document.documentElement&&document.documentElement.clientHeight?(d=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(d=document.body.clientWidth,e=document.body.clientHeight);var f=d>b?d:b,g=e>c?e:c;return{PageW:f,PageH:g,WinW:d,WinH:e}},b}(),TransitionEnd:"webkitTransitionEnd transitionend",AnimationEnd:"webkitAnimationEnd animationend"};a.kelat||(a.kelat=function(b,c){return new a.kelat.fn.init(b,c)},a.kelat.version=c),a.kelat.fn=a.kelat.prototype={constructor:kelat,support:g.support,trim:function(a){return"string"==typeof a&&g.running?a.replace(g.RegExpr.trim,""):""},jsonArray:function(a){return g.running?JSON.stringify(a):""},log:function(a,b){return g.running?console.log(b||"warning",": ",a):""},ls:a.localStorage,device:function(){var b={},c=navigator.userAgent,d=c.match(g.RegExpr.device.android),e=c.match(g.RegExpr.device.ipad),f=c.match(g.RegExpr.device.ipod),h=!e&&c.match(g.RegExpr.device.iphone);if(b.ios=b.android=b.iphone=b.ipad=b.androidChrome=!1,d&&(b.os="android",b.osVersion=d[2],b.android=!0,b.androidChrome=c.toLowerCase().indexOf("chrome")>=0),(e||h||f)&&(b.os="ios",b.ios=!0),h&&!f&&(b.osVersion=h[2].replace(/_/g,"."),b.iphone=!0),e&&(b.osVersion=e[2].replace(/_/g,"."),b.ipad=!0),f&&(b.osVersion=f[3]?f[3].replace(/_/g,"."):null,b.iphone=!0),b.ios&&b.osVersion&&c.indexOf("Version/")>=0&&"10"===b.osVersion.split(".")[0]&&(b.osVersion=c.toLowerCase().split("version/")[1].split(" ")[0]),b.webView=(h||e||f)&&c.match(/.*AppleWebKit(?!.*Safari)/i),b.os&&"ios"===b.os){var i=b.osVersion.split(".");b.minimalUi=!b.webView&&(f||h)&&(1*i[0]===7?1*i[1]>=1:1*i[0]>7)&&$('meta[name="viewport"]').length>0&&$('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var j=g.support.GetPageSize();b.statusBar=!1,b.webView&&j.WinW*j.WinH===screen.width*screen.height?b.statusBar=!0:b.statusBar=!1;var k=[];if(b.pixelRatio=a.devicePixelRatio||1,k.push("PixelRatio"+Math.floor(b.pixelRatio)),b.pixelRatio>=2&&k.push("Retina"),b.os&&(k.push(b.os,b.os+"-"+b.osVersion.split(".")[0],b.os+"-"+b.osVersion.replace(/\./g,"-")),"ios"===b.os))for(var l=parseInt(b.osVersion.split(".")[0],10),m=l-1;m>=6;m--)k.push("iosGt"+m);return b.statusBar?k.push("StatusbarOverlay"):$("html").removeClass("StatusbarOverlay"),k.length>0&&$("html").addClass(k.join(" ")),g.running?b:""}(),touchEvents:{start:g.support.touch?"touchstart":"mousedown",move:g.support.touch?"touchmove":"mousemove",end:g.support.touch?"touchend":"mouseup",cancel:"touchcancel"},touches:function(b,c,d){function i(b){var b=b||a.event||arguments.callee.caller.arguments[0];switch(b.preventDefault(),g.support.touch&&(e.touchLength=b.targetTouches.length||0),b.type){case kelat.fn.touchEvents.start:e.startX=Number("touchstart"===b.type?b.targetTouches[0].pageX:b.pageX),e.startY=Number("touchstart"===b.type?b.targetTouches[0].pageY:b.pageY);break;case kelat.fn.touchEvents.end:e.diffX=Number("touchend"===b.type?e.currentX-e.startX:b.pageX),e.diffY=Number("touchend"===b.type?e.currentY-e.startY:b.pageY);break;case kelat.fn.touchEvents.move:e.currentX=Number("touchmove"===b.type?b.targetTouches[0].pageX:b.pageX),e.currentY=Number("touchmove"===b.type?b.targetTouches[0].pageY:b.pageY);break;case kelat.fn.touchEvents.cancel:}d(e,f)}"function"==typeof c&&(d=arguments[1],c=void 0);var e={startX:0,startY:0,currentX:0,currentY:0,diffX:0,diffY:0},f=b,h=c?"removeEventListener":"addEventListener";return f[h](kelat.fn.touchEvents.start,i,!1),f[h](kelat.fn.touchEvents.move,i,!1),f[h](kelat.fn.touchEvents.end,i,!1),f[h](kelat.fn.touchEvents.cancel,i,!1),g.running?e:""}},a.kelat.extend=a.kelat.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"!=typeof g&&(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(kelat.isPlainObject(d)||(e=kelat.isArray(d)))?(e?(e=!1,f=c&&kelat.isArray(c)?c:[]):f=c&&kelat.isPlainObject(c)?c:{},g[b]=kelat.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},a.kelat.extend({expando:"kelat"+(c+Math.random()).replace(/\D/g,""),noop:function(){},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isPlainObject:function(a){return"object"!==kelat.type(a)||a.nodeType||kelat.isWindow(a)?!1:a.constructor&&!f.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?d[e.call(a)]||"object":typeof a},each:function(a,b){var c,d=0;if(h(a))for(c=a.length;c>d&&b.call(a[d],d,a[d])!==!1;d++);else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a}}),kelat.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){d["[object "+b+"]"]=b.toLowerCase()}),a.kelat.validate=i,a.kelat.getUrlParams=j,a.kelat.loadJC=k,a.kelat.bindFunction=l,a.kelat.params={},a.kelat.backToTop=function(){return new m},a.kelat.addNotify=n,a.kelat.indicator=p,a.kelat.unIndicator=q,a.kelat.loading=r,a.kelat.unLoading=s,a.kelat.alert=w,a.kelat.confirm=x,a.kelat.prompt=y,a.kelat.picker=z,a.kelat.blankTips=A,a.kelat.actions=C,a.kelat.numberBox=D,a.kelat.progressbar=E,a.kelat.floatButton=G,a.kelat.init=function(){F()}();var H=a.kelat.fn.init=function(a,b,c){return a?this:this};return H.prototype=a.kelat.fn,"function"==typeof define&&define.amd&&define("kelat",["jquery","jqueryMobile"],function(){return a.kelat}),b||(a.kelat=a.$$=kelat),g.running||kelat.addNotify({title:g.title,message:g.message}),a.kelat});